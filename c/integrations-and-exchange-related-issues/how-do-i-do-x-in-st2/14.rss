<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:discourse="http://www.discourse.org/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>How do I do X in st2? - StackStorm Support (ARCHIVED)</title>
    <link>https://forum.stackstorm.com/c/integrations-and-exchange-related-issues/how-do-i-do-x-in-st2/14</link>
    <description>Topics in the &#39;How do I do X in st2?&#39; category </description>
    
      <lastBuildDate>Fri, 21 May 2021 16:44:05 +0000</lastBuildDate>
      <atom:link href="https://forum.stackstorm.com/c/integrations-and-exchange-related-issues/how-do-i-do-x-in-st2/14.rss" rel="self" type="application/rss+xml" />
        <item>
          <title>Multiple commands for remote-shell-cmd?</title>
          <dc:creator><![CDATA[guymatz]]></dc:creator>
          <category>How do I do X in st2?</category>
          <description><![CDATA[
            <p>Hello!  Is it possible to run more than one command with the remote-shell-cmd runner?  Or do I need a remote-shell-script?</p>
<p>Thanks,<br>
Guy</p>
            <p><small>4 posts - 2 participants</small></p>
            <p><a href="https://forum.stackstorm.com/t/multiple-commands-for-remote-shell-cmd/1714">Read full topic</a></p>
          ]]></description>
          <link>https://forum.stackstorm.com/t/multiple-commands-for-remote-shell-cmd/1714</link>
          <pubDate>Fri, 21 May 2021 16:44:05 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.stackstorm.com-topic-1714</guid>
          <source url="https://forum.stackstorm.com/t/multiple-commands-for-remote-shell-cmd/1714.rss">Multiple commands for remote-shell-cmd?</source>
        </item>
        <item>
          <title>St2 source code , How to make To deb file in local</title>
          <dc:creator><![CDATA[chenzhouyu]]></dc:creator>
          <category>How do I do X in st2?</category>
          <description><![CDATA[
            <p>st2 source code , How to make To deb file in local?<br>
st2 source code , How to use ‘Makefile’ get deb file in local?</p>
<p>$ cd /st2  make debs<br>
What steps are missing</p>
            <p><small>9 posts - 4 participants</small></p>
            <p><a href="https://forum.stackstorm.com/t/st2-source-code-how-to-make-to-deb-file-in-local/1207">Read full topic</a></p>
          ]]></description>
          <link>https://forum.stackstorm.com/t/st2-source-code-how-to-make-to-deb-file-in-local/1207</link>
          <pubDate>Tue, 05 May 2020 06:49:30 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.stackstorm.com-topic-1207</guid>
          <source url="https://forum.stackstorm.com/t/st2-source-code-how-to-make-to-deb-file-in-local/1207.rss">St2 source code , How to make To deb file in local</source>
        </item>
        <item>
          <title>How to add new workers to st2actionrunner service</title>
          <dc:creator><![CDATA[guzzijones]]></dc:creator>
          <category>How do I do X in st2?</category>
          <description><![CDATA[
            <p>The systemctl file is at:<br>
<code>/usr/lib/systemd/system/st2actionrunner.service</code><br>
the bash script is at:<br>
<code>/opt/stackstorm/st2/bin/runners.sh</code><br>
The bash script is expecting a variable called<br>
<code>WORKERS</code><br>
else defaults to 10<br>
there is an <code>EnvironmentsFile</code><br>
setting<br>
<code>EnvironmentFile=-/etc/sysconfig/st2actionrunner</code></p>
<p>Solution:</p>
<ul>
<li>For RHEL/CentOS systems edit <code>/etc/sysconfig/st2actionrunner</code>
</li>
<li>For Ubuntu/Debian systems edit <code>/etc/default/st2actionrunner</code>
</li>
</ul>
<p>and add a line:<br>
<code>WORKERS=25</code><br>
or whatever number of workers you want to try.</p>
            <p><small>6 posts - 3 participants</small></p>
            <p><a href="https://forum.stackstorm.com/t/how-to-add-new-workers-to-st2actionrunner-service/1036">Read full topic</a></p>
          ]]></description>
          <link>https://forum.stackstorm.com/t/how-to-add-new-workers-to-st2actionrunner-service/1036</link>
          <pubDate>Wed, 05 Feb 2020 15:47:40 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.stackstorm.com-topic-1036</guid>
          <source url="https://forum.stackstorm.com/t/how-to-add-new-workers-to-st2actionrunner-service/1036.rss">How to add new workers to st2actionrunner service</source>
        </item>
        <item>
          <title>CMDB integration</title>
          <dc:creator><![CDATA[rthorntn]]></dc:creator>
          <category>How do I do X in st2?</category>
          <description><![CDATA[
            <p>Hi,</p>
<p>I’m new to SS, please be gentle.</p>
<p>I want to use a REST API on SS to read “new discovered device” alerts from an external “network discovery” device, so GET the alerts from an external device, store the alert ID’s (and the device ID) on SS and use SS to compute which alerts you have already processed then from SS GET the device properties for any new devices from the external device and store the results in SS.  Maybe it makes sense for SS to be a mail destination for alerts from the network discovery device and do it that way?</p>
<p>UPDATE: I found the email pack, so I’m thinking of setting up an email account that SS can access via IMAP and having the network discovery device email new discovered device alerts to the email address.  Now I’m a bit confused <a href="https://github.com/StackStorm-Exchange/stackstorm-email/blob/master/README.md" class="inline-onebox" rel="nofollow noopener">stackstorm-email/README.md at master · StackStorm-Exchange/stackstorm-email · GitHub</a> in the “email.imap.message trigger | Example trigger payload” section shows “body”: “hello from stackstorm!\n” and “subject”: “test email with attachment” now does that mean the entire body (and subject) gets put into single values, if so, can I parse this and create multiple key value pairs from the email body, say I want to store just the alert_ID and device_ID numbers from the email body in two key value pairs, is this possible?</p>
<p>Then I would want to populate Device42 CMDB with the new devices but I’m more interested in figuring out the above network discovery part first.</p>
<p>Thanks.</p>
<p>Richard</p>
            <p><small>2 posts - 2 participants</small></p>
            <p><a href="https://forum.stackstorm.com/t/cmdb-integration/874">Read full topic</a></p>
          ]]></description>
          <link>https://forum.stackstorm.com/t/cmdb-integration/874</link>
          <pubDate>Tue, 15 Oct 2019 06:53:57 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.stackstorm.com-topic-874</guid>
          <source url="https://forum.stackstorm.com/t/cmdb-integration/874.rss">CMDB integration</source>
        </item>
        <item>
          <title>How do I call an external function from a stackstorm custom python action?</title>
          <dc:creator><![CDATA[Thecave3]]></dc:creator>
          <category>How do I do X in st2?</category>
          <description><![CDATA[
            <p>I have the following structure inside my actions pack:</p>
<pre><code>actions/
         __init__.py
          acl.run.py
          acl.run.yaml
          lib/
             __init__.py
             utils.py
</code></pre>
<p>And inside the acl.run.py script there is this import:</p>
<pre><code>from actions.lib.utils import create_device
</code></pre>
<p>But when I try to call the acl.run.py actions I get this error:</p>
<pre><code>ImportError: No module named 'actions'
</code></pre>
<p>I have also tried to use the relative path ( <em>.lib.utils</em>), but in that case I’ve got:</p>
<pre><code>SystemError: Parent module 'acl' not loaded, cannot perform relative import
</code></pre>
<p>If i remove the <em>acl</em> part from  the name I have:</p>
<pre><code>SystemError: Parent module '' not loaded, cannot perform relative import
</code></pre>
<p>Since I don’t know how exactly Stackstorm loads the script can someone write here and also in the documentation how to link the lib folder (named as best practice in the documentation( to the actions scripts?</p>
            <p><small>2 posts - 2 participants</small></p>
            <p><a href="https://forum.stackstorm.com/t/how-do-i-call-an-external-function-from-a-stackstorm-custom-python-action/766">Read full topic</a></p>
          ]]></description>
          <link>https://forum.stackstorm.com/t/how-do-i-call-an-external-function-from-a-stackstorm-custom-python-action/766</link>
          <pubDate>Tue, 23 Jul 2019 10:01:12 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.stackstorm.com-topic-766</guid>
          <source url="https://forum.stackstorm.com/t/how-do-i-call-an-external-function-from-a-stackstorm-custom-python-action/766.rss">How do I call an external function from a stackstorm custom python action?</source>
        </item>
        <item>
          <title>Why can&#39;t I write to a file in /tmp?</title>
          <dc:creator><![CDATA[guymatz]]></dc:creator>
          <category>How do I do X in st2?</category>
          <description><![CDATA[
            <p>In my run method I have:<br>
filename = ‘/root/st2-%s.out’ % timestamp<br>
with open(filename , ‘w’) as file:<br>
file.write(json.dumps(payload))</p>
<p>This works, however if I try to put the file in /tmp I get no output file.  Anyone know why I can’t write to /tmp?  Are there other rules around security, etc.  that I should be aware of?</p>
<p>Thanks!!</p>
            <p><small>4 posts - 3 participants</small></p>
            <p><a href="https://forum.stackstorm.com/t/why-cant-i-write-to-a-file-in-tmp/665">Read full topic</a></p>
          ]]></description>
          <link>https://forum.stackstorm.com/t/why-cant-i-write-to-a-file-in-tmp/665</link>
          <pubDate>Fri, 24 May 2019 14:45:49 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.stackstorm.com-topic-665</guid>
          <source url="https://forum.stackstorm.com/t/why-cant-i-write-to-a-file-in-tmp/665.rss">Why can&#39;t I write to a file in /tmp?</source>
        </item>
        <item>
          <title>Documentation: Config details for connecting to external PostgreSQL MongoDB and RabbitMQ Clusters</title>
          <dc:creator><![CDATA[Namachieli]]></dc:creator>
          <category>How do I do X in st2?</category>
          <description><![CDATA[
            <p>This post is for you if you are using a separate PostgreSQL/RabbitMQ/MongoDB HA Cluster.</p>
<p>I went through some pain getting this to work, and I was asked to make a post to hopefully save the next person some of that pain.</p>
<p>In my build scripts i used <code>crudini</code> to manipulate configuration files.</p>
<h3>MongoDB</h3>
<h5>/etc/st2/st2.conf</h5>
<p><code>sudo crudini --set /etc/st2/st2.conf database host "mongodb://${mongo_node1},${mongo_node1}/?replicaSet=${replica_set}"</code><br>
<code>sudo crudini --set /etc/st2/st2.conf database port ${monogo_port}</code><br>
<code>sudo crudini --set /etc/st2/st2.conf database username ${monogo_user}</code><br>
<code>sudo crudini --set /etc/st2/st2.conf database password ${monogo_user}</code><br>
<code>sudo crudini --set /etc/st2/st2.conf database db_name ${monogo_db}</code></p>
<h3>RabbitMQ</h3>
<h5>/etc/st2/st2.conf</h5>
<p><code>crudini --set /etc/st2/st2.conf messaging cluster_urls "amqp://${rabbit_user}:${rabbit_pass}@${rabbit_node1}:5672/,amqp://${rabbit_user}:${rabbit_pass}@${rabbit_node2}:5672/"</code></p>
<h5>/etc/mistral/mistral.conf</h5>
<p><code>sudo crudini --set /etc/mistral/mistral.conf DEFAULT transport_url "rabbit://${rabbit_user}:${rabbit_pass}@${RABBITMQ_LOADBALANCER_ENDPOINT}:5672"</code></p>
<h3>PostgreSQL</h3>
<h5>/etc/mistral/mistral.conf</h5>
<p><code>sudo crudini --set /etc/mistral/mistral.conf database connection "postgresql+psycopg2://mistral:${postgres_pwd}@${POSTGRES_ENDPOINT}/mistral"</code></p>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="https://forum.stackstorm.com/t/documentation-config-details-for-connecting-to-external-postgresql-mongodb-and-rabbitmq-clusters/588">Read full topic</a></p>
          ]]></description>
          <link>https://forum.stackstorm.com/t/documentation-config-details-for-connecting-to-external-postgresql-mongodb-and-rabbitmq-clusters/588</link>
          <pubDate>Thu, 04 Apr 2019 17:33:48 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.stackstorm.com-topic-588</guid>
          <source url="https://forum.stackstorm.com/t/documentation-config-details-for-connecting-to-external-postgresql-mongodb-and-rabbitmq-clusters/588.rss">Documentation: Config details for connecting to external PostgreSQL MongoDB and RabbitMQ Clusters</source>
        </item>
        <item>
          <title>How to use regex to filter result before publishing in a Mistral workflow?</title>
          <dc:creator><![CDATA[m4dcoder]]></dc:creator>
          <category>How do I do X in st2?</category>
          <description><![CDATA[
            <p>On publish or publish-on-error in Mistral workflow, YAQL or Jinja expressions can be used. There is a regex_match, regex_replace, regex_search, and regex_substring custom functions/filters that StackStorm include. The following is an example in YAQL using regex_match. More examples can be found at <a href="https://github.com/StackStorm/st2/tree/master/contrib/examples/actions/workflows/tests" rel="nofollow noopener">st2/contrib/examples/actions/workflows/tests at master · StackStorm/st2 · GitHub</a>.</p>
<pre><code class="lang-auto">version: '2.0'

examples.mistral-test-func-regex-match:
    description: A workflow for testing regex_match custom filter in mistral
    type: direct
    input:
        - input_str
        - regex_pattern
    output:
        result_jinja: &lt;% $.result_jinja %&gt;
        result_yaql: &lt;% $.result_yaql %&gt;
    tasks:

        task1:
            action: std.noop
            publish:
                result_jinja: '{{ regex_match(_.input_str, _.regex_pattern) }}'
                result_yaql: '&lt;% regex_match($.input_str, $.regex_pattern) %&gt;'
</code></pre>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="https://forum.stackstorm.com/t/how-to-use-regex-to-filter-result-before-publishing-in-a-mistral-workflow/181">Read full topic</a></p>
          ]]></description>
          <link>https://forum.stackstorm.com/t/how-to-use-regex-to-filter-result-before-publishing-in-a-mistral-workflow/181</link>
          <pubDate>Wed, 20 Jun 2018 21:06:15 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.stackstorm.com-topic-181</guid>
          <source url="https://forum.stackstorm.com/t/how-to-use-regex-to-filter-result-before-publishing-in-a-mistral-workflow/181.rss">How to use regex to filter result before publishing in a Mistral workflow?</source>
        </item>
        <item>
          <title>How to handle long running command using core.remote?</title>
          <dc:creator><![CDATA[m4dcoder]]></dc:creator>
          <category>How do I do X in st2?</category>
          <description><![CDATA[
            <p>There is a <code>timeout</code> option for the <code>core.remote</code> action. Run <code>st2 run core.remote -h</code> to look at the timeout option.  The following is an example.</p>
<pre><code class="lang-auto">~/st2$ st2 run core.remote hosts=localhost cmd=date timeout=120
.
id: 5b2abdf21e2e240a543784e7
status: succeeded
parameters: 
  cmd: date
  hosts: localhost
  timeout: 120
result: 
  localhost:
    failed: false
    return_code: 0
    stderr: ''
    stdout: Wed Jun 20 20:49:56 UTC 2018
    succeeded: true
</code></pre>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="https://forum.stackstorm.com/t/how-to-handle-long-running-command-using-core-remote/180">Read full topic</a></p>
          ]]></description>
          <link>https://forum.stackstorm.com/t/how-to-handle-long-running-command-using-core-remote/180</link>
          <pubDate>Wed, 20 Jun 2018 20:51:24 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.stackstorm.com-topic-180</guid>
          <source url="https://forum.stackstorm.com/t/how-to-handle-long-running-command-using-core-remote/180.rss">How to handle long running command using core.remote?</source>
        </item>
        <item>
          <title>Python dependencies for serverless plugin are not handled properly</title>
          <dc:creator><![CDATA[prapoorna]]></dc:creator>
          <category>How do I do X in st2?</category>
          <description><![CDATA[
            <p>Tried to use serverless plugin and use an action from exchange.<br>
Action: “GET” from servicenow pack</p>
<p>Encountered several errors with python dependencies using serverless. Here is an example attached:<br>
</p><div class="lightbox-wrapper"><a class="lightbox" href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/b35e23248f17c852899e6baec6ba36ac5c842e8c.png" title="Screen Shot 2018-05-16 at 10.29.44 AM.png" rel="nofollow noopener"><img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/b35e23248f17c852899e6baec6ba36ac5c842e8c_2_690x488.png" alt="44%20AM" width="690" height="488" srcset="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/b35e23248f17c852899e6baec6ba36ac5c842e8c_2_690x488.png, https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/b35e23248f17c852899e6baec6ba36ac5c842e8c_2_1035x732.png 1.5x, https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/b35e23248f17c852899e6baec6ba36ac5c842e8c_2_1380x976.png 2x" data-small-upload="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/b35e23248f17c852899e6baec6ba36ac5c842e8c_2_10x10.png"></a></div><p></p>
<p>Observations:<br>
python dependencies are not built/copied into virtual environments folder during deployment in the serverless package although they are specified in the requirements.txt and the modules exist in the system.</p>
<p>For the “GET” action in servicenow pack, the only dependency listed was “pysnow” which was part of the virtual environments in the package. However, when invoke command is run, it complained: ‘~st2/handler’: No module named six</p>
<p>When six was installed and added to requirements.txt, six module wasn’t copied to the virtual environments.<br>
I had to manually copy the module to the virtual environments, redeploy and invoke.<br>
This time it complained: ‘~st2/handler’: No module named oslo_config<br>
Repeated above steps and next it complained ‘~st2/handler’: No module named enum<br>
And assuming its a repetitive process until all dependencies are satisfied and I stopped at this point and couldn’t successfully invoke the action.</p>
<p>Questions:</p>
<ol>
<li>Where are the dependencies listed for an action with serverless plugin? Does serverless create a wrapper and has more internal dependencies, if so what are they? Cause they only show up during invocation and its hard to figure out</li>
<li>When an action is cloned from exchange during serverless deployment, should we assume the dependencies are already listed in requirements.txt?</li>
<li>What are actions to be taken to handle the dependencies? Clearly manual copy is not an option.<br>
Looking for a list and automated procedure that is handled during serverless deployment.</li>
</ol>
            <p><small>2 posts - 2 participants</small></p>
            <p><a href="https://forum.stackstorm.com/t/python-dependencies-for-serverless-plugin-are-not-handled-properly/147">Read full topic</a></p>
          ]]></description>
          <link>https://forum.stackstorm.com/t/python-dependencies-for-serverless-plugin-are-not-handled-properly/147</link>
          <pubDate>Wed, 16 May 2018 18:02:16 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.stackstorm.com-topic-147</guid>
          <source url="https://forum.stackstorm.com/t/python-dependencies-for-serverless-plugin-are-not-handled-properly/147.rss">Python dependencies for serverless plugin are not handled properly</source>
        </item>
        <item>
          <title>Howto: Restrict API Key to specific webhooks</title>
          <dc:creator><![CDATA[lhill]]></dc:creator>
          <category>How do I do X in st2?</category>
          <description><![CDATA[
            <p>By default, an API Key can be used for any action or webhook.</p>
<p>This is because it has the privileges of the admin user that created it.</p>
<p>But you can associate an API key with a user, by using <code>st2 apikey create -u &lt;user&gt;</code>. Then set up a role with limited access, and map that user to that role.</p>
<p>The role should look something like:</p>
<pre><code class="lang-auto">---
    name: "webhook"
    description: "Send permission to one specific webhook"
    enabled: true
    permission_grants:
        -
            resource_uid: "webhook:&lt;name&gt;"
            permission_types:
               - "webhook_send"
</code></pre>
<p>See this <a href="https://github.com/StackStorm/st2/issues/3725#issuecomment-375144042">Github Issue</a> for more information and examples.</p>
            <p><small>2 posts - 1 participant</small></p>
            <p><a href="https://forum.stackstorm.com/t/howto-restrict-api-key-to-specific-webhooks/96">Read full topic</a></p>
          ]]></description>
          <link>https://forum.stackstorm.com/t/howto-restrict-api-key-to-specific-webhooks/96</link>
          <pubDate>Thu, 22 Mar 2018 01:20:44 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.stackstorm.com-topic-96</guid>
          <source url="https://forum.stackstorm.com/t/howto-restrict-api-key-to-specific-webhooks/96.rss">Howto: Restrict API Key to specific webhooks</source>
        </item>
        <item>
          <title>About the How do I do X in st2? category</title>
          <dc:creator><![CDATA[lakstorm]]></dc:creator>
          <category>How do I do X in st2?</category>
          <description><![CDATA[
            <p>(Replace this first paragraph with a brief description of your new category. This guidance will appear in the category selection area, so try to keep it below 200 characters. <strong>Until you edit this description or create topics, this category won’t appear on the categories page.</strong>)</p>
<p>Use the following paragraphs for a longer description, or to establish category guidelines or rules:</p>
<ul>
<li>
<p>Why should people use this category? What is it for?</p>
</li>
<li>
<p>How exactly is this different than the other categories we already have?</p>
</li>
<li>
<p>What should topics in this category generally contain?</p>
</li>
<li>
<p>Do we need this category? Can we merge with another category, or subcategory?</p>
</li>
</ul>
            <p><small>1 post - 1 participant</small></p>
            <p><a href="https://forum.stackstorm.com/t/about-the-how-do-i-do-x-in-st2-category/82">Read full topic</a></p>
          ]]></description>
          <link>https://forum.stackstorm.com/t/about-the-how-do-i-do-x-in-st2-category/82</link>
          <pubDate>Wed, 14 Mar 2018 15:13:06 +0000</pubDate>
          <discourse:topicPinned>Yes</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.stackstorm.com-topic-82</guid>
          <source url="https://forum.stackstorm.com/t/about-the-how-do-i-do-x-in-st2-category/82.rss">About the How do I do X in st2? category</source>
        </item>
        <item>
          <title>Invoke an action from a Python action script</title>
          <dc:creator><![CDATA[n_kos]]></dc:creator>
          <category>How do I do X in st2?</category>
          <description><![CDATA[
            <p>Is there any way to invoke execution of an action from the python client? I would like to execute an action from an action without using action chain or mistral. I ended up using my one ActionManager but I wonder if there is a better API supported by the python client.</p>
<pre><code>from st2client.client import Client
from st2client.models import LiveAction


class ActionManager(object):

    def __init__(self):
        self.client = Client(base_url='http://localhost')

    def run_action_by_name(self, name, payload):
        action = self._get_action_from_name(name)
        action_ref = '.'.join([action.pack, action.name])
        execution = LiveAction()
        execution.action = action_ref
		execution.parameters = payload
        action_exec_manager = self.client.managers['LiveAction']
        action_exec_manager.create(execution)

    def _get_action_from_name(self, name):
        return self.client.actions.get_by_name(name)</code></pre>
            <p><small>8 posts - 3 participants</small></p>
            <p><a href="https://forum.stackstorm.com/t/invoke-an-action-from-a-python-action-script/24">Read full topic</a></p>
          ]]></description>
          <link>https://forum.stackstorm.com/t/invoke-an-action-from-a-python-action-script/24</link>
          <pubDate>Thu, 08 Mar 2018 11:04:19 +0000</pubDate>
          <discourse:topicPinned>No</discourse:topicPinned>
          <discourse:topicClosed>No</discourse:topicClosed>
          <discourse:topicArchived>No</discourse:topicArchived>
          <guid isPermaLink="false">forum.stackstorm.com-topic-24</guid>
          <source url="https://forum.stackstorm.com/t/invoke-an-action-from-a-python-action-script/24.rss">Invoke an action from a Python action script</source>
        </item>
  </channel>
</rss>
