<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device text-size-normal anon">
<head>
    <meta charset="utf-8">
    <title>401 Unauthorized error chatops with hubot-stackstrom plugin - Chatops - StackStorm Support (ARCHIVED)</title>
    <meta name="description" content="I tried starting hubot with hubot-stackstrom adaptor, resulted in 401 unauthorized error even though i generated new API key 
[root  myhubot]# bin/hubot 
Dilipkumarvarma&amp;gt; INFO Using ST2_API_KEY as authentication. Expiry &amp;hellip;">
    <meta name="discourse_theme_id" content="2">
    <meta name="discourse_current_homepage" content="latest">
    <meta name="generator"
          content="Discourse 2.8.0.beta6 - https://github.com/discourse/discourse version a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787">
    <link rel="icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_32x32.PNG">
    <link rel="apple-touch-icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_180x180.PNG">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <link rel="canonical" href="243.html"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://forum.stackstorm.com",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://forum.stackstorm.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml"
          title="StackStorm Support (ARCHIVED) Search">


    <link href="/../../stylesheets/color_definitions_base__2_3c5eec1ecf192052ea70b4afdab57a62bccc0604.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" class="light-scheme"/>

    <link href="/../../stylesheets/desktop_b2f2968742d41481357e0df259b51ce29f72481a.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" data-target="desktop"/>


    <meta name="fragment" content="!">


    <link id="manifest-link" rel="manifest" href="../../manifest.webmanifest" crossorigin="use-credentials">


    <link rel="alternate" type="application/rss+xml"
          title="RSS feed of &#39;401 Unauthorized error chatops with hubot-stackstrom plugin&#39;"
          href="https://forum.stackstorm.com/t/401-unauthorized-error-chatops-with-hubot-stackstrom-plugin/243.rss"/>
    <meta property="og:site_name" content="StackStorm Support (ARCHIVED)"/>
    <meta property="og:type" content="website"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:url"
          content="https://forum.stackstorm.com/t/401-unauthorized-error-chatops-with-hubot-stackstrom-plugin/243"/>
    <meta name="twitter:url"
          content="https://forum.stackstorm.com/t/401-unauthorized-error-chatops-with-hubot-stackstrom-plugin/243"/>
    <meta property="og:title" content="401 Unauthorized error chatops with hubot-stackstrom plugin"/>
    <meta name="twitter:title" content="401 Unauthorized error chatops with hubot-stackstrom plugin"/>
    <meta property="og:description"
          content="I tried starting hubot with hubot-stackstrom adaptor, resulted in 401 unauthorized error even though i generated new API key  [root  myhubot]# bin/hubot  Dilipkumarvarma&gt; INFO Using ST2_API_KEY as authentication. Expiry will lead to bot exit.  WARNING No supported formatter found for shell. Using DefaultFormatter.  WARNING No post handler found for shell. Using DefaultFormatter.  INFO Loading commands‚Ä¶  INFO hubot-redis-brain: Using default redis on localhost:6379  INFO hubot-redis-brain: Data f..."/>
    <meta name="twitter:description"
          content="I tried starting hubot with hubot-stackstrom adaptor, resulted in 401 unauthorized error even though i generated new API key  [root  myhubot]# bin/hubot  Dilipkumarvarma&gt; INFO Using ST2_API_KEY as authentication. Expiry will lead to bot exit.  WARNING No supported formatter found for shell. Using DefaultFormatter.  WARNING No post handler found for shell. Using DefaultFormatter.  INFO Loading commands‚Ä¶  INFO hubot-redis-brain: Using default redis on localhost:6379  INFO hubot-redis-brain: Data f..."/>
    <meta property="article:published_time" content="2018-07-30T02:46:06+00:00"/>
    <meta property="og:ignore_canonical" content="true"/>


    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "QAPage",
        "name": "401 Unauthorized error chatops with hubot-stackstrom plugin",
        "mainEntity": {
            "@type": "Question",
            "name": "401 Unauthorized error chatops with hubot-stackstrom plugin",
            "text": "I tried starting hubot with hubot-stackstrom adaptor, resulted in 401 unauthorized error even though i generated new API key\n\n[root  myhubot]# bin/hubot\n\nDilipkumarvarma&gt; INFO Using ST2_API_KEY as authentication. Expiry will lead to bot exit.\n\nWARNING No supported formatter found for shell. Using De&hellip;",
            "upvoteCount": 0,
            "answerCount": 0,
            "dateCreated": "2018-07-30T02:46:06.554Z",
            "author": {
                "@type": "Person",
                "name": "DILIP JETTY"
            }
        }
    }
    </script>

    <meta id="data-discourse-setup" data-cdn="https://sjc6.discourse-cdn.com/standard10"
          data-base-url="https://forum.stackstorm.com" data-base-uri="" data-environment="production"
          data-letter-avatar-version="5_8fec8e114563efeaf5265573e510f08e"
          data-markdown-it-url="https://aws1.discourse-cdn.com/standard10/assets/markdown-it-bundle-31e9a9c535ca1801c26da78b0ff465821751a98f921c5cdc5457d7e5a69e9748.js"
          data-service-worker-url="service-worker.js" data-default-locale="en"
          data-asset-version="597e36448c9b51d0fa3b7e43ec1fd6d5" data-disable-custom-css="false"
          data-highlight-js-path="/highlight-js/forum.stackstorm.com/ac0f4aa001e1343346941766d72e0c1ae330832b.js"
          data-svg-sprite-path="/svg-sprite/forum.stackstorm.com/svg-2-c2ad434b1e06079c7e282124aed9938dc95b83ea.js"
          data-enable-js-error-reporting="true" data-color-scheme-is-dark="false" data-user-dark-scheme-id="-1"
          data-s3-cdn="https://aws1.discourse-cdn.com/standard10"
          data-s3-base-url="//discourse-cloud-file-uploads.s3.dualstack.us-west-2.amazonaws.com/standard10">

    <meta name="discourse/config/environment"
          content="%7B%22modulePrefix%22%3A%22discourse%22%2C%22environment%22%3A%22production%22%2C%22rootURL%22%3A%22%22%2C%22locationType%22%3A%22auto%22%2C%22historySupportMiddleware%22%3Afalse%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%2C%22EXTEND_PROTOTYPES%22%3A%7B%22Date%22%3Afalse%7D%2C%22_APPLICATION_TEMPLATE_WRAPPER%22%3Afalse%2C%22_DEFAULT_ASYNC_OBSERVERS%22%3Atrue%2C%22_JQUERY_INTEGRATION%22%3Atrue%7D%2C%22APP%22%3A%7B%22name%22%3A%22discourse%22%2C%22version%22%3A%222.8.0.beta6%20a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787%22%2C%22exportApplicationGlobal%22%3Atrue%7D%7D"/>
</head>

<body class="">


<header class="d-header">
    <div class="wrap">
        <div class="contents clearfix">
            <div class="title">
                <a href="../../index.html">
                    <picture>
                        <img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png"
                             alt="StackStorm Support (ARCHIVED)" id="site-logo"/>
                    </picture>
                </a>
            </div>

        </div>
    </div>
</header>

<div id="main-outlet" class="wrap" role="main">
    <!-- preload-content: -->

    <!-- EOF START -->
    <div class="container" id="main-container">
        <div id="ember11" class="ember-view"></div>
        <div id="ember12" class="controls ember-view"><!----></div>
        <div id="ember13" class="ember-view"><!----></div>
        <div id="ember14" class="ember-view">
            <div class="row">
                <div id="global-notice-alert-read-only" class="alert alert-info alert-read-only">
                    <!----> <span class="text">This site is in read only mode. Please continue to browse, but replying, likes, and other actions are disabled for now.</span>

                    <!---->    </div>
            </div>
            <div class="row">
                <div id="global-notice-alert-global-notice" class="alert alert-info alert-global-notice">
                    <!----> <span class="text"><h3>‚ö†Ô∏è We've moved!</h3>  <p> Hi there!<br><br> To reduce project dependency on 3rd party paid services the StackStorm TSC has decided to move the Q/A from this forum to <a
                        href="https://github.com/StackStorm/st2/discussions">Github Discussions</a>. This will make user experience better integrated with the native Github flow, as well as the questions closer to the community where they can provide answers. </p>  <p> Use üîó <b><a
                        href="https://github.com/StackStorm/st2/discussions" class="active">Github Discussions</a></b> to ask your questions. </p></span>

                    <!---->    </div>
            </div>
        </div>
        <div id="ember17" class="hidden create-topics-notice ember-view"><!----></div>
        <!---->
    </div>
    <!-- EOF END -->
    <div id="topic-title">
        <h1>
            <a href="243.html">401 Unauthorized error chatops with hubot-stackstrom plugin</a>
        </h1>

        <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/chatops-related-issues/9" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Chatops</span>
              </span>
            </a>
            <meta itemprop="position" content="1"/>
          </span>
        </div>

        <div class="topic-category">
            <div class='discourse-tags list-tags'>
                <a href='../../tag/api' class='discourse-tag' rel="tag">api</a>
            </div>
        </div>
    </div>


    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/Dilip'><span itemprop='name'>Dilip</span></a>
            (DILIP JETTY)
          </span>

            <link itemprop="mainEntityOfPage" href="243.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-07-30T02:46:06Z' class='post-time'>
                July 30, 2018,  2:46am
              </time>
              <meta itemprop='dateModified' content='2018-07-30T02:46:06Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>I tried starting hubot with hubot-stackstrom adaptor, resulted in 401 unauthorized error even though i
                generated new API key</p>
            <p>[root myhubot]# bin/hubot<br>
                Dilipkumarvarma&gt; INFO Using ST2_API_KEY as authentication. Expiry will lead to bot exit.<br>
                WARNING No supported formatter found for shell. Using DefaultFormatter.<br>
                WARNING No post handler found for shell. Using DefaultFormatter.<br>
                INFO Loading commands‚Ä¶<br>
                INFO hubot-redis-brain: Using default redis on localhost:6379<br>
                INFO hubot-redis-brain: Data for hubot brain retrieved from Redis<br>
                ERROR Failed to retrieve commands from ‚Äú<a href="https://127.0.0.1:443/api" rel="nofollow noopener">https://127.0.0.1:443/api</a>‚Äù:
                Unauthorized - ApiKey with
                key_hash=3b5c98ecff5214dc7707bd882d0b433d5b96d976bef209ad8edc6a932c607b6e5eaf0a66fe71c73d553ddf4bb8712c5062b9970051b639075b8ac53fd4122cca
                not found.<br>
                ERROR Stream error: Event { type: ‚Äòerror‚Äô, status: 401 }</p>
            <p>Thanks</p>
        </div>

        <meta itemprop='headline' content='401 Unauthorized error chatops with hubot-stackstrom plugin'>
        <meta itemprop='keywords' content='api'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/lhill'><span itemprop='name'>lhill</span></a>
            (Lindsay Hill)
          </span>

            <link itemprop="mainEntityOfPage" href="243.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-07-30T04:51:09Z' class='post-time'>
                July 30, 2018,  4:51am
              </time>
              <meta itemprop='dateModified' content='2018-07-30T04:51:09Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Try doing a simple CLI or API test to execute an action using the API key you generated. Does that
                work?</p>
        </div>

        <meta itemprop='headline' content='401 Unauthorized error chatops with hubot-stackstrom plugin'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/Dilip'><span itemprop='name'>Dilip</span></a>
            (DILIP JETTY)
          </span>

            <link itemprop="mainEntityOfPage" href="243.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-07-30T14:25:23Z' class='post-time'>
                July 30, 2018,  2:25pm
              </time>
              <meta itemprop='dateModified' content='2018-07-30T14:25:23Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>HI,</p>
            <p>I did basic checks like curl to API URL with newly generated API key, works fine, bit not from Hubot.<br>
                Hubot connects to Stackstrom but receives 401 error.</p>
            <p>Thanks</p>
        </div>

        <meta itemprop='headline' content='401 Unauthorized error chatops with hubot-stackstrom plugin'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/lhill'><span itemprop='name'>lhill</span></a>
            (Lindsay Hill)
          </span>

            <link itemprop="mainEntityOfPage" href="243.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-07-30T14:52:00Z' class='post-time'>
                July 30, 2018,  2:52pm
              </time>
              <meta itemprop='dateModified' content='2018-07-30T14:52:00Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Then check that you have correctly pasted the key into st2chatops.env.</p>
            <p>There‚Äôs no magic here - it‚Äôs using that key to make an HTTP call, exactly the same as if you use
                curl.</p>
            <p>Also check your RBAC configuration if you have that enabled.</p>
        </div>

        <meta itemprop='headline' content='401 Unauthorized error chatops with hubot-stackstrom plugin'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/Dilip'><span itemprop='name'>Dilip</span></a>
            (DILIP JETTY)
          </span>

            <link itemprop="mainEntityOfPage" href="243.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-07-30T15:32:36Z' class='post-time'>
                July 30, 2018,  3:32pm
              </time>
              <meta itemprop='dateModified' content='2018-07-30T15:32:36Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Hi Lindsay,</p>
            <p>Thanks alot for the help, I am able to integrate Hubot with Stackstrom successfully and able to execute
                basic commands like st2 list actions.</p>
            <p>Issue is with API Key assigned with Auth token in Hubot.</p>
            <p>Next step is to integrate with Flowdock, will reach out to if i get into an issue.</p>
            <p>Thanks</p>
        </div>

        <meta itemprop='headline' content='401 Unauthorized error chatops with hubot-stackstrom plugin'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>


    <!-- :preload-content -->
    <footer class="noscript-footer-nav">
        <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='../../index.html'>Home</a>
            <a href="../../categories.html">Categories</a>
            <a href="https://forum.stackstorm.com/guidelines">FAQ/Guidelines</a>
            <a href="../../tos.html">Terms of Service</a>
            <a href="../../privacy.html">Privacy Policy</a>
        </nav>
    </footer>
</div>

<footer id='noscript-footer'>
    <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>


<section id='main'>
</section>


</body>
</html>
