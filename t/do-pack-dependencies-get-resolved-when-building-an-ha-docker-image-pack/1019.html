<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device text-size-normal anon">
<head>
    <meta charset="utf-8">
    <title>Do pack dependencies get resolved when building an HA docker image pack - Pack Management - StackStorm
        Support (ARCHIVED)</title>
    <meta name="description" content="This is not about python dependencies, it‚Äôs about st2 pack dependencies. 
I ran the following docker build passing in a ‚Äòstackstorm-ms‚Äô pack which I think (not sure, but according to the contents of the pack.yml) defines&amp;hellip;">
    <meta name="discourse_theme_id" content="2">
    <meta name="discourse_current_homepage" content="latest">
    <meta name="generator"
          content="Discourse 2.8.0.beta6 - https://github.com/discourse/discourse version a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787">
    <link rel="icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_32x32.PNG">
    <link rel="apple-touch-icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_180x180.PNG">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <link rel="canonical" href="1019.html"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://forum.stackstorm.com",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://forum.stackstorm.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml"
          title="StackStorm Support (ARCHIVED) Search">


    <link href="/../../stylesheets/color_definitions_base__2_3c5eec1ecf192052ea70b4afdab57a62bccc0604.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" class="light-scheme"/>

    <link href="/../../stylesheets/desktop_b2f2968742d41481357e0df259b51ce29f72481a.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" data-target="desktop"/>


    <meta name="fragment" content="!">


    <link id="manifest-link" rel="manifest" href="../../manifest.webmanifest" crossorigin="use-credentials">


    <link rel="alternate" type="application/rss+xml"
          title="RSS feed of &#39;Do pack dependencies get resolved when building an HA docker image pack&#39;"
          href="1019.rss"/>
    <meta property="og:site_name" content="StackStorm Support (ARCHIVED)"/>
    <meta property="og:type" content="website"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:url"
          content="https://forum.stackstorm.com/t/do-pack-dependencies-get-resolved-when-building-an-ha-docker-image-pack/1019"/>
    <meta name="twitter:url"
          content="https://forum.stackstorm.com/t/do-pack-dependencies-get-resolved-when-building-an-ha-docker-image-pack/1019"/>
    <meta property="og:title" content="Do pack dependencies get resolved when building an HA docker image pack"/>
    <meta name="twitter:title" content="Do pack dependencies get resolved when building an HA docker image pack"/>
    <meta property="og:description"
          content="This is not about python dependencies, it‚Äôs about st2 pack dependencies.  I ran the following docker build passing in a ‚Äòstackstorm-ms‚Äô pack which I think (not sure, but according to the contents of the pack.yml) defines dependencies on excel and powerpoint st2 packs.  If I were to do a regular st2 pack install, is it the case that any packs that are declared as dependencies in the pack.yml should be automatically resolved and installed? i.e. I should see excel and powerpoint packs installed in ..."/>
    <meta name="twitter:description"
          content="This is not about python dependencies, it‚Äôs about st2 pack dependencies.  I ran the following docker build passing in a ‚Äòstackstorm-ms‚Äô pack which I think (not sure, but according to the contents of the pack.yml) defines dependencies on excel and powerpoint st2 packs.  If I were to do a regular st2 pack install, is it the case that any packs that are declared as dependencies in the pack.yml should be automatically resolved and installed? i.e. I should see excel and powerpoint packs installed in ..."/>
    <meta name="twitter:label1" value="Reading time"/>
    <meta name="twitter:data1" value="3 mins üïë"/>
    <meta name="twitter:label2" value="Likes"/>
    <meta name="twitter:data2" value="1 ‚ù§"/>
    <meta property="article:published_time" content="2020-01-28T11:40:58+00:00"/>
    <meta property="og:ignore_canonical" content="true"/>


    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "QAPage",
        "name": "Do pack dependencies get resolved when building an HA docker image pack",
        "mainEntity": {
            "@type": "Question",
            "name": "Do pack dependencies get resolved when building an HA docker image pack",
            "text": "This is not about python dependencies, it‚Äôs about st2 pack dependencies.\n\nI ran the following docker build passing in a ‚Äòstackstorm-ms‚Äô pack which I think (not sure, but according to the contents of the pack.yml) defines dependencies on excel and powerpoint st2 packs.\n\nIf I were to do a regular st2 &hellip;",
            "upvoteCount": 0,
            "answerCount": 0,
            "dateCreated": "2020-01-28T11:40:58.634Z",
            "author": {
                "@type": "Person",
                "name": "Daniel Burrell"
            }
        }
    }
    </script>

    <meta id="data-discourse-setup" data-cdn="https://sjc6.discourse-cdn.com/standard10"
          data-base-url="https://forum.stackstorm.com" data-base-uri="" data-environment="production"
          data-letter-avatar-version="5_8fec8e114563efeaf5265573e510f08e"
          data-markdown-it-url="https://aws1.discourse-cdn.com/standard10/assets/markdown-it-bundle-31e9a9c535ca1801c26da78b0ff465821751a98f921c5cdc5457d7e5a69e9748.js"
          data-service-worker-url="service-worker.js" data-default-locale="en"
          data-asset-version="597e36448c9b51d0fa3b7e43ec1fd6d5" data-disable-custom-css="false"
          data-highlight-js-path="/highlight-js/forum.stackstorm.com/ac0f4aa001e1343346941766d72e0c1ae330832b.js"
          data-svg-sprite-path="/svg-sprite/forum.stackstorm.com/svg-2-c2ad434b1e06079c7e282124aed9938dc95b83ea.js"
          data-enable-js-error-reporting="true" data-color-scheme-is-dark="false" data-user-dark-scheme-id="-1"
          data-s3-cdn="https://aws1.discourse-cdn.com/standard10"
          data-s3-base-url="//discourse-cloud-file-uploads.s3.dualstack.us-west-2.amazonaws.com/standard10">

    <meta name="discourse/config/environment"
          content="%7B%22modulePrefix%22%3A%22discourse%22%2C%22environment%22%3A%22production%22%2C%22rootURL%22%3A%22%22%2C%22locationType%22%3A%22auto%22%2C%22historySupportMiddleware%22%3Afalse%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%2C%22EXTEND_PROTOTYPES%22%3A%7B%22Date%22%3Afalse%7D%2C%22_APPLICATION_TEMPLATE_WRAPPER%22%3Afalse%2C%22_DEFAULT_ASYNC_OBSERVERS%22%3Atrue%2C%22_JQUERY_INTEGRATION%22%3Atrue%7D%2C%22APP%22%3A%7B%22name%22%3A%22discourse%22%2C%22version%22%3A%222.8.0.beta6%20a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787%22%2C%22exportApplicationGlobal%22%3Atrue%7D%7D"/>
</head>

<body class="">


<header class="d-header">
    <div class="wrap">
        <div class="contents clearfix">
            <div class="title">
                <a href="../../index.html">
                    <picture>
                        <img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png"
                             alt="StackStorm Support (ARCHIVED)" id="site-logo"/>
                    </picture>
                </a>
            </div>

        </div>
    </div>
</header>

<div id="main-outlet" class="wrap" role="main">
    <!-- preload-content: -->

    <!-- EOF START -->
    <div class="container" id="main-container">
        <div id="ember11" class="ember-view"></div>
        <div id="ember12" class="controls ember-view"><!----></div>
        <div id="ember13" class="ember-view"><!----></div>
        <div id="ember14" class="ember-view">
            <div class="row">
                <div id="global-notice-alert-read-only" class="alert alert-info alert-read-only">
                    <!----> <span class="text">This site is in read only mode. Please continue to browse, but replying, likes, and other actions are disabled for now.</span>

                    <!---->    </div>
            </div>
            <div class="row">
                <div id="global-notice-alert-global-notice" class="alert alert-info alert-global-notice">
                    <!----> <span class="text"><h3>‚ö†Ô∏è We've moved!</h3>  <p> Hi there!<br><br> To reduce project dependency on 3rd party paid services the StackStorm TSC has decided to move the Q/A from this forum to <a
                        href="https://github.com/StackStorm/st2/discussions">Github Discussions</a>. This will make user experience better integrated with the native Github flow, as well as the questions closer to the community where they can provide answers. </p>  <p> Use üîó <b><a
                        href="https://github.com/StackStorm/st2/discussions" class="active">Github Discussions</a></b> to ask your questions. </p></span>

                    <!---->    </div>
            </div>
        </div>
        <div id="ember17" class="hidden create-topics-notice ember-view"><!----></div>
        <!---->
    </div>
    <!-- EOF END -->
    <div id="topic-title">
        <h1>
            <a href="1019.html">Do pack dependencies get resolved when building an HA docker image pack</a>
        </h1>

        <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/core-st2-platform-issues/6" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Platform</span>
              </span>
            </a>
            <meta itemprop="position" content="1"/>
          </span>
            <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/core-st2-platform-issues/pack-management-issues/12" class="badge-wrapper bullet"
               itemprop="item">
              <span class='badge-category-bg' style='background-color: #BF1E2E'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Pack Management</span>
              </span>
            </a>
            <meta itemprop="position" content="2"/>
          </span>
        </div>

        <div class="topic-category">
            <div class='discourse-tags list-tags'>
                <a href='../../tag/packs' class='discourse-tag' rel="tag">packs</a>,
                <a href='../../tag/docker' class='discourse-tag' rel="tag">docker</a>
            </div>
        </div>
    </div>


    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/dburrell'><span itemprop='name'>dburrell</span></a>
            (Daniel Burrell)
          </span>

            <link itemprop="mainEntityOfPage" href="1019.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-01-28T11:40:58Z' class='post-time'>
                January 28, 2020, 11:40am
              </time>
              <meta itemprop='dateModified' content='2020-02-11T11:39:11Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>This is not about python dependencies, it‚Äôs about st2 pack dependencies.</p>
            <p>I ran the following docker build passing in a ‚Äòstackstorm-ms‚Äô pack which I think (not sure, but according
                to the contents of the pack.yml) defines dependencies on excel and powerpoint st2 packs.<br>
                If I were to do a regular <code>st2 pack install</code>, is it the case that any packs that are declared
                as dependencies in the pack.yml should be automatically resolved and installed? i.e. I should see excel
                and powerpoint packs installed in this case?</p>
            <p>If so, shouldn‚Äôt it be the case that the st2-pack-install should also resolve dependencies (when building
                a docker HA image)?</p>
            <p>In the following attempt to load custom packs I don‚Äôt see any mention of excel or powerpoint in this
                image (should I?)</p>
            <pre><code class="lang-auto">chatops         core            default         linux           microsoft_test  packs
</code></pre>
            <pre><code class="lang-auto">Sending build context to Docker daemon  4.608kB
Step 1/3 : FROM stackstorm/st2packs:builder AS builder
# Executing 2 build triggers
 ---&gt; Using cache
 ---&gt; Running in e36e2043b5c8
Removing intermediate container e36e2043b5c8
 ---&gt; a62b82d23bc8
Step 2/3 : RUN /opt/stackstorm/st2/bin/st2-pack-install ${PACKS}
 ---&gt; Running in c90915fa197d
2020-01-28 11:28:47,101 INFO [-] Installing pack "https://github.com/StackStorm/stackstorm-ms.git"
2020-01-28 11:28:51,997 INFO [-] Successfully installed pack "microsoft_test"
2020-01-28 11:28:51,997 INFO [-] Setting up virtualenv for pack "microsoft_test"
2020-01-28 11:28:51,999 INFO [-] Virtualenv path "/opt/stackstorm/virtualenvs/microsoft_test" doesn't exist
2020-01-28 11:28:54,079 INFO [-] Successfully set up virtualenv for pack "microsoft_test"
Removing intermediate container c90915fa197d
 ---&gt; 89063e628a5e
Step 3/3 : FROM stackstorm/st2packs:runtime
# Executing 3 build triggers
 ---&gt; Using cache
 ---&gt; bc098cda997a
Successfully built bc098cda997a
Successfully tagged st2packs:latest
</code></pre>
            <p>Assuming there‚Äôs no dependency resolution. Is there a way I can evaluate the set of packs I require while
                online? (I can then pass this directly to the image). I can write something to check the dependencies
                section and resolve it manually, but i‚Äôd rather not reinvent the wheel, if there‚Äôs something already
                available or if there‚Äôs a way to make use of the existing st2 pack resolving mechanism i‚Äôd rather use
                that.</p>
        </div>

        <meta itemprop='headline' content='Do pack dependencies get resolved when building an HA docker image pack'>
        <meta itemprop='keywords' content='packs, docker'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/armab'><span itemprop='name'>armab</span></a>
            (Eugen Cusmaunsa)
          </span>

            <link itemprop="mainEntityOfPage" href="1019.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-11T11:38:39Z' class='post-time'>
                February 11, 2020, 11:38am
              </time>
              <meta itemprop='dateModified' content='2020-02-11T11:38:39Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Based on PR you contributed <a href="https://github.com/StackStorm/st2packs-dockerfiles/pull/17"
                                              class="inline-onebox">Upgrading st2:3.0dev to st2:3.2dev by danielburrell
                ¬∑ Pull Request #17 ¬∑ StackStorm/st2packs-dockerfiles ¬∑ GitHub</a> <code>stackstorm/st2packs</code>
                Docker image is now relying on st2 <code>3.2dev</code> which includes this updated functionality.</p>
            <p>Not sure if new pack dependency feature was tested with the minimal docker <code>st2-pack-install</code>
                script. Please let me know if that works as expected or not.</p>
        </div>

        <meta itemprop='headline' content='Do pack dependencies get resolved when building an HA docker image pack'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/dburrell'><span itemprop='name'>dburrell</span></a>
            (Daniel Burrell)
          </span>

            <link itemprop="mainEntityOfPage" href="1019.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-11T16:51:35Z' class='post-time'>
                February 11, 2020,  4:51pm
              </time>
              <meta itemprop='dateModified' content='2020-02-11T17:16:46Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Thanks</p>
            <p>It doesn‚Äôt seem to work as expected. It would be good to know what the basis for resolving dependencies
                is.</p>
            <p>To confirm is the following true:</p>
            <ul>
                <li>the pack.yaml drives the content of any index file.</li>
                <li>the index file is the authority on dependencies</li>
                <li>the ‚Äòversion‚Äô pulled in is by tag, and so the version in the pack.yaml that is tagged in git as
                    0.0.1 must be set to 0.0.1 also. (st2 will blindly pull the tag that matches the version in git).
                </li>
            </ul>
            <p>Dockerfile is here (uses a custom mst2.conf which is the same as the original except the [content].index
                is set to my custom index. Index is shown below.</p>
            <pre><code class="lang-auto">FROM stackstorm/st2packs:builder AS builder
RUN /opt/stackstorm/st2/bin/st2-pack-install -vv --config-file /mst2.conf ${PACKS}
FROM stackstorm/st2packs:runtime
</code></pre>
            <p>Here‚Äôs the images that are in my cache from that build (they match the digests for 3.2dev)</p>
            <pre><code class="lang-auto">stackstorm/st2packs                                                          runtime             sha256:dd340841edc2ce770a6c0fbac22e561319e65194f3a0648d27777dba76f6999e   d6946af13b61        5 hours ago         4.41MB
stackstorm/st2packs                                                          builder             sha256:a5c4641adff2e41ef72c23c793cba8962d2e2a594053b1657b6d56e449c7b4c2   824cd0e9de35        6 hours ago         540MB
</code></pre>
            <p>Here is the execution. Note it starts immediately with projecta (isn‚Äôt it supposed to start with the
                dependencies?)</p>
            <pre><code class="lang-auto">#packs
Step 12/13 : RUN /opt/stackstorm/st2/bin/st2-pack-install -vv --config-file /mst2.conf "${PACKS}"
 ---&gt; Running in ac8020ae36ae
2020-02-11 16:19:14,841 INFO [-] Installing pack "projecta=0.0.1"
2020-02-11 16:19:21,749 INFO [-] Successfully installed pack "projecta"
2020-02-11 16:19:21,750 INFO [-] Setting up virtualenv for pack "projecta"
2020-02-11 16:19:21,751 INFO [-] Virtualenv path "/opt/stackstorm/virtualenvs/projecta" doesn't exist
2020-02-11 16:19:24,661 INFO [-] Successfully set up virtualenv for pack "projecta"
</code></pre>
            <p>I have provided a custom index here</p>
            <pre><code class="lang-json">{
  "metadata" : {
    "generated_ts" : 1581371761034,
    "hash" : "beb6c5c7de3dabf56b593c0bfa7f882822f9e3e8847a1b9f6a311c2dab68d931"
  },
  "packs" : {
    "projecta" : {
      "author" : "Only Me",
      "content" : {
        "actions" : {
          "count" : 0,
          "resources" : [ ]
        },
        "tests" : {
          "count" : 0,
          "resources" : [ ]
        }
      },
      "description" : "Company MaskedA automation",
      "email" : "itsme@mycompany.com",
      "keywords" : [ "projecta" ],
      "name" : "MaskedA",
      "ref" : "projecta",
      "repo_url" : "git@wheyooo.com:superproject/automation-packs/projecta.git",
      "version" : "0.0.1",
      "versions" : [ "0.0.1" ],
      "dependencies" : [ "projectb=0.0.1" ]
    },
    "projectb" : {
      "author" : "Only Me",
      "content" : {
        "actions" : {
          "count" : 0,
          "resources" : [ ]
        },
        "tests" : {
          "count" : 0,
          "resources" : [ ]
        }
      },
      "description" : "Company Masked Pack",
      "email" : "itsme@mycompany.com",
      "keywords" : [ "projectb" ],
      "name" : "Masked",
      "ref" : "projectb",
      "repo_url" : "git@wheyooo.com:superproject/integration-packs/prefix-projectb.git",
      "version" : "0.0.1",
      "versions" : [ "0.0.1" ]
    }
  }
}
</code></pre>
            <p>The projecta and projectb both consist of single pack.yaml file. in projecta, the file also expresses a
                dependency on projectb. both are versioned at 0.0.1 and both have a tag at 0.0.1</p>
            <p>Expected behaviour would be that on completion, both projecta and projectb are installed having only
                specified projecta needs to be installed since projecta depends on projectb in the pack.yaml</p>
            <p>Here‚Äôs projecta pack.yaml</p>
            <pre><code class="lang-auto">---
ref: projecta
name: ProjectA
description: Company ProjectA automation
keywords:
  - projecta
version: 0.0.1
author: Its Me
email: myemail@masked.com
dependencies:
  - projectb=0.0.1
</code></pre>
        </div>

        <meta itemprop='headline' content='Do pack dependencies get resolved when building an HA docker image pack'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/armab'><span itemprop='name'>armab</span></a>
            (Eugen Cusmaunsa)
          </span>

            <link itemprop="mainEntityOfPage" href="1019.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-13T17:30:26Z' class='post-time'>
                February 13, 2020,  5:30pm
              </time>
              <meta itemprop='dateModified' content='2020-02-13T17:30:26Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>To simplify this case and instead of creating your own StackStorm Exchange index, try to install the
                following pack <code>https://github.com/StackStorm/stackstorm-ms.git</code>. It has 2 dependencies in
                its pack metadata.</p>
            <p>If it‚Äôs not working as expected, please report a bug in <code>stackstorm/st2</code> repository. It could
                be an oversight to take into account <code>st2-pack-install</code> during the pack dependencies feature
                development.<br>
                Thanks!</p>
        </div>

        <meta itemprop='headline' content='Do pack dependencies get resolved when building an HA docker image pack'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/dburrell'><span itemprop='name'>dburrell</span></a>
            (Daniel Burrell)
          </span>

            <link itemprop="mainEntityOfPage" href="1019.html">

            <link itemprop="image"
                  href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/a7d03fee8f9fac42e454d958b4217bbf4563436b.jpeg">

            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-13T17:50:02Z' class='post-time'>
                February 13, 2020,  5:50pm
              </time>
              <meta itemprop='dateModified' content='2020-02-13T17:59:32Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Thanks for providing a pack with a dependency. I couldn‚Äôt find one in the main index.</p>
            <p>Yep, I don‚Äôt see any of the dependencies being installed here</p>
            <pre><code class="lang-auto">Step 9/10 : RUN /opt/stackstorm/st2/bin/st2-pack-install -vv https://github.com/StackStorm/stackstorm-ms

 ---&gt; Running in 671389dc775e
2020-02-13 17:44:53,902 INFO [-] Installing pack "https://github.com/StackStorm/stackstorm-ms"
2020-02-13 17:44:53,903 DEBUG [-] Popen(['git', 'clone', '-v', 'https://github.com/StackStorm/stackstorm-ms', '/root/6622c8eb7209250c62980483f40577e2'], cwd=/opt/stackstorm, universal_newlines=True, shell=None)
2020-02-13 17:44:55,509 DEBUG [-] Cmd(['git', 'clone', '-v', 'https://github.com/StackStorm/stackstorm-ms', '/root/6622c8eb7209250c62980483f40577e2'])'s unused stdout: 
2020-02-13 17:44:55,518 DEBUG [-] Popen(['git', 'cat-file', '--batch-check'], cwd=/root/6622c8eb7209250c62980483f40577e2, universal_newlines=False, shell=None)
2020-02-13 17:44:56,256 DEBUG [-] Popen(['git', 'branch', '-a', '--contains', '25089933a452dedeb5aa145d6716c0187917b854'], cwd=/root/6622c8eb7209250c62980483f40577e2, universal_newlines=False, shell=None)
2020-02-13 17:44:56,906 DEBUG [-] Popen(['git', 'checkout', '25089933a452dedeb5aa145d6716c0187917b854'], cwd=/root/6622c8eb7209250c62980483f40577e2, universal_newlines=False, shell=None)
2020-02-13 17:44:57,545 DEBUG [-] Popen(['git', 'branch', '-f', 'master', '25089933a452dedeb5aa145d6716c0187917b854'], cwd=/root/6622c8eb7209250c62980483f40577e2, universal_newlines=False, shell=None)
2020-02-13 17:44:58,292 DEBUG [-] Popen(['git', 'checkout', 'master'], cwd=/root/6622c8eb7209250c62980483f40577e2, universal_newlines=False, shell=None)
2020-02-13 17:44:58,940 DEBUG [-] Moving pack from /root/6622c8eb7209250c62980483f40577e2 to /opt/stackstorm/packs.
2020-02-13 17:44:58,942 DEBUG [-] Changing owner group of "/opt/stackstorm/packs/microsoft_test" directory to st2packs
2020-02-13 17:44:58,942 DEBUG [-] Entering st2common.util.green.run_command.
2020-02-13 17:44:58,942 DEBUG [-] env argument not provided. using process env (os.environ).
2020-02-13 17:44:58,942 DEBUG [-] Creating subprocess.
2020-02-13 17:44:58,948 DEBUG [-] Spawning timeout handler thread.
2020-02-13 17:44:58,949 DEBUG [-] Attaching to process.
2020-02-13 17:44:58,949 DEBUG [-] Using delayed stdout and stderr read mode, calling process.communicate()
2020-02-13 17:44:58,949 DEBUG [-] Starting process wait inside timeout handler.
2020-02-13 17:44:58,963 DEBUG [-] No timeout.
2020-02-13 17:44:58,963 DEBUG [-] Returning.
2020-02-13 17:44:58,966 INFO [-] Successfully installed pack "microsoft_test"
2020-02-13 17:44:58,966 INFO [-] Setting up virtualenv for pack "microsoft_test"
2020-02-13 17:44:58,968 DEBUG [-] Setting up virtualenv for pack "microsoft_test" (/opt/stackstorm/packs/microsoft_test)
2020-02-13 17:44:58,968 INFO [-] Virtualenv path "/opt/stackstorm/virtualenvs/microsoft_test" doesn't exist
2020-02-13 17:44:58,969 DEBUG [-] Creating virtualenv for pack "microsoft_test" in "/opt/stackstorm/virtualenvs/microsoft_test"
2020-02-13 17:44:58,969 DEBUG [-] Creating virtualenv in "/opt/stackstorm/virtualenvs/microsoft_test" using Python binary "/opt/stackstorm/st2/bin/python"
2020-02-13 17:44:58,969 DEBUG [-] Running command "/opt/stackstorm/st2/bin/virtualenv -p /opt/stackstorm/st2/bin/python --always-copy --no-download /opt/stackstorm/virtualenvs/microsoft_test" to create virtualenv.
2020-02-13 17:45:01,563 DEBUG [-] Installing base requirements
2020-02-13 17:45:01,563 DEBUG [-] Installing requirement six&gt;=1.9.0,&lt;2.0 with command /opt/stackstorm/virtualenvs/microsoft_test/bin/pip install six&gt;=1.9.0,&lt;2.0.
2020-02-13 17:45:02,018 DEBUG [-] No pack specific requirements found
2020-02-13 17:45:02,018 DEBUG [-] Changing owner group of "/opt/stackstorm/virtualenvs/microsoft_test" directory to st2packs
2020-02-13 17:45:02,018 DEBUG [-] Entering st2common.util.green.run_command.
2020-02-13 17:45:02,019 DEBUG [-] env argument not provided. using process env (os.environ).
2020-02-13 17:45:02,019 DEBUG [-] Creating subprocess.
2020-02-13 17:45:02,022 DEBUG [-] Spawning timeout handler thread.
2020-02-13 17:45:02,022 DEBUG [-] Attaching to process.
2020-02-13 17:45:02,022 DEBUG [-] Using delayed stdout and stderr read mode, calling process.communicate()
2020-02-13 17:45:02,022 DEBUG [-] Starting process wait inside timeout handler.
2020-02-13 17:45:02,044 DEBUG [-] No timeout.
2020-02-13 17:45:02,044 DEBUG [-] Returning.
2020-02-13 17:45:02,044 DEBUG [-] Virtualenv for pack "microsoft_test" successfully created in "/opt/stackstorm/virtualenvs/microsoft_test"
2020-02-13 17:45:02,044 INFO [-] Successfully set up virtualenv for pack "microsoft_test"
</code></pre>
            <p>Bug raised</p>
            <aside class="onebox githubissue">
                <header class="source">
                    <a href="https://github.com/StackStorm/st2/issues/4867" target="_blank" rel="nofollow noopener">github.com/StackStorm/st2</a>
                </header>
                <article class="onebox-body">
                    <div class="github-row">
                        <div class="github-icon-container" title="Issue">
                            <svg width="60" height="60" class="github-icon" viewbox="0 0 14 16" aria-hidden="true">
                                <path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path>
                            </svg>
                        </div>

                        <div class="github-info-container">
                            <h4>
                                <a href="https://github.com/StackStorm/st2/issues/4867" target="_blank"
                                   rel="nofollow noopener">St2 Pack Dependencies Not Resolved in HA builds via
                                    st2-pack-installed</a>
                            </h4>

                            <div class="github-info">
                                <div class="date">
                                    opened <span class="discourse-local-date" data-format="ll" data-date="2020-02-13"
                                                 data-time="17:58:44" data-timezone="UTC">05:58PM - 13 Feb 20 UTC</span>
                                </div>


                                <div class="user">
                                    <a href="https://github.com/danielburrell" target="_blank" rel="nofollow noopener">
                                        <img alt="danielburrell"
                                             src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/a7d03fee8f9fac42e454d958b4217bbf4563436b.jpeg"
                                             class="onebox-avatar-inline" width="20" height="20">
                                        danielburrell
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="github-row">
                        <p class="github-content">SUMMARY
                            The dependency resolution system between stackstorm packs (not python dependencies) which
                            was recently implemented in 3.2 does not function when trying...</p>
                    </div>

                    <div class="labels">
                    </div>

                </article>
                <div class="onebox-metadata">


                </div>
                <div style="clear: both"></div>
            </aside>

        </div>

        <meta itemprop='headline' content='Do pack dependencies get resolved when building an HA docker image pack'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
            <span class='post-likes'>1 Like</span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>


    <!-- :preload-content -->
    <footer class="noscript-footer-nav">
        <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='../../index.html'>Home</a>
            <a href="../../categories.html">Categories</a>
            <a href="https://forum.stackstorm.com/guidelines">FAQ/Guidelines</a>
            <a href="../../tos.html">Terms of Service</a>
            <a href="../../privacy.html">Privacy Policy</a>
        </nav>
    </footer>
</div>

<footer id='noscript-footer'>
    <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>


<section id='main'>
</section>


</body>
</html>
