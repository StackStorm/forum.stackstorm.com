<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device text-size-normal anon">
<head>
    <meta charset="utf-8">
    <title>HA failover with st2sensorcontainer and sensor partitioning - StackStorm Support (ARCHIVED)</title>
    <meta name="description"
          content="In a similar vein to this question: in an HA setup, how would you tell the st2sensorcontainer to fail over to the other node in the event of a failover? Or, say I partition my sensors using hash, then one of my nodes goe&amp;hellip;">
    <meta name="discourse_theme_id" content="2">
    <meta name="discourse_current_homepage" content="latest">
    <meta name="generator"
          content="Discourse 2.8.0.beta6 - https://github.com/discourse/discourse version a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787">
    <link rel="icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_32x32.PNG">
    <link rel="apple-touch-icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_180x180.PNG">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <link rel="canonical" href="257.html"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://forum.stackstorm.com",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://forum.stackstorm.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml"
          title="StackStorm Support (ARCHIVED) Search">


    <link href="/../../stylesheets/color_definitions_base__2_3c5eec1ecf192052ea70b4afdab57a62bccc0604.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" class="light-scheme"/>

    <link href="/../../stylesheets/desktop_b2f2968742d41481357e0df259b51ce29f72481a.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" data-target="desktop"/>


    <meta name="fragment" content="!">


    <link id="manifest-link" rel="manifest" href="../../manifest.webmanifest" crossorigin="use-credentials">


    <link rel="alternate" type="application/rss+xml"
          title="RSS feed of &#39;HA failover with st2sensorcontainer and sensor partitioning&#39;"
          href="https://forum.stackstorm.com/t/ha-failover-with-st2sensorcontainer-and-sensor-partitioning/257.rss"/>
    <meta property="og:site_name" content="StackStorm Support (ARCHIVED)"/>
    <meta property="og:type" content="website"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:url"
          content="https://forum.stackstorm.com/t/ha-failover-with-st2sensorcontainer-and-sensor-partitioning/257"/>
    <meta name="twitter:url"
          content="https://forum.stackstorm.com/t/ha-failover-with-st2sensorcontainer-and-sensor-partitioning/257"/>
    <meta property="og:title" content="HA failover with st2sensorcontainer and sensor partitioning"/>
    <meta name="twitter:title" content="HA failover with st2sensorcontainer and sensor partitioning"/>
    <meta property="og:description"
          content="In a similar vein to this question: in an HA setup, how would you tell the st2sensorcontainer to fail over to the other node in the event of a failover? Or, say I partition my sensors using hash, then one of my nodes goes down. How can I make sure the sensors all still run? How can you tell the st2sensorcontainer to fail over to a passive node from an active one when the first one goes down?"/>
    <meta name="twitter:description"
          content="In a similar vein to this question: in an HA setup, how would you tell the st2sensorcontainer to fail over to the other node in the event of a failover? Or, say I partition my sensors using hash, then one of my nodes goes down. How can I make sure the sensors all still run? How can you tell the st2sensorcontainer to fail over to a passive node from an active one when the first one goes down?"/>
    <meta name="twitter:label1" value="Reading time"/>
    <meta name="twitter:data1" value="1 mins üïë"/>
    <meta name="twitter:label2" value="Likes"/>
    <meta name="twitter:data2" value="4 ‚ù§"/>
    <meta property="article:published_time" content="2018-08-08T20:53:48+00:00"/>
    <meta property="og:ignore_canonical" content="true"/>


    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "QAPage",
        "name": "HA failover with st2sensorcontainer and sensor partitioning",
        "mainEntity": {
            "@type": "Question",
            "name": "HA failover with st2sensorcontainer and sensor partitioning",
            "text": "In a similar vein to <a href="
            https://forum.stackstorm.com/t/ha-failover-with-st2sensorcontainer-and-sensor-partitioning/\&quot;https://forum.stackstorm.com/t/do-we-support-multiple-replicas-for-st2sensorcontainer-st2rulesengine-in-kubernetes-1ppc-mode/116\&quot;">this question<\/a>: in an HA setup, how would you tell the st2sensorcontainer to fail over to the other node in the event of a failover? Or, say I partition my sensors using hash, then one of my nodes goes down. How can I make sure the sensors all still run? How can you tell the st2s&hellip;","upvoteCount":1,"answerCount":0,"dateCreated":"2018-08-08T20:53:48.831Z","author":{"@type":"Person","name":"Daniel Jay Haskin"}}}
    </script>

    <meta id="data-discourse-setup" data-cdn="https://sjc6.discourse-cdn.com/standard10"
          data-base-url="https://forum.stackstorm.com" data-base-uri="" data-environment="production"
          data-letter-avatar-version="5_8fec8e114563efeaf5265573e510f08e"
          data-markdown-it-url="https://aws1.discourse-cdn.com/standard10/assets/markdown-it-bundle-31e9a9c535ca1801c26da78b0ff465821751a98f921c5cdc5457d7e5a69e9748.js"
          data-service-worker-url="service-worker.js" data-default-locale="en"
          data-asset-version="597e36448c9b51d0fa3b7e43ec1fd6d5" data-disable-custom-css="false"
          data-highlight-js-path="/highlight-js/forum.stackstorm.com/ac0f4aa001e1343346941766d72e0c1ae330832b.js"
          data-svg-sprite-path="/svg-sprite/forum.stackstorm.com/svg-2-c2ad434b1e06079c7e282124aed9938dc95b83ea.js"
          data-enable-js-error-reporting="true" data-color-scheme-is-dark="false" data-user-dark-scheme-id="-1"
          data-s3-cdn="https://aws1.discourse-cdn.com/standard10"
          data-s3-base-url="//discourse-cloud-file-uploads.s3.dualstack.us-west-2.amazonaws.com/standard10">

    <meta name="discourse/config/environment"
          content="%7B%22modulePrefix%22%3A%22discourse%22%2C%22environment%22%3A%22production%22%2C%22rootURL%22%3A%22%22%2C%22locationType%22%3A%22auto%22%2C%22historySupportMiddleware%22%3Afalse%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%2C%22EXTEND_PROTOTYPES%22%3A%7B%22Date%22%3Afalse%7D%2C%22_APPLICATION_TEMPLATE_WRAPPER%22%3Afalse%2C%22_DEFAULT_ASYNC_OBSERVERS%22%3Atrue%2C%22_JQUERY_INTEGRATION%22%3Atrue%7D%2C%22APP%22%3A%7B%22name%22%3A%22discourse%22%2C%22version%22%3A%222.8.0.beta6%20a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787%22%2C%22exportApplicationGlobal%22%3Atrue%7D%7D"/>
</head>

<body class="">


<header class="d-header">
    <div class="wrap">
        <div class="contents clearfix">
            <div class="title">
                <a href="../../index.html">
                    <picture>
                        <img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png"
                             alt="StackStorm Support (ARCHIVED)" id="site-logo"/>
                    </picture>
                </a>
            </div>

        </div>
    </div>
</header>

<div id="main-outlet" class="wrap" role="main">
    <!-- preload-content: -->

    <!-- EOF START -->
    <div class="container" id="main-container">
        <div id="ember11" class="ember-view"></div>
        <div id="ember12" class="controls ember-view"><!----></div>
        <div id="ember13" class="ember-view"><!----></div>
        <div id="ember14" class="ember-view">
            <div class="row">
                <div id="global-notice-alert-read-only" class="alert alert-info alert-read-only">
                    <!----> <span class="text">This site is in read only mode. Please continue to browse, but replying, likes, and other actions are disabled for now.</span>

                    <!---->    </div>
            </div>
            <div class="row">
                <div id="global-notice-alert-global-notice" class="alert alert-info alert-global-notice">
                    <!----> <span class="text"><h3>‚ö†Ô∏è We've moved!</h3>  <p> Hi there!<br><br> To reduce project dependency on 3rd party paid services the StackStorm TSC has decided to move the Q/A from this forum to <a
                        href="https://github.com/StackStorm/st2/discussions">Github Discussions</a>. This will make user experience better integrated with the native Github flow, as well as the questions closer to the community where they can provide answers. </p>  <p> Use üîó <b><a
                        href="https://github.com/StackStorm/st2/discussions" class="active">Github Discussions</a></b> to ask your questions. </p></span>

                    <!---->    </div>
            </div>
        </div>
        <div id="ember17" class="hidden create-topics-notice ember-view"><!----></div>
        <!---->
    </div>
    <!-- EOF END -->
    <div id="topic-title">
        <h1>
            <a href="257.html">HA failover with st2sensorcontainer and sensor partitioning</a>
        </h1>


    </div>


    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/djhaskin987'><span itemprop='name'>djhaskin987</span></a>
            (Daniel Jay Haskin)
          </span>

            <link itemprop="mainEntityOfPage" href="257.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-08T20:53:48Z' class='post-time'>
                August 8, 2018,  8:53pm
              </time>
              <meta itemprop='dateModified' content='2018-08-08T20:53:48Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>In a similar vein to <a
                    href="../do-we-support-multiple-replicas-for-st2sensorcontainer-st2rulesengine-in-kubernetes-1ppc-mode/116.html">this
                question</a>: in an HA setup, how would you tell the st2sensorcontainer to fail over to the other node
                in the event of a failover? Or, say I partition my sensors using hash, then one of my nodes goes down.
                How can I make sure the sensors all still run? How can you tell the st2sensorcontainer to fail over to a
                passive node from an active one when the first one goes down?</p>
        </div>

        <meta itemprop='headline' content='HA failover with st2sensorcontainer and sensor partitioning'>
        <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
            <span class='post-likes'>1 Like</span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/armab'><span itemprop='name'>armab</span></a>
            (Eugen Cusmaunsa)
          </span>

            <link itemprop="mainEntityOfPage" href="257.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-08T22:17:43Z' class='post-time'>
                August 8, 2018, 10:17pm
              </time>
              <meta itemprop='dateModified' content='2020-04-27T13:35:12Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>That‚Äôs an interesting topic.</p>
            <p>At the moment sensorcontainers can‚Äôt work in active/passive mode.<br>
                More than that, multiple sensors are forked in st2sensorcontainers service don‚Äôt recover on multiple
                consecutive failures which could be especially painful.<br>
                And so while there is Sensors Partitioning, there is no real Sensors HA guarantee, - you can‚Äôt run 2
                replicas. See: <a href="https://docs.stackstorm.com/latest/reference/ha.html#st2sensorcontainer"
                                  class="inline-onebox">High Availability Deployment ‚Äî StackStorm 3.2dev
                    documentation</a></p>
            <blockquote>
                <p>Or, say I partition my sensors using hash, then one of my nodes goes down.</p>
            </blockquote>
            <p>Yeah, this is a good, convenient and user-friendly option which I‚Äôd like too: having Sensors partitioned
                via hashring with HA capabilities (<a
                        href="https://docs.stackstorm.com/reference/sensor_partitioning.html#hash"
                        class="inline-onebox">Partitioning Sensors ‚Äî StackStorm 3.1.0 documentation</a>) and it‚Äôs
                something we‚Äôve discussed internally recently as a potential field to improve.<br>
                Sadly, according to <a class="mention" href="https://github.com/kami">@kami</a> and <a
                        class="mention" href="https://github.com/lakstorm">@lakstorm</a> it‚Äôs pretty
                complicated to do in StackStorm platform and would require leader election, gossip between sensor nodes
                and some event de-duplication.<br>
                We don‚Äôt have a solution for that yet, but have ideas to improve it in future releases.</p>
            <hr>
            <p>Alternative to that and pretty simple/practical improvement, we recently added ‚Äúsingle sensor per process
                mode‚Äù in <code>v2.8</code> <a href="https://github.com/StackStorm/st2/pull/4179" class="inline-onebox">Add
                    single sensor mode to the sensor container service / process by Kami ¬∑ Pull Request #4179 ¬∑
                    StackStorm/st2 ¬∑ GitHub</a>. It works like this:</p>
            <pre><code class="lang-auto">exec /opt/stackstorm/st2/bin/st2sensorcontainer \
  --config-file /etc/st2/st2.conf \
  --single-sensor-mode \
  --sensor-ref=githubwebhook.GitHubWebhookSensor
</code></pre>
            <p>and somewhat related to <a href="https://docs.stackstorm.com/reference/sensor_partitioning.html#file">file-based
                sensor partitioning</a>.<br>
                This at least solves problem of controlling ‚Äúwhat you want to run and where‚Äù for
                load-distribution/partitioning <em>and</em> ability to control recovery/restart specific sensors on
                failure based on monitoring layer from the user‚Äôs side, which was harder to do before due to forking
                nature of individual sensors in st2sensorcontainer (you had to restart entire service).<br>
                For example, with single sensor per container mode, Kubernetes can be that healing/failover/reschedule
                layer when the sensor goes down and so failed Pod is recovered by K8s automatically.</p>
            <p>That‚Äôs the option I would suggest to follow for better than default st2 sensors Availability.</p>
        </div>

        <meta itemprop='headline' content='HA failover with st2sensorcontainer and sensor partitioning'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
            <span class='post-likes'>1 Like</span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/djhaskin987'><span itemprop='name'>djhaskin987</span></a>
            (Daniel Jay Haskin)
          </span>

            <link itemprop="mainEntityOfPage" href="257.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-09T00:08:19Z' class='post-time'>
                August 9, 2018, 12:08am
              </time>
              <meta itemprop='dateModified' content='2018-08-09T16:08:50Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Well, thinking about it further, there‚Äôs really two types of sensors I‚Äôm interested in: webhooks and
                polling sensors.</p>
            <p>Say I have two vms load balanced in an active active setup with no partitioning; that is, both nodes run
                all sensors.</p>
            <p>If we are talking about webhooks, I am fine: a request to the webhooks will come in, get load balanced to
                one of the nodes, and that nodes‚Äô webhook sensor will fire a single trigger.</p>
            <p>It‚Äôs where we are talking about polling sensors that the issue arises. However, if all the polling
                sensors are written in house, they can be written to be ha aware pretty easily using stackstorm‚Äôs key
                value store as a place to put mutexes/locks to enable HA polling. Both sensors would try to obtain a
                lock. One wins the lock and conducts the poll. The other doesn‚Äôt and goes back to sleep.</p>
            <p>As all of the polling sensors I will use will likely be written in house, maybe it would be best to
                simply run the st2sensorcontainer on both nodes with no partitioning in an active/active setup. Would
                this work? Does my argument make sense?</p>
        </div>

        <meta itemprop='headline' content='HA failover with st2sensorcontainer and sensor partitioning'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/armab'><span itemprop='name'>armab</span></a>
            (Eugen Cusmaunsa)
          </span>

            <link itemprop="mainEntityOfPage" href="257.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-09T12:36:52Z' class='post-time'>
                August 9, 2018, 12:36pm
              </time>
              <meta itemprop='dateModified' content='2018-08-09T12:36:52Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Yes, absolutely.<br>
                If you have resources to build HA/failover implementation for every sensor itself to rely on some
                distributed locking primitives, - that would be a perfect approach.</p>
            <p>And what you‚Äôre saying is exactly stated in our recommendations <a
                    href="https://docs.stackstorm.com/latest/reference/ha.html#st2sensorcontainer:">High Availability
                Deployment ‚Äî StackStorm 2.9dev documentation</a></p>
            <blockquote>
                <p>Currently <code>st2sensorcontainer</code> processes do not form a cluster and distribute work or take
                    over new work if some nodes in the cluster disappear. It is possible for a sensor itself to be
                    implemented with HA in mind so that the same sensor can be deployed on multiple nodes with the
                    sensor managing active-active or active-passive.</p>
            </blockquote>
            <p>Of course, not all our users are capable to implement something like that and so we‚Äôll need some
                ‚Äúin-house‚Äù improvements to make sensors HA easier in future.</p>
        </div>

        <meta itemprop='headline' content='HA failover with st2sensorcontainer and sensor partitioning'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/djhaskin987'><span itemprop='name'>djhaskin987</span></a>
            (Daniel Jay Haskin)
          </span>

            <link itemprop="mainEntityOfPage" href="257.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-09T16:07:12Z' class='post-time'>
                August 9, 2018,  4:07pm
              </time>
              <meta itemprop='dateModified' content='2018-08-09T16:07:12Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Well I guess I‚Äôll mark this issue solved after this then, but I wanted to leave some parting
                thoughts.</p>
            <p>For our setup at least, sensor partitioning isn‚Äôt the best option because we have an active/active HA
                cluster, and I want webhooks to be available from either node.</p>
            <p>However, for polling sensors, I think the wish I‚Äôd want granted is that stackstorm obtains a lock from
                zookeeper or redis for me in the PollingSensor class (using the tooz library, as it already does for
                other problems). In fact, the core idea ‚Äì that of giving me a sensor class to work with that already
                obtains a lock ‚Äì is one which is totally useful and backwards compatible.</p>
            <p>Say for example that there was a LockingSensor and a PollingLockingSensor classes. Both sensors would
                start up, obtain a lock, and continue to renew the lock (in perhaps the case of the
                pollinglockingsensor). That would help me a lot because the lock needs to be obtained and held for the
                life of the sensor, and having a sensor class that I could just override that does that for me using
                current stackstorm infrastructure would really help. Perhaps I‚Äôll log a feature request <img
                        src="https://emoji.discourse-cdn.com/apple/slight_smile.png?v=5" title=":slight_smile:"
                        class="emoji" alt=":slight_smile:"></p>
        </div>

        <meta itemprop='headline' content='HA failover with st2sensorcontainer and sensor partitioning'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
            <span class='post-likes'>1 Like</span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/armab'><span itemprop='name'>armab</span></a>
            (Eugen Cusmaunsa)
          </span>

            <link itemprop="mainEntityOfPage" href="257.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-10T11:34:05Z' class='post-time'>
                August 10, 2018, 11:34am
              </time>
              <meta itemprop='dateModified' content='2018-08-10T11:34:05Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p><a class="mention" href="https://github.com/djhaskin987">@djhaskin987</a> Please do login the
                feature request, that idea with <code>LockingSensor</code> and <code>PollingLockingSensor</code> is
                really good.</p>
        </div>

        <meta itemprop='headline' content='HA failover with st2sensorcontainer and sensor partitioning'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/djhaskin987'><span itemprop='name'>djhaskin987</span></a>
            (Daniel Jay Haskin)
          </span>

            <link itemprop="mainEntityOfPage" href="257.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-08-10T15:51:29Z' class='post-time'>
                August 10, 2018,  3:51pm
              </time>
              <meta itemprop='dateModified' content='2018-08-10T15:51:29Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Done: <a href="https://github.com/StackStorm/st2/issues/4301" rel="nofollow noopener">Feature Request:
                `LockingPollingSensor` to make HA aware polling sensors ¬∑ Issue #4301 ¬∑ StackStorm/st2 ¬∑ GitHub</a></p>
        </div>

        <meta itemprop='headline' content='HA failover with st2sensorcontainer and sensor partitioning'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
            <span class='post-likes'>1 Like</span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>


    <!-- :preload-content -->
    <footer class="noscript-footer-nav">
        <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='../../index.html'>Home</a>
            <a href="../../categories.html">Categories</a>
            <a href="https://forum.stackstorm.com/guidelines">FAQ/Guidelines</a>
            <a href="../../tos.html">Terms of Service</a>
            <a href="../../privacy.html">Privacy Policy</a>
        </nav>
    </footer>
</div>

<footer id='noscript-footer'>
    <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>


<section id='main'>
</section>


</body>
</html>
