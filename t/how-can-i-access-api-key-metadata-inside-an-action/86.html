<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device text-size-normal anon">
<head>
    <meta charset="utf-8">
    <title>How can i access api key metadata inside an action - User Management - StackStorm Support (ARCHIVED)</title>
    <meta name="description" content="Is there any way I can access the API key metadata inside a python action?">
    <meta name="discourse_theme_id" content="2">
    <meta name="discourse_current_homepage" content="latest">
    <meta name="generator"
          content="Discourse 2.8.0.beta6 - https://github.com/discourse/discourse version a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787">
    <link rel="icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_32x32.PNG">
    <link rel="apple-touch-icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_180x180.PNG">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <link rel="canonical" href="86.html"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://forum.stackstorm.com",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://forum.stackstorm.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml"
          title="StackStorm Support (ARCHIVED) Search">


    <link href="/../../stylesheets/color_definitions_base__2_3c5eec1ecf192052ea70b4afdab57a62bccc0604.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" class="light-scheme"/>

    <link href="/../../stylesheets/desktop_b2f2968742d41481357e0df259b51ce29f72481a.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" data-target="desktop"/>


    <meta name="fragment" content="!">


    <link id="manifest-link" rel="manifest" href="../../manifest.webmanifest" crossorigin="use-credentials">


    <link rel="alternate" type="application/rss+xml"
          title="RSS feed of &#39;How can i access api key metadata inside an action&#39;"
          href="https://forum.stackstorm.com/t/how-can-i-access-api-key-metadata-inside-an-action/86.rss"/>
    <meta property="og:site_name" content="StackStorm Support (ARCHIVED)"/>
    <meta property="og:type" content="website"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:url"
          content="https://forum.stackstorm.com/t/how-can-i-access-api-key-metadata-inside-an-action/86"/>
    <meta name="twitter:url"
          content="https://forum.stackstorm.com/t/how-can-i-access-api-key-metadata-inside-an-action/86"/>
    <meta property="og:title" content="How can i access api key metadata inside an action"/>
    <meta name="twitter:title" content="How can i access api key metadata inside an action"/>
    <meta property="og:description"
          content="Is there any way I can access the API key metadata inside a python action?"/>
    <meta name="twitter:description"
          content="Is there any way I can access the API key metadata inside a python action?"/>
    <meta property="article:published_time" content="2018-03-15T12:18:12+00:00"/>
    <meta property="og:ignore_canonical" content="true"/>


    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "QAPage",
        "name": "How can i access api key metadata inside an action",
        "mainEntity": {
            "@type": "Question",
            "name": "How can i access api key metadata inside an action",
            "text": "Is there any way I can access the API key metadata inside a python action?",
            "upvoteCount": 0,
            "answerCount": 1,
            "dateCreated": "2018-03-15T12:18:12.317Z",
            "author": {
                "@type": "Person",
                "name": "Giorgos Karagkounis"
            },
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "Alternative is to use st2client py bindings, which again calls the beforementioned REST API.\n\nFollowing the <a href="
                https://forum.stackstorm.com/t/how-can-i-access-api-key-metadata-inside-an-action/\&quot;https://docs.stackstorm.com/datastore.html#storing-and-retrieving-via-python-client\"">Datastore ‚Äî StackStorm 2.6.0 documentation<\/a> analogy as a base example of using st2client:\n\n&gt;&gt;&gt; from st2client.client import Client\n\n&gt;&gt;&gt; client = Client(base_url=&#39;http://localhost&#39;, token=&#39;abcde1&hellip;","upvoteCount":0,"dateCreated":"2018-03-15T13:19:07.992Z","url":"https://forum.stackstorm.com/t/how-can-i-access-api-key-metadata-inside-an-action/86/5","author":{"@type":"Person","name":"armab"}}}}
    </script>

    <meta id="data-discourse-setup" data-cdn="https://sjc6.discourse-cdn.com/standard10"
          data-base-url="https://forum.stackstorm.com" data-base-uri="" data-environment="production"
          data-letter-avatar-version="5_8fec8e114563efeaf5265573e510f08e"
          data-markdown-it-url="https://aws1.discourse-cdn.com/standard10/assets/markdown-it-bundle-31e9a9c535ca1801c26da78b0ff465821751a98f921c5cdc5457d7e5a69e9748.js"
          data-service-worker-url="service-worker.js" data-default-locale="en"
          data-asset-version="597e36448c9b51d0fa3b7e43ec1fd6d5" data-disable-custom-css="false"
          data-highlight-js-path="/highlight-js/forum.stackstorm.com/ac0f4aa001e1343346941766d72e0c1ae330832b.js"
          data-svg-sprite-path="/svg-sprite/forum.stackstorm.com/svg-2-c2ad434b1e06079c7e282124aed9938dc95b83ea.js"
          data-enable-js-error-reporting="true" data-color-scheme-is-dark="false" data-user-dark-scheme-id="-1"
          data-s3-cdn="https://aws1.discourse-cdn.com/standard10"
          data-s3-base-url="//discourse-cloud-file-uploads.s3.dualstack.us-west-2.amazonaws.com/standard10">

    <meta name="discourse/config/environment"
          content="%7B%22modulePrefix%22%3A%22discourse%22%2C%22environment%22%3A%22production%22%2C%22rootURL%22%3A%22%22%2C%22locationType%22%3A%22auto%22%2C%22historySupportMiddleware%22%3Afalse%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%2C%22EXTEND_PROTOTYPES%22%3A%7B%22Date%22%3Afalse%7D%2C%22_APPLICATION_TEMPLATE_WRAPPER%22%3Afalse%2C%22_DEFAULT_ASYNC_OBSERVERS%22%3Atrue%2C%22_JQUERY_INTEGRATION%22%3Atrue%7D%2C%22APP%22%3A%7B%22name%22%3A%22discourse%22%2C%22version%22%3A%222.8.0.beta6%20a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787%22%2C%22exportApplicationGlobal%22%3Atrue%7D%7D"/>
</head>

<body class="">


<header class="d-header">
    <div class="wrap">
        <div class="contents clearfix">
            <div class="title">
                <a href="../../index.html">
                    <picture>
                        <img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png"
                             alt="StackStorm Support (ARCHIVED)" id="site-logo"/>
                    </picture>
                </a>
            </div>

        </div>
    </div>
</header>

<div id="main-outlet" class="wrap" role="main">
    <!-- preload-content: -->

    <!-- EOF START -->
    <div class="container" id="main-container">
        <div id="ember11" class="ember-view"></div>
        <div id="ember12" class="controls ember-view"><!----></div>
        <div id="ember13" class="ember-view"><!----></div>
        <div id="ember14" class="ember-view">
            <div class="row">
                <div id="global-notice-alert-read-only" class="alert alert-info alert-read-only">
                    <!----> <span class="text">This site is in read only mode. Please continue to browse, but replying, likes, and other actions are disabled for now.</span>

                    <!---->    </div>
            </div>
            <div class="row">
                <div id="global-notice-alert-global-notice" class="alert alert-info alert-global-notice">
                    <!----> <span class="text"><h3>‚ö†Ô∏è We've moved!</h3>  <p> Hi there!<br><br> To reduce project dependency on 3rd party paid services the StackStorm TSC has decided to move the Q/A from this forum to <a
                        href="https://github.com/StackStorm/st2/discussions">Github Discussions</a>. This will make user experience better integrated with the native Github flow, as well as the questions closer to the community where they can provide answers. </p>  <p> Use üîó <b><a
                        href="https://github.com/StackStorm/st2/discussions" class="active">Github Discussions</a></b> to ask your questions. </p></span>

                    <!---->    </div>
            </div>
        </div>
        <div id="ember17" class="hidden create-topics-notice ember-view"><!----></div>
        <!---->
    </div>
    <!-- EOF END -->
    <div id="topic-title">
        <h1>
            <a href="86.html">How can i access api key metadata inside an action</a>
        </h1>

        <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/core-st2-platform-issues/6" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Platform</span>
              </span>
            </a>
            <meta itemprop="position" content="1"/>
          </span>
            <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/core-st2-platform-issues/user-management-issues/18" class="badge-wrapper bullet"
               itemprop="item">
              <span class='badge-category-bg' style='background-color: #9EB83B'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>User Management</span>
              </span>
            </a>
            <meta itemprop="position" content="2"/>
          </span>
        </div>

        <div class="topic-category">
            <div class='discourse-tags list-tags'>
                <a href='../../tag/api' class='discourse-tag' rel="tag">api</a>
            </div>
        </div>
    </div>


    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/n_kos'><span itemprop='name'>n_kos</span></a>
            (Giorgos Karagkounis)
          </span>

            <link itemprop="mainEntityOfPage" href="86.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-03-15T12:18:12Z' class='post-time'>
                March 15, 2018, 12:18pm
              </time>
              <meta itemprop='dateModified' content='2018-05-15T19:15:45Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Is there any way I can access the API key metadata inside a python action?</p>
        </div>

        <meta itemprop='headline' content='How can i access api key metadata inside an action'>
        <meta itemprop='keywords' content='api'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/nmaludy'><span itemprop='name'>nmaludy</span></a>
            (Nick Maludy)
          </span>

            <link itemprop="mainEntityOfPage" href="86.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-03-15T12:32:24Z' class='post-time'>
                March 15, 2018, 12:32pm
              </time>
              <meta itemprop='dateModified' content='2018-03-15T12:32:24Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p><a class="mention" href="https://github.com/n_kos">@n_kos</a> you can make an API call to
                access the metadata: <a href="https://api.stackstorm.com/api/v1/apikeys/#/api_key_controller.get_one">https://api.stackstorm.com/api/v1/apikeys/#/api_key_controller.get_one</a>
            </p>
        </div>

        <meta itemprop='headline' content='How can i access api key metadata inside an action'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/n_kos'><span itemprop='name'>n_kos</span></a>
            (Giorgos Karagkounis)
          </span>

            <link itemprop="mainEntityOfPage" href="86.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-03-15T13:10:12Z' class='post-time'>
                March 15, 2018,  1:10pm
              </time>
              <meta itemprop='dateModified' content='2018-03-15T13:10:12Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p><a class="mention" href="https://github.com/nmaludy">@nmaludy</a> My bad I was not clear
                enough. I would like to access metadata of the API key that called the action.</p>
        </div>

        <meta itemprop='headline' content='How can i access api key metadata inside an action'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/nmaludy'><span itemprop='name'>nmaludy</span></a>
            (Nick Maludy)
          </span>

            <link itemprop="mainEntityOfPage" href="86.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-03-15T13:15:54Z' class='post-time'>
                March 15, 2018,  1:15pm
              </time>
              <meta itemprop='dateModified' content='2018-03-15T13:15:54Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p><a class="mention" href="https://github.com/n_kos">@n_kos</a> the API key is set as an
                environment variable ST2_API_KEY when the python action is called. You can read this from <code>os.environ['ST2_API_KEY']</code>
                you can then use this to query for the metadata using the API endpoint i linked above.</p>
            <p>To use the API key as auth for the API see this: <a
                    href="https://docs.stackstorm.com/authentication.html#api-key-usage">Authentication ‚Äî StackStorm
                2.6.0 documentation</a></p>
        </div>

        <meta itemprop='headline' content='How can i access api key metadata inside an action'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/armab'><span itemprop='name'>armab</span></a>
            (Eugen Cusmaunsa)
          </span>

            <link itemprop="mainEntityOfPage" href="86.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-03-15T13:19:07Z' class='post-time'>
                March 15, 2018,  1:19pm
              </time>
              <meta itemprop='dateModified' content='2018-03-15T13:19:07Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Alternative is to use <code>st2client</code> py bindings, which again calls the beforementioned REST API.
            </p>
            <p>Following the <a
                    href="https://docs.stackstorm.com/datastore.html#storing-and-retrieving-via-python-client">Datastore
                ‚Äî StackStorm 2.6.0 documentation</a> analogy as a base example of using <code>st2client</code>:</p>
            <pre><code class="lang-auto">&gt;&gt;&gt; from st2client.client import Client
&gt;&gt;&gt; client = Client(base_url='http://localhost', token='abcde123456')
&gt;&gt;&gt; client.apikeys.get_all()
[&lt;ApiKey id=5a383c27e9178d4967e81931,user=st2admin,metadata={}&gt;, &lt;ApiKey id=5aaa6d6de9178d0867016896,user=st2admin,metadata={}&gt;]
</code></pre>
            <p>In a python action itself, you have access to temporary <code>ST2_ACTION_AUTH_TOKEN</code> env variable
                and can use that in context for <code>auth</code>, see <a
                        href="https://docs.stackstorm.com/actions.html#environment-variables-available-to-actions">Actions
                    ‚Äî StackStorm 2.6.0 documentation</a></p>
            <h3>Resources:</h3>
            <ul>
                <li>CLI to show REST API calls: <code>st2 --debug apikey list</code>
                </li>
                <li>
                    <a href="https://github.com/StackStorm/st2/blob/master/st2client/st2client/models/auth.py">st2/auth.py
                        at master ¬∑ StackStorm/st2 ¬∑ GitHub</a> - st2client source
                </li>
                <li>
                    <a href="https://docs.stackstorm.com/actions.html#environment-variables-available-to-actions">Actions
                        ‚Äî StackStorm 2.6.0 documentation</a> - env vars available to actions
                </li>
                <li>
                    <a href="https://docs.stackstorm.com/datastore.html#storing-and-retrieving-via-python-client">Datastore
                        ‚Äî StackStorm 2.6.0 documentation</a> - basic st2client usage example
                </li>
                <li>
                    <a href="https://github.com/StackStorm-Exchange/stackstorm-st2/tree/master/actions">stackstorm-st2/actions
                        at master ¬∑ StackStorm-Exchange/stackstorm-st2 ¬∑ GitHub</a> - <code>st2</code> pack code samples
                    which uses <code>st2client</code> behind the hood
                </li>
            </ul>
        </div>

        <meta itemprop='headline' content='How can i access api key metadata inside an action'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/n_kos'><span itemprop='name'>n_kos</span></a>
            (Giorgos Karagkounis)
          </span>

            <link itemprop="mainEntityOfPage" href="86.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-03-15T13:33:54Z' class='post-time'>
                March 15, 2018,  1:33pm
              </time>
              <meta itemprop='dateModified' content='2018-03-15T13:33:54Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p><a class="mention" href="https://github.com/nmaludy">@nmaludy</a> I can only see
                ST2_ACTION_AUTH_TOKEN and ST2_AUTH_TOKEN. I initiate the action with:<br>
                /executions/ endpoint. I use the St2-Api-Key in the header for authentication</p>
        </div>

        <meta itemprop='headline' content='How can i access api key metadata inside an action'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/armab'><span itemprop='name'>armab</span></a>
            (Eugen Cusmaunsa)
          </span>

            <link itemprop="mainEntityOfPage" href="86.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-03-15T13:38:17Z' class='post-time'>
                March 15, 2018,  1:38pm
              </time>
              <meta itemprop='dateModified' content='2018-03-15T13:38:17Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Talking about obtaining an API Key meta which triggered an execution, - I‚Äôm not exactly sure, but it‚Äôs
                possible that the action was triggered based on API token, but not the API key or vice-versa. So there
                is no way to know at the moment from the users‚Äôs perspective.</p>
            <p>There must be however some ways to lookup which <code>user</code> initiated an execution aka owner
                (something that stands behind Key or Token).</p>
        </div>

        <meta itemprop='headline' content='How can i access api key metadata inside an action'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/n_kos'><span itemprop='name'>n_kos</span></a>
            (Giorgos Karagkounis)
          </span>

            <link itemprop="mainEntityOfPage" href="86.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-03-15T14:05:38Z' class='post-time'>
                March 15, 2018,  2:05pm
              </time>
              <meta itemprop='dateModified' content='2018-03-15T14:05:38Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>I don‚Äôt know how to make new users so I thought adding them on metadata. How can I create new users?</p>
        </div>

        <meta itemprop='headline' content='How can i access api key metadata inside an action'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/armab'><span itemprop='name'>armab</span></a>
            (Eugen Cusmaunsa)
          </span>

            <link itemprop="mainEntityOfPage" href="86.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-03-15T14:23:12Z' class='post-time'>
                March 15, 2018,  2:23pm
              </time>
              <meta itemprop='dateModified' content='2018-03-15T14:23:12Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>You can rely on <code>.htpasswd</code> auth which is default if you didn‚Äôt change your auth backend in
                <code>st2.conf</code>, see: <a
                        href="https://docs.stackstorm.com/install/common/configure_authentication.html">Configure
                    Authentication</a>.<br>
                There are other auth backends available in StackStorm Enterprise version like <a
                        href="https://docs.stackstorm.com/authentication.html#ldap-enterprise-edition"><code>LDAP</code></a>.
            </p>
            <p>Then in action meta you can use <code>{{action_context.user}}</code> (<a
                    href="https://docs.stackstorm.com/actions.html#parameters-in-actions">Actions ‚Äî StackStorm 2.6.0
                documentation</a>) which will show the StackStorm user who initiated the call.</p>
        </div>

        <meta itemprop='headline' content='How can i access api key metadata inside an action'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/lakstorm'><span itemprop='name'>lakstorm</span></a>
            (L K)
          </span>

            <link itemprop="mainEntityOfPage" href="86.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-03-15T14:24:43Z' class='post-time'>
                March 15, 2018,  2:24pm
              </time>
              <meta itemprop='dateModified' content='2018-03-15T14:24:43Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p><a class="mention" href="https://github.com/n_kos">@n_kos</a> Eugen is right. More context:
                Right now, the user data model is created on first successful authentication. For authentication
                backend, you can simply use a flat file backend or even LDAP. Once a user successfully logins, a user
                data model is created in DB. API keys can then be created by the user post successful login as long as
                the admin allows you to do this via RBAC (if you don‚Äôt have RBAC, any authenticated user can create API
                keys). A single user can create as many API keys - one for each integration.</p>
            <p>So to answer your question simply - Adding a user is same as adding an entry in authentication backend
                that will allow user to talk to stackstorm.</p>
        </div>

        <meta itemprop='headline' content='How can i access api key metadata inside an action'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/n_kos'><span itemprop='name'>n_kos</span></a>
            (Giorgos Karagkounis)
          </span>

            <link itemprop="mainEntityOfPage" href="86.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-03-15T14:31:00Z' class='post-time'>
                March 15, 2018,  2:31pm
              </time>
              <meta itemprop='dateModified' content='2018-03-15T14:31:00Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Thank you for your answers!</p>
        </div>

        <meta itemprop='headline' content='How can i access api key metadata inside an action'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/n_kos'><span itemprop='name'>n_kos</span></a>
            (Giorgos Karagkounis)
          </span>

            <link itemprop="mainEntityOfPage" href="86.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-03-15T15:06:57Z' class='post-time'>
                March 15, 2018,  3:06pm
              </time>
              <meta itemprop='dateModified' content='2018-03-15T15:06:57Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>As I can see I can only create roles through yaml files statically. Is there any way that I can create
                permissions or roles dynamically?</p>
        </div>

        <meta itemprop='headline' content='How can i access api key metadata inside an action'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/lhill'><span itemprop='name'>lhill</span></a>
            (Lindsay Hill)
          </span>

            <link itemprop="mainEntityOfPage" href="86.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-03-15T17:48:07Z' class='post-time'>
                March 15, 2018,  5:48pm
              </time>
              <meta itemprop='dateModified' content='2018-03-15T17:48:07Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>You can dynamically assign roles based upon LDAP group membership. Is that the sort of dynamic assignment
                you‚Äôre thinking of?</p>
            <p>If not, how are you thinking about obtaining that information to map users to roles?</p>
        </div>

        <meta itemprop='headline' content='How can i access api key metadata inside an action'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/n_kos'><span itemprop='name'>n_kos</span></a>
            (Giorgos Karagkounis)
          </span>

            <link itemprop="mainEntityOfPage" href="86.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-03-16T12:42:09Z' class='post-time'>
                March 16, 2018, 12:42pm
              </time>
              <meta itemprop='dateModified' content='2018-03-16T12:42:09Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>I am actually thinking of dynamically on runtime allow action execution to a User so I can decide what a
                user can execute. Should I create a role for every Action?</p>
        </div>

        <meta itemprop='headline' content='How can i access api key metadata inside an action'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/lakstorm'><span itemprop='name'>lakstorm</span></a>
            (L K)
          </span>

            <link itemprop="mainEntityOfPage" href="86.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-03-16T14:01:35Z' class='post-time'>
                March 16, 2018,  2:01pm
              </time>
              <meta itemprop='dateModified' content='2018-03-16T14:01:35Z'>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Mind opening another issue because the title of the post and the recent discussion aren‚Äôt matching? When
                you open a new issue, please add more context to what you are doing? You jumped right to a solution you
                have in mind and asking questions about it. Perhaps, it‚Äôs good for us to collectively figure out what
                pattern would help you.</p>
        </div>

        <meta itemprop='headline' content='How can i access api key metadata inside an action'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>


    <!-- :preload-content -->
    <footer class="noscript-footer-nav">
        <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='../../index.html'>Home</a>
            <a href="../../categories.html">Categories</a>
            <a href="https://forum.stackstorm.com/guidelines">FAQ/Guidelines</a>
            <a href="../../tos.html">Terms of Service</a>
            <a href="../../privacy.html">Privacy Policy</a>
        </nav>
    </footer>
</div>

<footer id='noscript-footer'>
    <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>


<section id='main'>
</section>


</body>
</html>
