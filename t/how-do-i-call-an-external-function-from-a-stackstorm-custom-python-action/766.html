<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device text-size-normal anon">
<head>
    <meta charset="utf-8">
    <title>How do I call an external function from a stackstorm custom python action? - How do I do X in st2? -
        StackStorm Support (ARCHIVED)</title>
    <meta name="description" content="I have the following structure inside my actions pack: 
actions/
         __init__.py
          acl.run.py
          acl.run.yaml
          lib/
             __init__.py
             utils.py

And inside the acl.run.py s&amp;hellip;">
    <meta name="discourse_theme_id" content="2">
    <meta name="discourse_current_homepage" content="latest">
    <meta name="generator"
          content="Discourse 2.8.0.beta6 - https://github.com/discourse/discourse version a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787">
    <link rel="icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_32x32.PNG">
    <link rel="apple-touch-icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_180x180.PNG">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <link rel="canonical" href="766.html"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://forum.stackstorm.com",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://forum.stackstorm.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml"
          title="StackStorm Support (ARCHIVED) Search">


    <link href="/../../stylesheets/color_definitions_base__2_3c5eec1ecf192052ea70b4afdab57a62bccc0604.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" class="light-scheme"/>

    <link href="/../../stylesheets/desktop_b2f2968742d41481357e0df259b51ce29f72481a.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" data-target="desktop"/>


    <meta name="fragment" content="!">


    <link id="manifest-link" rel="manifest" href="../../manifest.webmanifest" crossorigin="use-credentials">


    <link rel="alternate" type="application/rss+xml"
          title="RSS feed of &#39;How do I call an external function from a stackstorm custom python action?&#39;"
          href="766.rss"/>
    <meta property="og:site_name" content="StackStorm Support (ARCHIVED)"/>
    <meta property="og:type" content="website"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:url"
          content="https://forum.stackstorm.com/t/how-do-i-call-an-external-function-from-a-stackstorm-custom-python-action/766"/>
    <meta name="twitter:url"
          content="https://forum.stackstorm.com/t/how-do-i-call-an-external-function-from-a-stackstorm-custom-python-action/766"/>
    <meta property="og:title" content="How do I call an external function from a stackstorm custom python action?"/>
    <meta name="twitter:title" content="How do I call an external function from a stackstorm custom python action?"/>
    <meta property="og:description"
          content="I have the following structure inside my actions pack:  actions/          __init__.py           acl.run.py           acl.run.yaml           lib/              __init__.py              utils.py  And inside the acl.run.py script there is this import:  from actions.lib.utils import create_device  But when I try to call the acl.run.py actions I get this error:  ImportError: No module named &#39;actions&#39;  I have also tried to use the relative path ( .lib.utils), but in that case I‚Äôve got:  SystemError: Pa..."/>
    <meta name="twitter:description"
          content="I have the following structure inside my actions pack:  actions/          __init__.py           acl.run.py           acl.run.yaml           lib/              __init__.py              utils.py  And inside the acl.run.py script there is this import:  from actions.lib.utils import create_device  But when I try to call the acl.run.py actions I get this error:  ImportError: No module named &#39;actions&#39;  I have also tried to use the relative path ( .lib.utils), but in that case I‚Äôve got:  SystemError: Pa..."/>
    <meta name="twitter:label1" value="Reading time"/>
    <meta name="twitter:data1" value="1 mins üïë"/>
    <meta name="twitter:label2" value="Likes"/>
    <meta name="twitter:data2" value="2 ‚ù§"/>
    <meta property="article:published_time" content="2019-07-23T10:01:12+00:00"/>
    <meta property="og:ignore_canonical" content="true"/>


    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "QAPage",
        "name": "How do I call an external function from a stackstorm custom python action?",
        "mainEntity": {
            "@type": "Question",
            "name": "How do I call an external function from a stackstorm custom python action?",
            "text": "I have the following structure inside my actions pack:\n\nactions/\n\n__init__.py\n\nacl.run.py\n\nacl.run.yaml\n\nlib/\n\n__init__.py\n\nutils.py\n\nAnd inside the acl.run.py script there is this import:\n\nfrom actions.lib.utils import create_device\n\nBut wh&hellip;",
            "upvoteCount": 0,
            "answerCount": 1,
            "dateCreated": "2019-07-23T10:01:12.586Z",
            "author": {
                "@type": "Person",
                "name": "Andrea Lacava"
            },
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "Here is an example: <a href="
                https://forum.stackstorm.com/t/how-do-i-call-an-external-function-from-a-stackstorm-custom-python-action/\&quot;https://github.com/StackStorm-Exchange/stackstorm-ansible/tree/master/actions\&quot;" class=\"inline-onebox\" rel=\"nofollow noopener\">stackstorm-ansible/actions at master ¬∑ StackStorm-Exchange/stackstorm-ansible ¬∑ GitHub<\/a> with lib inside actions.","upvoteCount":2,"dateCreated":"2019-07-23T11:51:30.841Z","url":"https://forum.stackstorm.com/t/how-do-i-call-an-external-function-from-a-stackstorm-custom-python-action/766/2","author":{"@type":"Person","name":"armab"}}}}
    </script>

    <meta id="data-discourse-setup" data-cdn="https://sjc6.discourse-cdn.com/standard10"
          data-base-url="https://forum.stackstorm.com" data-base-uri="" data-environment="production"
          data-letter-avatar-version="5_8fec8e114563efeaf5265573e510f08e"
          data-markdown-it-url="https://aws1.discourse-cdn.com/standard10/assets/markdown-it-bundle-31e9a9c535ca1801c26da78b0ff465821751a98f921c5cdc5457d7e5a69e9748.js"
          data-service-worker-url="service-worker.js" data-default-locale="en"
          data-asset-version="597e36448c9b51d0fa3b7e43ec1fd6d5" data-disable-custom-css="false"
          data-highlight-js-path="/highlight-js/forum.stackstorm.com/ac0f4aa001e1343346941766d72e0c1ae330832b.js"
          data-svg-sprite-path="/svg-sprite/forum.stackstorm.com/svg-2-c2ad434b1e06079c7e282124aed9938dc95b83ea.js"
          data-enable-js-error-reporting="true" data-color-scheme-is-dark="false" data-user-dark-scheme-id="-1"
          data-s3-cdn="https://aws1.discourse-cdn.com/standard10"
          data-s3-base-url="//discourse-cloud-file-uploads.s3.dualstack.us-west-2.amazonaws.com/standard10">

    <meta name="discourse/config/environment"
          content="%7B%22modulePrefix%22%3A%22discourse%22%2C%22environment%22%3A%22production%22%2C%22rootURL%22%3A%22%22%2C%22locationType%22%3A%22auto%22%2C%22historySupportMiddleware%22%3Afalse%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%2C%22EXTEND_PROTOTYPES%22%3A%7B%22Date%22%3Afalse%7D%2C%22_APPLICATION_TEMPLATE_WRAPPER%22%3Afalse%2C%22_DEFAULT_ASYNC_OBSERVERS%22%3Atrue%2C%22_JQUERY_INTEGRATION%22%3Atrue%7D%2C%22APP%22%3A%7B%22name%22%3A%22discourse%22%2C%22version%22%3A%222.8.0.beta6%20a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787%22%2C%22exportApplicationGlobal%22%3Atrue%7D%7D"/>
</head>

<body class="">


<header class="d-header">
    <div class="wrap">
        <div class="contents clearfix">
            <div class="title">
                <a href="../../index.html">
                    <picture>
                        <img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png"
                             alt="StackStorm Support (ARCHIVED)" id="site-logo"/>
                    </picture>
                </a>
            </div>

        </div>
    </div>
</header>

<div id="main-outlet" class="wrap" role="main">
    <!-- preload-content: -->

    <!-- EOF START -->
    <div class="container" id="main-container">
        <div id="ember11" class="ember-view"></div>
        <div id="ember12" class="controls ember-view"><!----></div>
        <div id="ember13" class="ember-view"><!----></div>
        <div id="ember14" class="ember-view">
            <div class="row">
                <div id="global-notice-alert-read-only" class="alert alert-info alert-read-only">
                    <!----> <span class="text">This site is in read only mode. Please continue to browse, but replying, likes, and other actions are disabled for now.</span>

                    <!---->    </div>
            </div>
            <div class="row">
                <div id="global-notice-alert-global-notice" class="alert alert-info alert-global-notice">
                    <!----> <span class="text"><h3>‚ö†Ô∏è We've moved!</h3>  <p> Hi there!<br><br> To reduce project dependency on 3rd party paid services the StackStorm TSC has decided to move the Q/A from this forum to <a
                        href="https://github.com/StackStorm/st2/discussions">Github Discussions</a>. This will make user experience better integrated with the native Github flow, as well as the questions closer to the community where they can provide answers. </p>  <p> Use üîó <b><a
                        href="https://github.com/StackStorm/st2/discussions" class="active">Github Discussions</a></b> to ask your questions. </p></span>

                    <!---->    </div>
            </div>
        </div>
        <div id="ember17" class="hidden create-topics-notice ember-view"><!----></div>
        <!---->
    </div>
    <!-- EOF END -->
    <div id="topic-title">
        <h1>
            <a href="766.html">How do I call an external function from a stackstorm custom python action?</a>
        </h1>

        <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/integrations-and-exchange-related-issues/10" class="badge-wrapper bullet"
               itemprop="item">
              <span class='badge-category-bg' style='background-color: #ED207B'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Exchange</span>
              </span>
            </a>
            <meta itemprop="position" content="1"/>
          </span>
            <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/integrations-and-exchange-related-issues/how-do-i-do-x-in-st2/14"
               class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #AB9364'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>How do I do X in st2?</span>
              </span>
            </a>
            <meta itemprop="position" content="2"/>
          </span>
        </div>

        <div class="topic-category">
            <div class='discourse-tags list-tags'>
                <a href='../../tag/actions' class='discourse-tag' rel="tag">actions</a>,
                <a href='../../tag/python' class='discourse-tag' rel="tag">python</a>
            </div>
        </div>
    </div>


    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/Thecave3'><span itemprop='name'>Thecave3</span></a>
            (Andrea Lacava)
          </span>

            <link itemprop="mainEntityOfPage" href="766.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-23T10:01:12Z' class='post-time'>
                July 23, 2019, 10:01am
              </time>
              <meta itemprop='dateModified' content='2019-07-23T11:51:51Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>I have the following structure inside my actions pack:</p>
            <pre><code>actions/
         __init__.py
          acl.run.py
          acl.run.yaml
          lib/
             __init__.py
             utils.py
</code></pre>
            <p>And inside the acl.run.py script there is this import:</p>
            <pre><code>from actions.lib.utils import create_device
</code></pre>
            <p>But when I try to call the acl.run.py actions I get this error:</p>
            <pre><code>ImportError: No module named 'actions'
</code></pre>
            <p>I have also tried to use the relative path ( <em>.lib.utils</em>), but in that case I‚Äôve got:</p>
            <pre><code>SystemError: Parent module 'acl' not loaded, cannot perform relative import
</code></pre>
            <p>If i remove the <em>acl</em> part from the name I have:</p>
            <pre><code>SystemError: Parent module '' not loaded, cannot perform relative import
</code></pre>
            <p>Since I don‚Äôt know how exactly Stackstorm loads the script can someone write here and also in the
                documentation how to link the lib folder (named as best practice in the documentation( to the actions
                scripts?</p>
        </div>

        <meta itemprop='headline' content='How do I call an external function from a stackstorm custom python action?'>
        <meta itemprop='keywords' content='actions, python'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/armab'><span itemprop='name'>armab</span></a>
            (Eugen Cusmaunsa)
          </span>

            <link itemprop="mainEntityOfPage" href="766.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-23T11:51:30Z' class='post-time'>
                July 23, 2019, 11:51am
              </time>
              <meta itemprop='dateModified' content='2019-07-23T11:51:30Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Here is an example: <a
                    href="https://github.com/StackStorm-Exchange/stackstorm-ansible/tree/master/actions"
                    class="inline-onebox" rel="nofollow noopener">stackstorm-ansible/actions at master ¬∑
                StackStorm-Exchange/stackstorm-ansible ¬∑ GitHub</a> with <code>lib</code> inside actions.</p>
        </div>

        <meta itemprop='headline' content='How do I call an external function from a stackstorm custom python action?'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="2"/>
            <span class='post-likes'>2 Likes</span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>


    <!-- :preload-content -->
    <footer class="noscript-footer-nav">
        <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='../../index.html'>Home</a>
            <a href="../../categories.html">Categories</a>
            <a href="https://forum.stackstorm.com/guidelines">FAQ/Guidelines</a>
            <a href="../../tos.html">Terms of Service</a>
            <a href="../../privacy.html">Privacy Policy</a>
        </nav>
    </footer>
</div>

<footer id='noscript-footer'>
    <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>


<section id='main'>
</section>


</body>
</html>
