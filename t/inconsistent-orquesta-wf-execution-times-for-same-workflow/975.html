<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device text-size-normal anon">
<head>
    <meta charset="utf-8">
    <title>Inconsistent Orquesta WF execution times for same workflow - Workflows - StackStorm Support
        (ARCHIVED)</title>
    <meta name="description" content="I have a very simple workflow borrowed from examples in github as follows: 
version: 1.0 
description: A workflow demonstrating with items and concurrent processing. 
input: 

members: [1,2,3,4,5,6,7,8,9,10]
concurrency:&amp;hellip;">
    <meta name="discourse_theme_id" content="2">
    <meta name="discourse_current_homepage" content="latest">
    <meta name="generator"
          content="Discourse 2.8.0.beta6 - https://github.com/discourse/discourse version a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787">
    <link rel="icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_32x32.PNG">
    <link rel="apple-touch-icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_180x180.PNG">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <link rel="canonical" href="975.html"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://forum.stackstorm.com",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://forum.stackstorm.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml"
          title="StackStorm Support (ARCHIVED) Search">


    <link href="/../../stylesheets/color_definitions_base__2_3c5eec1ecf192052ea70b4afdab57a62bccc0604.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" class="light-scheme"/>

    <link href="/../../stylesheets/desktop_b2f2968742d41481357e0df259b51ce29f72481a.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" data-target="desktop"/>


    <meta name="fragment" content="!">


    <link id="manifest-link" rel="manifest" href="../../manifest.webmanifest" crossorigin="use-credentials">


    <link rel="alternate" type="application/rss+xml"
          title="RSS feed of &#39;Inconsistent Orquesta WF execution times for same workflow&#39;" href="975.rss"/>
    <meta property="og:site_name" content="StackStorm Support (ARCHIVED)"/>
    <meta property="og:type" content="website"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:url"
          content="https://forum.stackstorm.com/t/inconsistent-orquesta-wf-execution-times-for-same-workflow/975"/>
    <meta name="twitter:url"
          content="https://forum.stackstorm.com/t/inconsistent-orquesta-wf-execution-times-for-same-workflow/975"/>
    <meta property="og:title" content="Inconsistent Orquesta WF execution times for same workflow"/>
    <meta name="twitter:title" content="Inconsistent Orquesta WF execution times for same workflow"/>
    <meta property="og:description"
          content="I have a very simple workflow borrowed from examples in github as follows:  version: 1.0  description: A workflow demonstrating with items and concurrent processing.  input:   members: [1,2,3,4,5,6,7,8,9,10] concurrency: 5 trace_id  tasks:  task1:  with:  items: &lt;% ctx(members) %&gt;  concurrency: &lt;% ctx(concurrency) %&gt;  action: core.echo message=&quot;&lt;% item() %&gt;, resistance is futile!&quot;  output:   items: &lt;% task(task1).result.items.select($.result.stdout) %&gt;  I am executing in docker on my mac. The pu..."/>
    <meta name="twitter:description"
          content="I have a very simple workflow borrowed from examples in github as follows:  version: 1.0  description: A workflow demonstrating with items and concurrent processing.  input:   members: [1,2,3,4,5,6,7,8,9,10] concurrency: 5 trace_id  tasks:  task1:  with:  items: &lt;% ctx(members) %&gt;  concurrency: &lt;% ctx(concurrency) %&gt;  action: core.echo message=&quot;&lt;% item() %&gt;, resistance is futile!&quot;  output:   items: &lt;% task(task1).result.items.select($.result.stdout) %&gt;  I am executing in docker on my mac. The pu..."/>
    <meta property="article:published_time" content="2019-12-26T19:19:19+00:00"/>
    <meta property="og:ignore_canonical" content="true"/>


    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "QAPage",
        "name": "Inconsistent Orquesta WF execution times for same workflow",
        "mainEntity": {
            "@type": "Question",
            "name": "Inconsistent Orquesta WF execution times for same workflow",
            "text": "I have a very simple workflow borrowed from examples in github as follows:\n\nversion: 1.0\n\ndescription: A workflow demonstrating with items and concurrent processing.\n\ninput:\n\nmembers: [1,2,3,4,5,6,7,8,9,10]\n\nconcurrency: 5\n\ntrace_id\n\ntasks:\n\ntask1:\n\nwith:\n\nitems: &lt;% ctx(members) %&gt;\n\nconcurrency: &lt;% c&hellip;",
            "upvoteCount": 0,
            "answerCount": 0,
            "dateCreated": "2019-12-26T19:19:19.438Z",
            "author": {
                "@type": "Person",
                "name": "Techdiverdown"
            }
        }
    }
    </script>

    <meta id="data-discourse-setup" data-cdn="https://sjc6.discourse-cdn.com/standard10"
          data-base-url="https://forum.stackstorm.com" data-base-uri="" data-environment="production"
          data-letter-avatar-version="5_8fec8e114563efeaf5265573e510f08e"
          data-markdown-it-url="https://aws1.discourse-cdn.com/standard10/assets/markdown-it-bundle-31e9a9c535ca1801c26da78b0ff465821751a98f921c5cdc5457d7e5a69e9748.js"
          data-service-worker-url="service-worker.js" data-default-locale="en"
          data-asset-version="597e36448c9b51d0fa3b7e43ec1fd6d5" data-disable-custom-css="false"
          data-highlight-js-path="/highlight-js/forum.stackstorm.com/ac0f4aa001e1343346941766d72e0c1ae330832b.js"
          data-svg-sprite-path="/svg-sprite/forum.stackstorm.com/svg-2-c2ad434b1e06079c7e282124aed9938dc95b83ea.js"
          data-enable-js-error-reporting="true" data-color-scheme-is-dark="false" data-user-dark-scheme-id="-1"
          data-s3-cdn="https://aws1.discourse-cdn.com/standard10"
          data-s3-base-url="//discourse-cloud-file-uploads.s3.dualstack.us-west-2.amazonaws.com/standard10">

    <meta name="discourse/config/environment"
          content="%7B%22modulePrefix%22%3A%22discourse%22%2C%22environment%22%3A%22production%22%2C%22rootURL%22%3A%22%22%2C%22locationType%22%3A%22auto%22%2C%22historySupportMiddleware%22%3Afalse%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%2C%22EXTEND_PROTOTYPES%22%3A%7B%22Date%22%3Afalse%7D%2C%22_APPLICATION_TEMPLATE_WRAPPER%22%3Afalse%2C%22_DEFAULT_ASYNC_OBSERVERS%22%3Atrue%2C%22_JQUERY_INTEGRATION%22%3Atrue%7D%2C%22APP%22%3A%7B%22name%22%3A%22discourse%22%2C%22version%22%3A%222.8.0.beta6%20a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787%22%2C%22exportApplicationGlobal%22%3Atrue%7D%7D"/>
</head>

<body class="">


<header class="d-header">
    <div class="wrap">
        <div class="contents clearfix">
            <div class="title">
                <a href="../../index.html">
                    <picture>
                        <img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png"
                             alt="StackStorm Support (ARCHIVED)" id="site-logo"/>
                    </picture>
                </a>
            </div>

        </div>
    </div>
</header>

<div id="main-outlet" class="wrap" role="main">
    <!-- preload-content: -->

    <!-- EOF START -->
    <div class="container" id="main-container">
        <div id="ember11" class="ember-view"></div>
        <div id="ember12" class="controls ember-view"><!----></div>
        <div id="ember13" class="ember-view"><!----></div>
        <div id="ember14" class="ember-view">
            <div class="row">
                <div id="global-notice-alert-read-only" class="alert alert-info alert-read-only">
                    <!----> <span class="text">This site is in read only mode. Please continue to browse, but replying, likes, and other actions are disabled for now.</span>

                    <!---->    </div>
            </div>
            <div class="row">
                <div id="global-notice-alert-global-notice" class="alert alert-info alert-global-notice">
                    <!----> <span class="text"><h3>‚ö†Ô∏è We've moved!</h3>  <p> Hi there!<br><br> To reduce project dependency on 3rd party paid services the StackStorm TSC has decided to move the Q/A from this forum to <a
                        href="https://github.com/StackStorm/st2/discussions">Github Discussions</a>. This will make user experience better integrated with the native Github flow, as well as the questions closer to the community where they can provide answers. </p>  <p> Use üîó <b><a
                        href="https://github.com/StackStorm/st2/discussions" class="active">Github Discussions</a></b> to ask your questions. </p></span>

                    <!---->    </div>
            </div>
        </div>
        <div id="ember17" class="hidden create-topics-notice ember-view"><!----></div>
        <!---->
    </div>
    <!-- EOF END -->
    <div id="topic-title">
        <h1>
            <a href="975.html">Inconsistent Orquesta WF execution times for same workflow</a>
        </h1>

        <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/workflow-related-issues/15" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Workflows</span>
              </span>
            </a>
            <meta itemprop="position" content="1"/>
          </span>
        </div>

        <div class="topic-category">
            <div class='discourse-tags list-tags'>
                <a href='../../tag/orquesta' class='discourse-tag' rel="tag">orquesta</a>
            </div>
        </div>
    </div>


    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/techdiverdown'><span
                    itemprop='name'>techdiverdown</span></a>
            (Techdiverdown)
          </span>

            <link itemprop="mainEntityOfPage" href="975.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-12-26T19:19:19Z' class='post-time'>
                December 26, 2019,  7:19pm
              </time>
              <meta itemprop='dateModified' content='2019-12-26T19:19:19Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>I have a very simple workflow borrowed from examples in github as follows:<br>
                version: 1.0</p>
            <p>description: A workflow demonstrating with items and concurrent processing.</p>
            <p>input:</p>
            <ul>
                <li>members: [1,2,3,4,5,6,7,8,9,10]</li>
                <li>concurrency: 5</li>
                <li>trace_id</li>
            </ul>
            <p>tasks:<br>
                task1:<br>
                with:<br>
                items: &lt;% ctx(members) %&gt;<br>
                concurrency: &lt;% ctx(concurrency) %&gt;<br>
                action: core.echo message="&lt;% item() %&gt;, resistance is futile!"</p>
            <p>output:</p>
            <ul>
                <li>items: &lt;% task(task1).result.items.select($.result.stdout) %&gt;</li>
            </ul>
            <p>I am executing in docker on my mac. The purpose is to vary concurrency, number of items, action runners
                to understand how to appropriately size our k8s cluster (number of action runners, workflow engines,
                etc) and so forth. The issue is i am getting wildly varying times running the exact same wf above. Times
                that vary from 4 seconds to over 21 seconds. I can see (with the st2 tail execution) some actions just
                seem to stop and take 2-3 seconds, mind you same action in the loop above. I am using top and some other
                tools but i cannot determine why the WF just hangs periodically. This happens in production K8s cluster
                as well, so trying to determine how to debug this locally first. Any suggestions appreciated.</p>
        </div>

        <meta itemprop='headline' content='Inconsistent Orquesta WF execution times for same workflow'>
        <meta itemprop='keywords' content='orquesta'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/punkrokk'><span itemprop='name'>punkrokk</span></a>
            (punkrokk)
          </span>

            <link itemprop="mainEntityOfPage" href="975.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-17T19:03:34Z' class='post-time'>
                February 17, 2020,  7:03pm
              </time>
              <meta itemprop='dateModified' content='2020-02-17T19:03:34Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Did you ever solve this? I‚Äôm interested in what you found.</p>
        </div>

        <meta itemprop='headline' content='Inconsistent Orquesta WF execution times for same workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/techdiverdown'><span
                    itemprop='name'>techdiverdown</span></a>
            (Techdiverdown)
          </span>

            <link itemprop="mainEntityOfPage" href="975.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-17T23:13:13Z' class='post-time'>
                February 17, 2020, 11:13pm
              </time>
              <meta itemprop='dateModified' content='2020-02-18T14:15:24Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Yes, basically the publish, the way we pass variables between actions in workflows, pushes data to mongo.
                This is using mongo engine, which can be very slow for large, complex structures, which we use. We moved
                to using redis, so we push data to redis then just pass the redis key around between actions. This
                greatly reduced the CPU usage and made things much faster and more scalable.</p>
        </div>

        <meta itemprop='headline' content='Inconsistent Orquesta WF execution times for same workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/punkrokk'><span itemprop='name'>punkrokk</span></a>
            (punkrokk)
          </span>

            <link itemprop="mainEntityOfPage" href="975.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-02-18T00:41:41Z' class='post-time'>
                February 18, 2020, 12:41am
              </time>
              <meta itemprop='dateModified' content='2020-02-18T00:41:41Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Awesome. Would love to read a blog post about how you solved this, as I‚Äôm sure others are experiencing
                this challenge.</p>
        </div>

        <meta itemprop='headline' content='Inconsistent Orquesta WF execution times for same workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>


    <!-- :preload-content -->
    <footer class="noscript-footer-nav">
        <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='../../index.html'>Home</a>
            <a href="../../categories.html">Categories</a>
            <a href="https://forum.stackstorm.com/guidelines">FAQ/Guidelines</a>
            <a href="../../tos.html">Terms of Service</a>
            <a href="../../privacy.html">Privacy Policy</a>
        </nav>
    </footer>
</div>

<footer id='noscript-footer'>
    <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>


<section id='main'>
</section>


</body>
</html>
