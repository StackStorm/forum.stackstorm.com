<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device text-size-normal anon">
<head>
    <meta charset="utf-8">
    <title>Orquesta workflow is not changing to successful. It is running forever - Workflows - StackStorm Support
        (ARCHIVED)</title>
    <meta name="description" content="Hi, 
I have a simple workflow collecting an array and afterwards starting core.http for every item in the array. 
Therefore I use the with-items solution: 
Do_Loop:
    with: &amp;lt;% ctx().list_of_items %&amp;gt;
    action: core.ht&amp;hellip;">
    <meta name="discourse_theme_id" content="2">
    <meta name="discourse_current_homepage" content="latest">
    <meta name="generator"
          content="Discourse 2.8.0.beta6 - https://github.com/discourse/discourse version a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787">
    <link rel="icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_32x32.PNG">
    <link rel="apple-touch-icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_180x180.PNG">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <link rel="canonical" href="1577.html"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://forum.stackstorm.com",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://forum.stackstorm.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml"
          title="StackStorm Support (ARCHIVED) Search">


    <link href="/../../stylesheets/color_definitions_base__2_3c5eec1ecf192052ea70b4afdab57a62bccc0604.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" class="light-scheme"/>

    <link href="/../../stylesheets/desktop_b2f2968742d41481357e0df259b51ce29f72481a.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" data-target="desktop"/>


    <meta name="fragment" content="!">


    <link id="manifest-link" rel="manifest" href="../../manifest.webmanifest" crossorigin="use-credentials">


    <link rel="alternate" type="application/rss+xml"
          title="RSS feed of &#39;Orquesta workflow is not changing to successful. It is running forever&#39;"
          href="1577.rss"/>
    <meta property="og:site_name" content="StackStorm Support (ARCHIVED)"/>
    <meta property="og:type" content="website"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:url"
          content="https://forum.stackstorm.com/t/orquesta-workflow-is-not-changing-to-successful-it-is-running-forever/1577"/>
    <meta name="twitter:url"
          content="https://forum.stackstorm.com/t/orquesta-workflow-is-not-changing-to-successful-it-is-running-forever/1577"/>
    <meta property="og:title" content="Orquesta workflow is not changing to successful. It is running forever"/>
    <meta name="twitter:title" content="Orquesta workflow is not changing to successful. It is running forever"/>
    <meta property="og:description"
          content="Hi,  I have a simple workflow collecting an array and afterwards starting core.http for every item in the array.  Therefore I use the with-items solution:  Do_Loop:     with: &lt;% ctx().list_of_items %&gt;     action: core.http     input:       url: &quot;https://some.service.net/api/add/&lt;% item().value %&gt;&quot;       method: &quot;PUT&quot;       headers: {&quot;X-APP&quot;:&quot;&lt;% st2kv(&#39;system.appid&#39;) %&gt;&quot;,&quot;X-APIKEY&quot;:&quot;&lt;% st2kv(&#39;system.apikey&#39;, decrypt=&gt;true) %&gt;&quot;,&quot;content-type&quot;:&quot;application/json&quot;,&quot;Accept&quot;:&quot;application/json&quot;}       b..."/>
    <meta name="twitter:description"
          content="Hi,  I have a simple workflow collecting an array and afterwards starting core.http for every item in the array.  Therefore I use the with-items solution:  Do_Loop:     with: &lt;% ctx().list_of_items %&gt;     action: core.http     input:       url: &quot;https://some.service.net/api/add/&lt;% item().value %&gt;&quot;       method: &quot;PUT&quot;       headers: {&quot;X-APP&quot;:&quot;&lt;% st2kv(&#39;system.appid&#39;) %&gt;&quot;,&quot;X-APIKEY&quot;:&quot;&lt;% st2kv(&#39;system.apikey&#39;, decrypt=&gt;true) %&gt;&quot;,&quot;content-type&quot;:&quot;application/json&quot;,&quot;Accept&quot;:&quot;application/json&quot;}       b..."/>
    <meta property="article:published_time" content="2021-02-25T18:11:35+00:00"/>
    <meta property="og:ignore_canonical" content="true"/>


    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "QAPage",
        "name": "Orquesta workflow is not changing to successful. It is running forever",
        "mainEntity": {
            "@type": "Question",
            "name": "Orquesta workflow is not changing to successful. It is running forever",
            "text": "Hi,\n\nI have a simple workflow collecting an array and afterwards starting core.http for every item in the array.\n\nTherefore I use the with-items solution:\n\nDo_Loop:\n\nwith: &lt;% ctx().list_of_items %&gt;\n\naction: core.http\n\ninput:\n\nurl: &quot;https://some.service.net/api/add/&lt;% item().value %&gt;&quot;\n\n&hellip;",
            "upvoteCount": 0,
            "answerCount": 0,
            "dateCreated": "2021-02-25T18:11:35.859Z",
            "author": {
                "@type": "Person",
                "name": "Nikolas"
            }
        }
    }
    </script>

    <meta id="data-discourse-setup" data-cdn="https://sjc6.discourse-cdn.com/standard10"
          data-base-url="https://forum.stackstorm.com" data-base-uri="" data-environment="production"
          data-letter-avatar-version="5_8fec8e114563efeaf5265573e510f08e"
          data-markdown-it-url="https://aws1.discourse-cdn.com/standard10/assets/markdown-it-bundle-31e9a9c535ca1801c26da78b0ff465821751a98f921c5cdc5457d7e5a69e9748.js"
          data-service-worker-url="service-worker.js" data-default-locale="en"
          data-asset-version="597e36448c9b51d0fa3b7e43ec1fd6d5" data-disable-custom-css="false"
          data-highlight-js-path="/highlight-js/forum.stackstorm.com/ac0f4aa001e1343346941766d72e0c1ae330832b.js"
          data-svg-sprite-path="/svg-sprite/forum.stackstorm.com/svg-2-c2ad434b1e06079c7e282124aed9938dc95b83ea.js"
          data-enable-js-error-reporting="true" data-color-scheme-is-dark="false" data-user-dark-scheme-id="-1"
          data-s3-cdn="https://aws1.discourse-cdn.com/standard10"
          data-s3-base-url="//discourse-cloud-file-uploads.s3.dualstack.us-west-2.amazonaws.com/standard10">

    <meta name="discourse/config/environment"
          content="%7B%22modulePrefix%22%3A%22discourse%22%2C%22environment%22%3A%22production%22%2C%22rootURL%22%3A%22%22%2C%22locationType%22%3A%22auto%22%2C%22historySupportMiddleware%22%3Afalse%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%2C%22EXTEND_PROTOTYPES%22%3A%7B%22Date%22%3Afalse%7D%2C%22_APPLICATION_TEMPLATE_WRAPPER%22%3Afalse%2C%22_DEFAULT_ASYNC_OBSERVERS%22%3Atrue%2C%22_JQUERY_INTEGRATION%22%3Atrue%7D%2C%22APP%22%3A%7B%22name%22%3A%22discourse%22%2C%22version%22%3A%222.8.0.beta6%20a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787%22%2C%22exportApplicationGlobal%22%3Atrue%7D%7D"/>
</head>

<body class="">


<header class="d-header">
    <div class="wrap">
        <div class="contents clearfix">
            <div class="title">
                <a href="../../index.html">
                    <picture>
                        <img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png"
                             alt="StackStorm Support (ARCHIVED)" id="site-logo"/>
                    </picture>
                </a>
            </div>

        </div>
    </div>
</header>

<div id="main-outlet" class="wrap" role="main">
    <!-- preload-content: -->

    <!-- EOF START -->
    <div class="container" id="main-container">
        <div id="ember11" class="ember-view"></div>
        <div id="ember12" class="controls ember-view"><!----></div>
        <div id="ember13" class="ember-view"><!----></div>
        <div id="ember14" class="ember-view">
            <div class="row">
                <div id="global-notice-alert-read-only" class="alert alert-info alert-read-only">
                    <!----> <span class="text">This site is in read only mode. Please continue to browse, but replying, likes, and other actions are disabled for now.</span>

                    <!---->    </div>
            </div>
            <div class="row">
                <div id="global-notice-alert-global-notice" class="alert alert-info alert-global-notice">
                    <!----> <span class="text"><h3>‚ö†Ô∏è We've moved!</h3>  <p> Hi there!<br><br> To reduce project dependency on 3rd party paid services the StackStorm TSC has decided to move the Q/A from this forum to <a
                        href="https://github.com/StackStorm/st2/discussions">Github Discussions</a>. This will make user experience better integrated with the native Github flow, as well as the questions closer to the community where they can provide answers. </p>  <p> Use üîó <b><a
                        href="https://github.com/StackStorm/st2/discussions" class="active">Github Discussions</a></b> to ask your questions. </p></span>

                    <!---->    </div>
            </div>
        </div>
        <div id="ember17" class="hidden create-topics-notice ember-view"><!----></div>
        <!---->
    </div>
    <!-- EOF END -->
    <div id="topic-title">
        <h1>
            <a href="1577.html">Orquesta workflow is not changing to successful. It is running forever</a>
        </h1>

        <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/workflow-related-issues/15" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Workflows</span>
              </span>
            </a>
            <meta itemprop="position" content="1"/>
          </span>
        </div>

        <div class="topic-category">
            <div class='discourse-tags list-tags'>
                <a href='../../tag/orquesta' class='discourse-tag' rel="tag">orquesta</a>,
                <a href='../../tag/workflows' class='discourse-tag' rel="tag">workflows</a>
            </div>
        </div>
    </div>


    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/wingi'><span itemprop='name'>wingi</span></a>
            (Nikolas)
          </span>

            <link itemprop="mainEntityOfPage" href="1577.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-02-25T18:11:35Z' class='post-time'>
                February 25, 2021,  6:11pm
              </time>
              <meta itemprop='dateModified' content='2021-02-25T18:11:35Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Hi,</p>
            <p>I have a simple workflow collecting an array and afterwards starting core.http for every item in the
                array.<br>
                Therefore I use the with-items solution:</p>
            <pre><code>Do_Loop:
    with: &lt;% ctx().list_of_items %&gt;
    action: core.http
    input:
      url: "https://some.service.net/api/add/&lt;% item().value %&gt;"
      method: "PUT"
      headers: {"X-APP":"&lt;% st2kv('system.appid') %&gt;","X-APIKEY":"&lt;% st2kv('system.apikey', decrypt=&gt;true) %&gt;","content-type":"application/json","Accept":"application/json"}
      body: '{
               "host": "&lt;% item().value %&gt;",
               "description": "Detail: &lt;% item().event_id %&gt;"
             }'
</code></pre>
            <p>In my current example, the list contains 286 values which leads to 286 http action executions.<br>
                First I had the issue that the actions took longer and longer till everything stuck. After searching
                issues, etc. I found a PR where it is stated to use a coordination backend. (<a
                        href="https://github.com/StackStorm/st2/pull/4595" class="inline-onebox"
                        rel="noopener nofollow ugc">Acquire lock in workflow engine before handling action execution
                    completion by m4dcoder ¬∑ Pull Request #4595 ¬∑ StackStorm/st2 ¬∑ GitHub</a>)</p>
            <p>Therefore I installed and configure redis. Since then the actions run smooth and in short time, but the
                overall workflow is still in progress even if all 286 actions are executed.</p>
            <p>By checking the wfl logs I get the following:<br>
                tail -F /var/log/st2/st2workflowengine.log<br>
                2021-02-25 18:04:23,417 140710782507280 DEBUG keyvalue [-] get_key key_id: appid, scope: st2kv.system,
                user: st2admin, decrypt: False<br>
                2021-02-25 18:04:23,706 140710782507280 DEBUG keyvalue [-] get_key key_id: apikey, scope: st2kv.system,
                user: st2admin, decrypt: True<br>
                2021-02-25 18:04:23,986 140710782507280 DEBUG keyvalue [-] get_key key_id: appid, scope: st2kv.system,
                user: st2admin, decrypt: False<br>
                2021-02-25 18:04:24,068 140710782507280 DEBUG keyvalue [-] get_key key_id: apikey, scope: st2kv.system,
                user: st2admin, decrypt: True<br>
                2021-02-25 18:04:24,553 140710782507280 DEBUG keyvalue [-] get_key key_id: appid, scope: st2kv.system,
                user: st2admin, decrypt: False<br>
                2021-02-25 18:04:24,638 140710782507280 DEBUG keyvalue [-] get_key key_id: apikey, scope: st2kv.system,
                user: st2admin, decrypt: True<br>
                2021-02-25 18:04:24,921 140710782507280 DEBUG keyvalue [-] get_key key_id: appid, scope: st2kv.system,
                user: st2admin, decrypt: False</p>
            <p>It looks like it is still collecting the values from the keystore, but they are no longer needed. Every
                http action is already satisfied.<br>
                It is visible that all actions of the workflow already succeeded by looking on the WebUI and the CLI.
            </p>
            <p>Has someone any idea what is going on here?</p>
            <p>Looks like the workflow is running forever.</p>
        </div>

        <meta itemprop='headline' content='Orquesta workflow is not changing to successful. It is running forever'>
        <meta itemprop='keywords' content='orquesta, workflows'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/wingi'><span itemprop='name'>wingi</span></a>
            (Nikolas)
          </span>

            <link itemprop="mainEntityOfPage" href="1577.html">

            <link itemprop="image"
                  href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/e63d3e9a3c84eabe6e71c627de6cf669c8703265.png">

            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-02-25T18:24:42Z' class='post-time'>
                February 25, 2021,  6:24pm
              </time>
              <meta itemprop='dateModified' content='2021-02-25T18:24:42Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Update:</p>
            <p>After more than one hour it changed now to failed with following output:</p>
            <pre><code class="lang-auto">{
  "output": null,
  "errors": [
    {
      "message": "Execution failed. See result for details.",
      "type": "error",
      "task_id": "Do_Loop"
    },
    {
      "message": "ToozConnectionError: Timeout reading from socket",
      "type": "error",
      "route": 1,
      "task_id": "Do_Loop"
    }
  ]
}
</code></pre>
            <p>But the workflowengine log still goes on and by viewing the result in the WebUI, the finish time is still
                updated every time I click on the WFL:<br>
            <div class="lightbox-wrapper"><a class="lightbox"
                                             href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/e63d3e9a3c84eabe6e71c627de6cf669c8703265.png"
                                             data-download-href="/uploads/short-url/wQN26NCiF0o20hB1kLECPq9TNpX.png?dl=1"
                                             title="Bildschirmfoto 2021-02-25 um 19.18.59"
                                             rel="noopener nofollow ugc"><img
                    src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/e63d3e9a3c84eabe6e71c627de6cf669c8703265_2_690x343.png"
                    alt="Bildschirmfoto 2021-02-25 um 19.18.59" data-base62-sha1="wQN26NCiF0o20hB1kLECPq9TNpX"
                    width="690" height="343"
                    srcset="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/e63d3e9a3c84eabe6e71c627de6cf669c8703265_2_690x343.png, https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/e63d3e9a3c84eabe6e71c627de6cf669c8703265.png 1.5x, https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/e63d3e9a3c84eabe6e71c627de6cf669c8703265.png 2x"
                    data-small-upload="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/e63d3e9a3c84eabe6e71c627de6cf669c8703265_2_10x10.png">
                <div class="meta">
                    <svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true">
                        <use xlink:href="#far-image"></use>
                    </svg>
                    <span class="filename">Bildschirmfoto 2021-02-25 um 19.18.59</span><span class="informations">896√ó446 29.1 KB</span>
                    <svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true">
                        <use xlink:href="#discourse-expand"></use>
                    </svg>
                </div>
            </a></div>
            </p>
            <p>
            <div class="lightbox-wrapper"><a class="lightbox"
                                             href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/ad8134481c8fed80de1b5a90073972a8140ae856.png"
                                             data-download-href="/uploads/short-url/oKTq6X7HTvM3y534XZLGPkBylv0.png?dl=1"
                                             title="Bildschirmfoto 2021-02-25 um 19.20.24"
                                             rel="noopener nofollow ugc"><img
                    src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/ad8134481c8fed80de1b5a90073972a8140ae856_2_690x343.png"
                    alt="Bildschirmfoto 2021-02-25 um 19.20.24" data-base62-sha1="oKTq6X7HTvM3y534XZLGPkBylv0"
                    width="690" height="343"
                    srcset="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/ad8134481c8fed80de1b5a90073972a8140ae856_2_690x343.png, https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/ad8134481c8fed80de1b5a90073972a8140ae856.png 1.5x, https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/ad8134481c8fed80de1b5a90073972a8140ae856.png 2x"
                    data-small-upload="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/ad8134481c8fed80de1b5a90073972a8140ae856_2_10x10.png">
                <div class="meta">
                    <svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true">
                        <use xlink:href="#far-image"></use>
                    </svg>
                    <span class="filename">Bildschirmfoto 2021-02-25 um 19.20.24</span><span class="informations">896√ó446 33.8 KB</span>
                    <svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true">
                        <use xlink:href="#discourse-expand"></use>
                    </svg>
                </div>
            </a></div>
            </p>
        </div>

        <meta itemprop='headline' content='Orquesta workflow is not changing to successful. It is running forever'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/arms11'><span itemprop='name'>arms11</span></a>
            (Arms11)
          </span>

            <link itemprop="mainEntityOfPage" href="1577.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-02-25T21:54:58Z' class='post-time'>
                February 25, 2021,  9:54pm
              </time>
              <meta itemprop='dateModified' content='2021-02-25T21:54:58Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Not exactly the answer you might be looking for, but have you tried running this in shell script or
                python runner instead of <code>with-items</code> in a declarative way? Just trying to understand if
                there is a growing contention with a tight loop. I could be wrong. Also, what version of ST2 is this?
            </p>
        </div>

        <meta itemprop='headline' content='Orquesta workflow is not changing to successful. It is running forever'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/wingi'><span itemprop='name'>wingi</span></a>
            (Nikolas)
          </span>

            <link itemprop="mainEntityOfPage" href="1577.html">

            <link itemprop="image"
                  href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/7064f9b500e52f1477916856a86b8c03d9518991.png">

            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-02-26T14:26:56Z' class='post-time'>
                February 26, 2021,  2:26pm
              </time>
              <meta itemprop='dateModified' content='2021-02-26T14:26:56Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Hi,</p>
            <p>yes I although thought about redesigning it to just use one action from Stackstorm perspective but this
                only solves this case. I think in general it should be possible to use although many with-items to
                benefit from the modular idea of it.</p>
            <p>I used Stackstorm v3.2.0.</p>
            <p>After another hour, the time is now no longer changing and the logs stopped.<br>
            <div class="lightbox-wrapper"><a class="lightbox"
                                             href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/7064f9b500e52f1477916856a86b8c03d9518991.png"
                                             data-download-href="/uploads/short-url/g2hOySF4acHklsudNUSwHa7B4fn.png?dl=1"
                                             title="Bildschirmfoto 2021-02-26 um 15.24.48"
                                             rel="noopener nofollow ugc"><img
                    src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/7064f9b500e52f1477916856a86b8c03d9518991_2_690x294.png"
                    alt="Bildschirmfoto 2021-02-26 um 15.24.48" data-base62-sha1="g2hOySF4acHklsudNUSwHa7B4fn"
                    width="690" height="294"
                    srcset="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/7064f9b500e52f1477916856a86b8c03d9518991_2_690x294.png, https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/7064f9b500e52f1477916856a86b8c03d9518991.png 1.5x, https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/7064f9b500e52f1477916856a86b8c03d9518991.png 2x"
                    data-small-upload="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/7064f9b500e52f1477916856a86b8c03d9518991_2_10x10.png">
                <div class="meta">
                    <svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true">
                        <use xlink:href="#far-image"></use>
                    </svg>
                    <span class="filename">Bildschirmfoto 2021-02-26 um 15.24.48</span><span class="informations">904√ó386 24.5 KB</span>
                    <svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true">
                        <use xlink:href="#discourse-expand"></use>
                    </svg>
                </div>
            </a></div>
            </p>
        </div>

        <meta itemprop='headline' content='Orquesta workflow is not changing to successful. It is running forever'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/wingi'><span itemprop='name'>wingi</span></a>
            (Nikolas)
          </span>

            <link itemprop="mainEntityOfPage" href="1577.html">

            <link itemprop="image"
                  href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/1c7f89fa02cfdeaf70888670bf0bd1239e5106ea.png">

            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-03-03T11:01:53Z' class='post-time'>
                March 3, 2021, 11:01am
              </time>
              <meta itemprop='dateModified' content='2021-03-03T11:01:53Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>UPDATE - Complete summary:<br>
                Installation: Stackstorm OVA Image<br>
                Stackstorm v 3.2.0<br>
                Redis installed as coordination backend.</p>
            <p>I figured now out it is related to specific usage of with. Therefore I created two examples to
                demonstrate the behaviour. The examples contain less wfl context/data and is therefore faster than my
                real world use case, but in general it demonstrates the behaviour:</p>
            <p>Example 1:</p>
            <pre><code>version: 1.0
description: A debugging workflow.

input:
  - array: &lt;% list(range(60)) %&gt;

output:
  - Array: &lt;% ctx().array %&gt;

tasks:
  Start:
    action: core.echo
    input:
      message: "Start"
    next:
      - when: &lt;% completed() %&gt;
        publish:
        - result: &lt;% result() %&gt;
        do: Do_Loop

###Loop over array
    with: &lt;% ctx().array %&gt;
    action: core.echo
    input:
      message: "This is just a test Item: &lt;% item() %&gt;"
</code></pre>
            <p>Example 2:</p>
            <pre><code>version: 1.0
description: A debugging workflow.

input:
  - array: &lt;% list(range(60)) %&gt;

output:
  - Array: &lt;% ctx().array %&gt;

tasks:
  Start:
    action: core.echo
    input:
      message: "Start"
    next:
      - when: &lt;% completed() %&gt;
        publish:
        - result: &lt;% result() %&gt;
        do: Do_Loop

###Loop over array
    with:
        concurrency: 1
        items: &lt;% ctx().array %&gt;
    action: core.echo
    input:
      message: "This is just a test Item: &lt;% item() %&gt;"
</code></pre>
            <p>Behaviour:<br>
                Example 1:<br>
                Behaviour is seen as before described in my posts. The looped steps are executed without any real delay
                but after the last step the overall wfl still runs for additional ~25 seconds till it succeeds.<br>
            <div class="lightbox-wrapper"><a class="lightbox"
                                             href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/1c7f89fa02cfdeaf70888670bf0bd1239e5106ea.png"
                                             data-download-href="/uploads/short-url/446CrT0uFdnJVZJ91gx9Ze5LoQq.png?dl=1"
                                             title="Bildschirmfoto 2021-03-03 um 11.35.21"
                                             rel="noopener nofollow ugc"><img
                    src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/1c7f89fa02cfdeaf70888670bf0bd1239e5106ea_2_690x180.png"
                    alt="Bildschirmfoto 2021-03-03 um 11.35.21" data-base62-sha1="446CrT0uFdnJVZJ91gx9Ze5LoQq"
                    width="690" height="180"
                    srcset="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/1c7f89fa02cfdeaf70888670bf0bd1239e5106ea_2_690x180.png, https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/1c7f89fa02cfdeaf70888670bf0bd1239e5106ea_2_1035x270.png 1.5x, https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/1c7f89fa02cfdeaf70888670bf0bd1239e5106ea_2_1380x360.png 2x"
                    data-small-upload="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/1c7f89fa02cfdeaf70888670bf0bd1239e5106ea_2_10x10.png">
                <div class="meta">
                    <svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true">
                        <use xlink:href="#far-image"></use>
                    </svg>
                    <span class="filename">Bildschirmfoto 2021-03-03 um 11.35.21</span><span class="informations">3356√ó878 270 KB</span>
                    <svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true">
                        <use xlink:href="#discourse-expand"></use>
                    </svg>
                </div>
            </a></div>
            </p>
            <p>Example 2:<br>
                The looped steps are executed one after the other. After the last step was executed the overall wfl
                succeeds within 3 seconds.<br>
            <div class="lightbox-wrapper"><a class="lightbox"
                                             href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/c5246c58f4a1be6ba9b8b09632dc4b8942129b0a.png"
                                             data-download-href="/uploads/short-url/s80654waWGuT0q4Y5k7dD1U1soO.png?dl=1"
                                             title="Bildschirmfoto 2021-03-03 um 11.31.03"
                                             rel="noopener nofollow ugc"><img
                    src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/c5246c58f4a1be6ba9b8b09632dc4b8942129b0a_2_690x180.png"
                    alt="Bildschirmfoto 2021-03-03 um 11.31.03" data-base62-sha1="s80654waWGuT0q4Y5k7dD1U1soO"
                    width="690" height="180"
                    srcset="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/c5246c58f4a1be6ba9b8b09632dc4b8942129b0a_2_690x180.png, https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/c5246c58f4a1be6ba9b8b09632dc4b8942129b0a_2_1035x270.png 1.5x, https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/c5246c58f4a1be6ba9b8b09632dc4b8942129b0a_2_1380x360.png 2x"
                    data-small-upload="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/c5246c58f4a1be6ba9b8b09632dc4b8942129b0a_2_10x10.png">
                <div class="meta">
                    <svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true">
                        <use xlink:href="#far-image"></use>
                    </svg>
                    <span class="filename">Bildschirmfoto 2021-03-03 um 11.31.03</span><span class="informations">3356√ó878 266 KB</span>
                    <svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true">
                        <use xlink:href="#discourse-expand"></use>
                    </svg>
                </div>
            </a></div>
            </p>
            <p>In these examples it doesn‚Äôt seem to be an issue because it only takes 25 seconds to finish, but as you
                can see in my previous posts for the real world use case it takes hours which leads to issues.</p>
            <p>Can someone reproduce this issue?<br>
                Anything I can do to solve this issue while running actions in parallel?</p>
            <p>If any further info is needed, please let me know here or in Slack.</p>
            <p>Thanks.</p>
        </div>

        <meta itemprop='headline' content='Orquesta workflow is not changing to successful. It is running forever'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>


    <!-- :preload-content -->
    <footer class="noscript-footer-nav">
        <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='../../index.html'>Home</a>
            <a href="../../categories.html">Categories</a>
            <a href="https://forum.stackstorm.com/guidelines">FAQ/Guidelines</a>
            <a href="../../tos.html">Terms of Service</a>
            <a href="../../privacy.html">Privacy Policy</a>
        </nav>
    </footer>
</div>

<footer id='noscript-footer'>
    <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>


<section id='main'>
</section>


</body>
</html>
