<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device text-size-normal anon">
<head>
    <meta charset="utf-8">
    <title>Orquesta workflow tries to parse jinja inside json structure and fails. Error: expected token &#39;:&#39;,
        got &#39;}&#39; - workflows - StackStorm Support (ARCHIVED)</title>
    <meta name="description" content="Hello, 
I receive input for my workflow from an API containing JSON content. This JSON content does not contain valid Jinja expressions and I don‚Äôt want to parse any Jinja inside. 
Nevertheless it looks like this is the &amp;hellip;">
    <meta name="discourse_theme_id" content="2">
    <meta name="discourse_current_homepage" content="latest">
    <meta name="generator"
          content="Discourse 2.8.0.beta6 - https://github.com/discourse/discourse version a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787">
    <link rel="icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_32x32.PNG">
    <link rel="apple-touch-icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_180x180.PNG">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <link rel="canonical" href="1726.html"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://forum.stackstorm.com",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://forum.stackstorm.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml"
          title="StackStorm Support (ARCHIVED) Search">


    <link href="/../../stylesheets/color_definitions_base__2_3c5eec1ecf192052ea70b4afdab57a62bccc0604.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" class="light-scheme"/>

    <link href="/../../stylesheets/desktop_b2f2968742d41481357e0df259b51ce29f72481a.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" data-target="desktop"/>


    <meta name="fragment" content="!">


    <link id="manifest-link" rel="manifest" href="../../manifest.webmanifest" crossorigin="use-credentials">


    <link rel="alternate" type="application/rss+xml"
          title="RSS feed of &#39;Orquesta workflow tries to parse jinja inside json structure and fails. Error: expected token &#39;:&#39;, got &#39;}&#39;&#39;"
          href="1726.rss"/>
    <meta property="og:site_name" content="StackStorm Support (ARCHIVED)"/>
    <meta property="og:type" content="website"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:url"
          content="https://forum.stackstorm.com/t/orquesta-workflow-tries-to-parse-jinja-inside-json-structure-and-fails-error-expected-token-got/1726"/>
    <meta name="twitter:url"
          content="https://forum.stackstorm.com/t/orquesta-workflow-tries-to-parse-jinja-inside-json-structure-and-fails-error-expected-token-got/1726"/>
    <meta property="og:title"
          content="Orquesta workflow tries to parse jinja inside json structure and fails. Error: expected token &#39;:&#39;, got &#39;}&#39;"/>
    <meta name="twitter:title"
          content="Orquesta workflow tries to parse jinja inside json structure and fails. Error: expected token &#39;:&#39;, got &#39;}&#39;"/>
    <meta property="og:description"
          content="Hello,  I receive input for my workflow from an API containing JSON content. This JSON content does not contain valid Jinja expressions and I don‚Äôt want to parse any Jinja inside.  Nevertheless it looks like this is the default behaviour. Is there any possibility to not evaluate Jinja inside this JSON?  As example I created the following simplified test wfl for you:  version: 1.0  description: Parse error  vars:   - test_in: {           &quot;md5&quot;: &quot;93c8469e0ae544e3437a8762e35a48b2&quot;,           &quot;raw_h..."/>
    <meta name="twitter:description"
          content="Hello,  I receive input for my workflow from an API containing JSON content. This JSON content does not contain valid Jinja expressions and I don‚Äôt want to parse any Jinja inside.  Nevertheless it looks like this is the default behaviour. Is there any possibility to not evaluate Jinja inside this JSON?  As example I created the following simplified test wfl for you:  version: 1.0  description: Parse error  vars:   - test_in: {           &quot;md5&quot;: &quot;93c8469e0ae544e3437a8762e35a48b2&quot;,           &quot;raw_h..."/>
    <meta property="article:published_time" content="2021-06-04T09:26:21+00:00"/>
    <meta property="og:ignore_canonical" content="true"/>


    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "QAPage",
        "name": "Orquesta workflow tries to parse jinja inside json structure and fails. Error: expected token ':', got '}'",
        "mainEntity": {
            "@type": "Question",
            "name": "Orquesta workflow tries to parse jinja inside json structure and fails. Error: expected token ':', got '}'",
            "text": "Hello,\n\nI receive input for my workflow from an API containing JSON content. This JSON content does not contain valid Jinja expressions and I don‚Äôt want to parse any Jinja inside.\n\nNevertheless it looks like this is the default behaviour. Is there any possibility to not evaluate Jinja inside this JS&hellip;",
            "upvoteCount": 0,
            "answerCount": 0,
            "dateCreated": "2021-06-04T09:26:21.329Z",
            "author": {
                "@type": "Person",
                "name": "Nikolas"
            }
        }
    }
    </script>

    <meta id="data-discourse-setup" data-cdn="https://sjc6.discourse-cdn.com/standard10"
          data-base-url="https://forum.stackstorm.com" data-base-uri="" data-environment="production"
          data-letter-avatar-version="5_8fec8e114563efeaf5265573e510f08e"
          data-markdown-it-url="https://aws1.discourse-cdn.com/standard10/assets/markdown-it-bundle-31e9a9c535ca1801c26da78b0ff465821751a98f921c5cdc5457d7e5a69e9748.js"
          data-service-worker-url="service-worker.js" data-default-locale="en"
          data-asset-version="597e36448c9b51d0fa3b7e43ec1fd6d5" data-disable-custom-css="false"
          data-highlight-js-path="/highlight-js/forum.stackstorm.com/ac0f4aa001e1343346941766d72e0c1ae330832b.js"
          data-svg-sprite-path="/svg-sprite/forum.stackstorm.com/svg-2-c2ad434b1e06079c7e282124aed9938dc95b83ea.js"
          data-enable-js-error-reporting="true" data-color-scheme-is-dark="false" data-user-dark-scheme-id="-1"
          data-s3-cdn="https://aws1.discourse-cdn.com/standard10"
          data-s3-base-url="//discourse-cloud-file-uploads.s3.dualstack.us-west-2.amazonaws.com/standard10">

    <meta name="discourse/config/environment"
          content="%7B%22modulePrefix%22%3A%22discourse%22%2C%22environment%22%3A%22production%22%2C%22rootURL%22%3A%22%22%2C%22locationType%22%3A%22auto%22%2C%22historySupportMiddleware%22%3Afalse%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%2C%22EXTEND_PROTOTYPES%22%3A%7B%22Date%22%3Afalse%7D%2C%22_APPLICATION_TEMPLATE_WRAPPER%22%3Afalse%2C%22_DEFAULT_ASYNC_OBSERVERS%22%3Atrue%2C%22_JQUERY_INTEGRATION%22%3Atrue%7D%2C%22APP%22%3A%7B%22name%22%3A%22discourse%22%2C%22version%22%3A%222.8.0.beta6%20a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787%22%2C%22exportApplicationGlobal%22%3Atrue%7D%7D"/>
</head>

<body class="">


<header class="d-header">
    <div class="wrap">
        <div class="contents clearfix">
            <div class="title">
                <a href="../../index.html">
                    <picture>
                        <img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png"
                             alt="StackStorm Support (ARCHIVED)" id="site-logo"/>
                    </picture>
                </a>
            </div>

        </div>
    </div>
</header>

<div id="main-outlet" class="wrap" role="main">
    <!-- preload-content: -->

    <!-- EOF START -->
    <div class="container" id="main-container">
        <div id="ember11" class="ember-view"></div>
        <div id="ember12" class="controls ember-view"><!----></div>
        <div id="ember13" class="ember-view"><!----></div>
        <div id="ember14" class="ember-view">
            <div class="row">
                <div id="global-notice-alert-read-only" class="alert alert-info alert-read-only">
                    <!----> <span class="text">This site is in read only mode. Please continue to browse, but replying, likes, and other actions are disabled for now.</span>

                    <!---->    </div>
            </div>
            <div class="row">
                <div id="global-notice-alert-global-notice" class="alert alert-info alert-global-notice">
                    <!----> <span class="text"><h3>‚ö†Ô∏è We've moved!</h3>  <p> Hi there!<br><br> To reduce project dependency on 3rd party paid services the StackStorm TSC has decided to move the Q/A from this forum to <a
                        href="https://github.com/StackStorm/st2/discussions">Github Discussions</a>. This will make user experience better integrated with the native Github flow, as well as the questions closer to the community where they can provide answers. </p>  <p> Use üîó <b><a
                        href="https://github.com/StackStorm/st2/discussions" class="active">Github Discussions</a></b> to ask your questions. </p></span>

                    <!---->    </div>
            </div>
        </div>
        <div id="ember17" class="hidden create-topics-notice ember-view"><!----></div>
        <!---->
    </div>
    <!-- EOF END -->
    <div id="topic-title">
        <h1>
            <a href="1726.html">Orquesta workflow tries to parse jinja inside json structure and fails. Error: expected
                token &#39;:&#39;, got &#39;}&#39;</a>
        </h1>


        <div class="topic-category">
            <div class='discourse-tags list-tags'>
                <a href='../../tag/orquesta' class='discourse-tag' rel="tag">orquesta</a>,
                <a href='../../tag/workflows' class='discourse-tag' rel="tag">workflows</a>
            </div>
        </div>
    </div>


    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/wingi'><span itemprop='name'>wingi</span></a>
            (Nikolas)
          </span>

            <link itemprop="mainEntityOfPage" href="1726.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-04T09:26:21Z' class='post-time'>
                June 4, 2021,  9:26am
              </time>
              <meta itemprop='dateModified' content='2021-06-04T09:26:21Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Hello,</p>
            <p>I receive input for my workflow from an API containing JSON content. This JSON content does not contain
                valid Jinja expressions and I don‚Äôt want to parse any Jinja inside.<br>
                Nevertheless it looks like this is the default behaviour. Is there any possibility to not evaluate Jinja
                inside this JSON?</p>
            <p>As example I created the following simplified test wfl for you:</p>
            <pre><code class="lang-auto">version: 1.0

description: Parse error

vars:
  - test_in: {
          "md5": "93c8469e0ae544e3437a8762e35a48b2",
          "raw_headers": "X-Triage-Noise-Reduction: state=0
Subject: [EXT] +{{{{{ McAfee_SECURITY_SERVICE }}}}+
Thread-Topic: [EXT] +{{{{{ McAfee_SECURITY_SERVICE }}}}+
Thread-Index: AQHXU9CCsPPgqyQZN0Ort1HhdcR5dQ==
Date: Fri, 21 May 2021 13:48:06 +0000
...",
          "subject": "[EXT] +{{{{{ McAfee_SECURITY_SERVICE }}}}+",
          "processed_at": "2021-06-02T15:07:00.739Z"
        }

tasks:
  Testout:
    action: core.echo
    input:
      message: &lt;% ctx().test_in.processed_at %&gt;
</code></pre>
            <p>Already during the parsing of the input value the wfl crashes with following error:</p>
            <pre><code class="lang-auto">{
  "errors": [
    {
      "expression": "X-Triage-Noise-Reduction: state=0 Subject: [EXT] +{{{{{ McAfee_SECURITY_SERVICE }}}}+ Thread-Topic: [EXT] +{{{{{ McAfee_SECURITY_SERVICE }}}}+ Thread-Index: AQHXU9CCsPPgqyQZN0Ort1HhdcR5dQ== Date: Fri, 21 May 2021 13:48:06 +0000 ...",
      "message": "expected token ':', got '}'",
      "spec_path": "vars",
      "schema_path": "properties.vars",
      "language": "jinja",
      "type": "expression"
    },
    {
      "expression": "[EXT] +{{{{{ McAfee_SECURITY_SERVICE }}}}+",
      "message": "expected token ':', got '}'",
      "spec_path": "vars",
      "schema_path": "properties.vars",
      "language": "jinja",
      "type": "expression"
    }
  ],
  "output": null
}
</code></pre>
            <p>In my real world example the test_in content is part of a more complex structure and I don‚Äôt see any
                possibility to escape this characters or something like this.</p>
            <p>Any idea how to solve this issue are welcome.</p>
            <p>Thanks.<br>
                Nikolas</p>
        </div>

        <meta itemprop='headline'
              content='Orquesta workflow tries to parse jinja inside json structure and fails. Error: expected token &#39;:&#39;, got &#39;}&#39;'>
        <meta itemprop='keywords' content='orquesta, workflows'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/arms11'><span itemprop='name'>arms11</span></a>
            (Arms11)
          </span>

            <link itemprop="mainEntityOfPage" href="1726.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-04T12:07:16Z' class='post-time'>
                June 4, 2021, 12:07pm
              </time>
              <meta itemprop='dateModified' content='2021-06-04T12:07:16Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Might be unrelated but is it the mismatch between the opening brace (5 times) vs closing are 4?<br>
                Is it auto-generated somewhere where you may not have control over how it is built?</p>
            <p>We do use webhook trigger based rule where we pass <code>{something}</code> in the json and that does
                work in the rule processor. However, I could not when I had it <code>{{something}}</code> as it may be
                taken as jinja syntax!</p>
        </div>

        <meta itemprop='headline'
              content='Orquesta workflow tries to parse jinja inside json structure and fails. Error: expected token &#39;:&#39;, got &#39;}&#39;'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/wingi'><span itemprop='name'>wingi</span></a>
            (Nikolas)
          </span>

            <link itemprop="mainEntityOfPage" href="1726.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-06-04T12:29:41Z' class='post-time'>
                June 4, 2021, 12:29pm
              </time>
              <meta itemprop='dateModified' content='2021-06-04T12:29:41Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>not sure if it is the mismatch or if it already occurs when there are two or more braces. Nevertheless I
                can not influence the source. It is part of an email analysis workflow and it receives the message
                subject as it is in the mail given. In this case the subject contains 5 times { and 4 times }. There is
                no intention to be jinja syntax it is just by coincidence.</p>
        </div>

        <meta itemprop='headline'
              content='Orquesta workflow tries to parse jinja inside json structure and fails. Error: expected token &#39;:&#39;, got &#39;}&#39;'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>


    <!-- :preload-content -->
    <footer class="noscript-footer-nav">
        <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='../../index.html'>Home</a>
            <a href="../../categories.html">Categories</a>
            <a href="https://forum.stackstorm.com/guidelines">FAQ/Guidelines</a>
            <a href="../../tos.html">Terms of Service</a>
            <a href="../../privacy.html">Privacy Policy</a>
        </nav>
    </footer>
</div>

<footer id='noscript-footer'>
    <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>


<section id='main'>
</section>


</body>
</html>
