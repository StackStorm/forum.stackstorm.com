<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device text-size-normal anon">
<head>
    <meta charset="utf-8">
    <title>Passing output to slack from workflow - Mistral - StackStorm Support (ARCHIVED)</title>
    <meta name="description" content="Hello, 
I‚Äôm exploring stackstorm and getting used to it. I‚Äôm trying to automate to get top 5 cpu process when we get a cpu alert. I achieved that by following disk remediation example. However I‚Äôm facing issue with posti&amp;hellip;">
    <meta name="discourse_theme_id" content="2">
    <meta name="discourse_current_homepage" content="latest">
    <meta name="generator"
          content="Discourse 2.8.0.beta6 - https://github.com/discourse/discourse version a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787">
    <link rel="icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_32x32.PNG">
    <link rel="apple-touch-icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_180x180.PNG">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <link rel="canonical" href="504.html"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://forum.stackstorm.com",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://forum.stackstorm.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml"
          title="StackStorm Support (ARCHIVED) Search">


    <link href="/../../stylesheets/color_definitions_base__2_3c5eec1ecf192052ea70b4afdab57a62bccc0604.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" class="light-scheme"/>

    <link href="/../../stylesheets/desktop_b2f2968742d41481357e0df259b51ce29f72481a.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" data-target="desktop"/>


    <meta name="fragment" content="!">


    <link id="manifest-link" rel="manifest" href="../../manifest.webmanifest" crossorigin="use-credentials">


    <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Passing output to slack from workflow&#39;"
          href="504.rss"/>
    <meta property="og:site_name" content="StackStorm Support (ARCHIVED)"/>
    <meta property="og:type" content="website"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:url" content="https://forum.stackstorm.com/t/passing-output-to-slack-from-workflow/504"/>
    <meta name="twitter:url" content="https://forum.stackstorm.com/t/passing-output-to-slack-from-workflow/504"/>
    <meta property="og:title" content="Passing output to slack from workflow"/>
    <meta name="twitter:title" content="Passing output to slack from workflow"/>
    <meta property="og:description"
          content="Hello,  I‚Äôm exploring stackstorm and getting used to it. I‚Äôm trying to automate to get top 5 cpu process when we get a cpu alert. I achieved that by following disk remediation example. However I‚Äôm facing issue with posting the command output directly to slack. Kindly requesting your help.  Here‚Äôs my workflow(actions/workflows/check_cpu.yaml):  --- version: &#39;2.0&#39; name: ops.check_cpu  workflows:   main:     input:       - hostname       - event_id       - alert_message       - raw_payload      tas..."/>
    <meta name="twitter:description"
          content="Hello,  I‚Äôm exploring stackstorm and getting used to it. I‚Äôm trying to automate to get top 5 cpu process when we get a cpu alert. I achieved that by following disk remediation example. However I‚Äôm facing issue with posting the command output directly to slack. Kindly requesting your help.  Here‚Äôs my workflow(actions/workflows/check_cpu.yaml):  --- version: &#39;2.0&#39; name: ops.check_cpu  workflows:   main:     input:       - hostname       - event_id       - alert_message       - raw_payload      tas..."/>
    <meta name="twitter:label1" value="Reading time"/>
    <meta name="twitter:data1" value="4 mins üïë"/>
    <meta name="twitter:label2" value="Likes"/>
    <meta name="twitter:data2" value="1 ‚ù§"/>
    <meta property="article:published_time" content="2019-02-22T19:41:56+00:00"/>
    <meta property="og:ignore_canonical" content="true"/>


    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "QAPage",
        "name": "Passing output to slack from workflow",
        "mainEntity": {
            "@type": "Question",
            "name": "Passing output to slack from workflow",
            "text": "Hello,\n\nI‚Äôm exploring stackstorm and getting used to it. I‚Äôm trying to automate to get top 5 cpu process when we get a cpu alert. I achieved that by following disk remediation example. However I‚Äôm facing issue with posting the command output directly to slack. Kindly requesting your help.\n\nHere‚Äôs my&hellip;",
            "upvoteCount": 0,
            "answerCount": 1,
            "dateCreated": "2019-02-22T19:41:56.662Z",
            "author": {
                "@type": "Person",
                "name": "gmnvn"
            },
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "Yes, that‚Äôs for ChatOps, but it‚Äôs a similar syntax for what you need. Note that the result object is a list of results per hostname.\n\nTry this example <a href="
                https://forum.stackstorm.com/t/passing-output-to-slack-from-workflow/\&quot;https://github.com/StackStorm/st2cd/blob/2c29083494a84e55892475c7c31de56d07a209af/actions/workflows/st2_get_installed_version.yaml#L24\"" class=\"inline-onebox\" rel=\"nofollow noopener\">st2cd/st2_get_installed_version.yaml at 2c29083494a84e55892475c7c31de56d07a209af ¬∑ StackStorm/st2cd ¬∑ GitHub<\/a>","upvoteCount":1,"dateCreated":"2019-02-25T15:54:12.569Z","url":"https://forum.stackstorm.com/t/passing-output-to-slack-from-workflow/504/7","author":{"@type":"Person","name":"lhill"}}}}
    </script>

    <meta id="data-discourse-setup" data-cdn="https://sjc6.discourse-cdn.com/standard10"
          data-base-url="https://forum.stackstorm.com" data-base-uri="" data-environment="production"
          data-letter-avatar-version="5_8fec8e114563efeaf5265573e510f08e"
          data-markdown-it-url="https://aws1.discourse-cdn.com/standard10/assets/markdown-it-bundle-31e9a9c535ca1801c26da78b0ff465821751a98f921c5cdc5457d7e5a69e9748.js"
          data-service-worker-url="service-worker.js" data-default-locale="en"
          data-asset-version="597e36448c9b51d0fa3b7e43ec1fd6d5" data-disable-custom-css="false"
          data-highlight-js-path="/highlight-js/forum.stackstorm.com/ac0f4aa001e1343346941766d72e0c1ae330832b.js"
          data-svg-sprite-path="/svg-sprite/forum.stackstorm.com/svg-2-c2ad434b1e06079c7e282124aed9938dc95b83ea.js"
          data-enable-js-error-reporting="true" data-color-scheme-is-dark="false" data-user-dark-scheme-id="-1"
          data-s3-cdn="https://aws1.discourse-cdn.com/standard10"
          data-s3-base-url="//discourse-cloud-file-uploads.s3.dualstack.us-west-2.amazonaws.com/standard10">

    <meta name="discourse/config/environment"
          content="%7B%22modulePrefix%22%3A%22discourse%22%2C%22environment%22%3A%22production%22%2C%22rootURL%22%3A%22%22%2C%22locationType%22%3A%22auto%22%2C%22historySupportMiddleware%22%3Afalse%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%2C%22EXTEND_PROTOTYPES%22%3A%7B%22Date%22%3Afalse%7D%2C%22_APPLICATION_TEMPLATE_WRAPPER%22%3Afalse%2C%22_DEFAULT_ASYNC_OBSERVERS%22%3Atrue%2C%22_JQUERY_INTEGRATION%22%3Atrue%7D%2C%22APP%22%3A%7B%22name%22%3A%22discourse%22%2C%22version%22%3A%222.8.0.beta6%20a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787%22%2C%22exportApplicationGlobal%22%3Atrue%7D%7D"/>
</head>

<body class="">


<header class="d-header">
    <div class="wrap">
        <div class="contents clearfix">
            <div class="title">
                <a href="../../index.html">
                    <picture>
                        <img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png"
                             alt="StackStorm Support (ARCHIVED)" id="site-logo"/>
                    </picture>
                </a>
            </div>

        </div>
    </div>
</header>

<div id="main-outlet" class="wrap" role="main">
    <!-- preload-content: -->

    <!-- EOF START -->
    <div class="container" id="main-container">
        <div id="ember11" class="ember-view"></div>
        <div id="ember12" class="controls ember-view"><!----></div>
        <div id="ember13" class="ember-view"><!----></div>
        <div id="ember14" class="ember-view">
            <div class="row">
                <div id="global-notice-alert-read-only" class="alert alert-info alert-read-only">
                    <!----> <span class="text">This site is in read only mode. Please continue to browse, but replying, likes, and other actions are disabled for now.</span>

                    <!---->    </div>
            </div>
            <div class="row">
                <div id="global-notice-alert-global-notice" class="alert alert-info alert-global-notice">
                    <!----> <span class="text"><h3>‚ö†Ô∏è We've moved!</h3>  <p> Hi there!<br><br> To reduce project dependency on 3rd party paid services the StackStorm TSC has decided to move the Q/A from this forum to <a
                        href="https://github.com/StackStorm/st2/discussions">Github Discussions</a>. This will make user experience better integrated with the native Github flow, as well as the questions closer to the community where they can provide answers. </p>  <p> Use üîó <b><a
                        href="https://github.com/StackStorm/st2/discussions" class="active">Github Discussions</a></b> to ask your questions. </p></span>

                    <!---->    </div>
            </div>
        </div>
        <div id="ember17" class="hidden create-topics-notice ember-view"><!----></div>
        <!---->
    </div>
    <!-- EOF END -->
    <div id="topic-title">
        <h1>
            <a href="504.html">Passing output to slack from workflow</a>
        </h1>

        <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/workflow-related-issues/15" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Workflows</span>
              </span>
            </a>
            <meta itemprop="position" content="1"/>
          </span>
            <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/workflow-related-issues/mistral-related-issues/16" class="badge-wrapper bullet"
               itemprop="item">
              <span class='badge-category-bg' style='background-color: #652D90'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Mistral</span>
              </span>
            </a>
            <meta itemprop="position" content="2"/>
          </span>
        </div>

    </div>


    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/gmnvn18'><span itemprop='name'>gmnvn18</span></a>
            (gmnvn)
          </span>

            <link itemprop="mainEntityOfPage" href="504.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-02-22T19:41:56Z' class='post-time'>
                February 22, 2019,  7:41pm
              </time>
              <meta itemprop='dateModified' content='2019-02-22T19:43:33Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Hello,</p>
            <p>I‚Äôm exploring stackstorm and getting used to it. I‚Äôm trying to automate to get top 5 cpu process when we
                get a cpu alert. I achieved that by following disk remediation example. However I‚Äôm facing issue with
                posting the command output directly to slack. Kindly requesting your help.</p>
            <p>Here‚Äôs my workflow(<em>actions/workflows/check_cpu.yaml</em>):</p>
            <pre><code>---
version: '2.0'
name: ops.check_cpu

workflows:
  main:
    input:
      - hostname
      - event_id
      - alert_message
      - raw_payload

    tasks:
      check_process:
        action: core.remote
        input:
          hosts: &lt;% $.hostname %&gt;
          cmd: "ps -eo pid,pcpu,user,args --sort=-%cpu | head -6 | head -c 1000"
        on-error:
          - pagerduty_escalation
        on-success:
          - post_to_slack

      pagerduty_escalation:
        action: pagerduty.incident.create.rest_v2.simple
        input:
          service_id: "PxxxxxxN"
          title: "Stackstorm Check CPU failed on &lt;% $.hostname %&gt;"
          from_email: "xxxxx@xxxxx.com"
          details: "Stackstorm could not autoremediate high cpu usage on &lt;% $.hostname %&gt;. Alert: &lt;% $.alert_message %&gt;"

      post_to_slack:
        action: slack.post_message
        input:
          channel: "#stackstorm"
          message: "High CPU Usage triggered from: &lt;% $.hostname %&gt;. Here's the processes details:\n&lt;% task(check_process).result.stdout %&gt;"
</code></pre>
            <p>Here‚Äôs the action chain(actions/chains/check_cpu.yaml):</p>
            <pre><code>---
  chain:
    -
      name: "check_process"
      ref: "core.remote"
      params:
        hosts: "{{hostname}}"
        cmd: "ps -eo pid,pcpu,user,args --sort=-%cpu | head -6"
      on-success: "post_to_slack"
      on-failure: "pagerduty_escalation"
    -
      name: "pagerduty_escalation"
      ref: "pagerduty.incident.create.rest_v2.simple"
      params:
        service_id: "PxxxxxN"
        title: "Stackstorm Check CPU failed on {{hostname}}"
        from_email: "xxxxxx@xxxxx.com"
        details: "Stackstorm could not autoremediate high cpu usage on {{hostname}}. Alert: {{alert_message}}"
    -
      name: "post_to_slack"
      ref: "slack.post_message"
      params:
        channel: "#stackstorm"
        message: "Stackstorm got a cpu alert &amp; has got top 5 cpu consuming processes on {{hostname}}. Details:\n{{ check_process.stdout }}"
  default: "check_process"
</code></pre>
            <p>Here‚Äôs the Error I‚Äôm seeing in the UI console:</p>
            <pre><code class="lang-auto">{
  "tasks": [
    {
      "state_info": null,
      "name": "check_process",
      "workflow_name": "ops.check_cpu.main",
      "created_at": "2019-02-22 19:30:53",
      "updated_at": "2019-02-22 19:30:54",
      "workflow_execution_id": "47529098-87e4-49b8-beaa-ce320ab9f432",
      "state": "SUCCESS",
      "result": {
        "10.146.74.91": {
          "succeeded": true,
          "failed": false,
          "return_code": 0,
          "stderr": "",
          "stdout": "  PID %CPU USER     COMMAND\
 9032 61.1 root     /usr/bin/python2.7 /usr/bin/aws s3 sync /media/ebs/logs s3://dev.canopydata.com/logserver\
17787 23.9 root     /usr/bin/java -Xms1g -Xmx1g -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djruby.compile.invokedynamic=true -Djruby.jit.threshold=0 -XX:+HeapDumpOnOutOfMemoryError -Djava.security.egd=file:/dev/urandom -cp /usr/lib/logstash-6.2.3/logstash-core/lib/jars/animal-sniffer-annotations-1.14.jar:/usr/lib/logstash-6.2.3/logstash-core/lib/jars/commons-compiler-3.0.8.jar:/usr/lib/logstash-6.2.3/logstash-core/lib/jars/error_prone_annotations-2.0.18.jar:/usr/lib/logstash-6.2.3/logstash-core/lib/jars/google-java-format-1.5.jar:/usr/lib/logstash-6.2.3/logstash-core/lib/jars/guava-22.0.jar:/usr/lib/logstash-6.2.3/logstash-core/lib/jars/j2objc-annotations-1.1.jar:/usr/lib/logstash-6.2.3/logstash-core/lib/jars/jackson-annotations-2.9."
        }
      },
      "published": {},
      "input": null,
      "id": "bc149571-1d49-4b68-9320-d87bd668fe1d"
    },
    {
      "state_info": "Failed to run task [error=Can not evaluate YAQL expression [expression=task(check_process).result.stdout, error=u'stdout', data={}], wf=ops.check_cpu.main, task=post_to_slack]:
Traceback (most recent call last):
  File \"/opt/stackstorm/mistral/lib/python2.7/site-packages/mistral/engine/task_handler.py\", line 63, in run_task
    task.run()
  File \"/opt/stackstorm/mistral/lib/python2.7/site-packages/osprofiler/profiler.py\", line 159, in wrapper
    result = f(*args, **kwargs)
  File \"/opt/stackstorm/mistral/lib/python2.7/site-packages/mistral/engine/tasks.py\", line 374, in run
    self._run_new()
  File \"/opt/stackstorm/mistral/lib/python2.7/site-packages/osprofiler/profiler.py\", line 159, in wrapper
    result = f(*args, **kwargs)
  File \"/opt/stackstorm/mistral/lib/python2.7/site-packages/mistral/engine/tasks.py\", line 403, in _run_new
    self._schedule_actions()
  File \"/opt/stackstorm/mistral/lib/python2.7/site-packages/mistral/engine/tasks.py\", line 470, in _schedule_actions
    input_dict = self._get_action_input()
  File \"/opt/stackstorm/mistral/lib/python2.7/site-packages/osprofiler/profiler.py\", line 159, in wrapper
    result = f(*args, **kwargs)
  File \"/opt/stackstorm/mistral/lib/python2.7/site-packages/mistral/engine/tasks.py\", line 500, in _get_action_input
    input_dict = self._evaluate_expression(self.task_spec.get_input(), ctx)
  File \"/opt/stackstorm/mistral/lib/python2.7/site-packages/mistral/engine/tasks.py\", line 524, in _evaluate_expression
    ctx_view
  File \"/opt/stackstorm/mistral/lib/python2.7/site-packages/mistral/expressions/__init__.py\", line 100, in evaluate_recursively
    data[key] = _evaluate_item(data[key], context)
  File \"/opt/stackstorm/mistral/lib/python2.7/site-packages/mistral/expressions/__init__.py\", line 89, in _evaluate_item
    return evaluate_recursively(item, context)
  File \"/opt/stackstorm/mistral/lib/python2.7/site-packages/mistral/expressions/__init__.py\", line 100, in evaluate_recursively
    data[key] = _evaluate_item(data[key], context)
  File \"/opt/stackstorm/mistral/lib/python2.7/site-packages/mistral/expressions/__init__.py\", line 79, in _evaluate_item
    return evaluate(item, context)
  File \"/opt/stackstorm/mistral/lib/python2.7/site-packages/mistral/expressions/__init__.py\", line 71, in evaluate
    return evaluator.evaluate(expression, context)
  File \"/opt/stackstorm/mistral/lib/python2.7/site-packages/mistral/expressions/yaql_expression.py\", line 119, in evaluate
    cls).evaluate(trim_expr, data_context)
  File \"/opt/stackstorm/mistral/lib/python2.7/site-packages/mistral/expressions/yaql_expression.py\", line 73, in evaluate
    \", data=%s]\" % (expression, str(e), data_context)
YaqlEvaluationException: Can not evaluate YAQL expression [expression=task(check_process).result.stdout, error=u'stdout', data={}]
",
</code></pre>
        </div>

        <meta itemprop='headline' content='Passing output to slack from workflow'>
        <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/blag'><span itemprop='name'>blag</span></a>
            
          </span>

            <link itemprop="mainEntityOfPage" href="504.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-02-22T19:49:18Z' class='post-time'>
                February 22, 2019,  7:49pm
              </time>
              <meta itemprop='dateModified' content='2019-02-22T19:49:18Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>I suspect you might be missing a <code>.result</code>, try this:</p>
            <pre><code class="lang-auto">&lt;% task(check_process).result.result.stdout %&gt;
</code></pre>
            <p>If that doesn‚Äôt work, try to echo the <code>task(check_process).result</code>:</p>
            <pre><code class="lang-yaml">    tasks:
      check_process:
        action: core.remote
        input:
          hosts: &lt;% $.hostname %&gt;
          cmd: "ps -eo pid,pcpu,user,args --sort=-%cpu | head -6 | head -c 1000"
        on-error:
          - pagerduty_escalation
        on-success:
          - echo_result
          - post_to_slack

      pagerduty_escalation:
        action: pagerduty.incident.create.rest_v2.simple
        input:
          service_id: "PxxxxxxN"
          title: "Stackstorm Check CPU failed on &lt;% $.hostname %&gt;"
          from_email: "xxxxx@xxxxx.com"
          details: "Stackstorm could not autoremediate high cpu usage on &lt;% $.hostname %&gt;. Alert: &lt;% $.alert_message %&gt;"

      echo_result:
        action: core.echo
        input:
          message: "&lt;% str(task(check_process).result) %&gt;"

      post_to_slack:
        action: slack.post_message
        input:
          channel: "#stackstorm"
          message: "High CPU Usage triggered from: &lt;% $.hostname %&gt;. Here's the processes details:\n&lt;% task(check_process).result.stdout %&gt;"
</code></pre>
            <p>then you should be able to see what <code>task(check_process).result</code> is in the StackStorm web UI.
            </p>
        </div>

        <meta itemprop='headline' content='Passing output to slack from workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/gmnvn18'><span itemprop='name'>gmnvn18</span></a>
            (gmnvn)
          </span>

            <link itemprop="mainEntityOfPage" href="504.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-02-22T20:00:49Z' class='post-time'>
                February 22, 2019,  8:00pm
              </time>
              <meta itemprop='dateModified' content='2019-02-22T20:04:40Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Hi, Thanks for reply!</p>
            <p>I tried <code>&lt;% task(check_process).result.result.stdout %&gt;</code> but that didn‚Äôt work, got the
                same error message as invalid YAQL expression:</p>
            <pre><code class="lang-auto">      "state_info": "Failed to run task [error=Can not evaluate YAQL expression [expression=task(check_process).result.result.stdout, error=u'result', data={}], wf=ops.check_cpu.main, task=post_to_slack]:
Traceback (most recent call last):
</code></pre>
            <p>As you suggested when i tried echo, i see the stdout is null.</p>
            <pre><code class="lang-auto">{
  "tasks": [
    {
      "state_info": null,
      "name": "check_process",
      "workflow_name": "ops.check_cpu.main",
      "created_at": "2019-02-22 19:56:03",
      "updated_at": "2019-02-22 19:56:05",
      "workflow_execution_id": "9003c8de-1734-462e-bd36-dd4e4d50d634",
      "state": "SUCCESS",
      "result": {
        "10.146.74.91": {
          "succeeded": true,
          "failed": false,
          "return_code": 0,
          "stderr": "",
          "stdout": "  PID %CPU USER     COMMAND\
 9032 60.1 root     /usr/bin/python2.7 /usr/bin/aws s3 sync /media/ebs/logs s3://dev.canopydata.com/logserver\
17787 23.9 root     /usr/bin/java -Xms1g -Xmx1g -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djruby.compile.invokedynamic=true -Djruby.jit.threshold=0 -XX:+HeapDumpOnOutOfMemoryError -Djava.security.egd=file:/dev/urandom -cp /usr/lib/logstash-6.2.3/logstash-core/lib/jars/animal-sniffer-annotations-1.14.jar:/usr/lib/logstash-6.2.3/logstash-core/lib/jars/commons-compiler-3.0.8.jar:/usr/lib/logstash-6.2.3/logstash-core/lib/jars/error_prone_annotations-2.0.18.jar:/usr/lib/logstash-6.2.3/logstash-core/lib/jars/google-java-format-1.5.jar:/usr/lib/logstash-6.2.3/logstash-core/lib/jars/guava-22.0.jar:/usr/lib/logstash-6.2.3/logstash-core/lib/jars/j2objc-annotations-1.1.jar:/usr/lib/logstash-6.2.3/logstash-core/lib/jars/jackson-annotations-2.9."
        }
      },
      "published": {},
      "input": null,
      "id": "18081169-a7b2-462b-b0d8-35a214287e62"
    },
    {
      "state_info": null,
      "name": "echo_result",
      "workflow_name": "ops.check_cpu.main",
      "created_at": "2019-02-22 19:56:03",
      "updated_at": "2019-02-22 19:56:04",
      "workflow_execution_id": "9003c8de-1734-462e-bd36-dd4e4d50d634",
      "state": "SUCCESS",
      "result": {
        "failed": false,
        "stderr": "",
        "return_code": 0,
        "succeeded": true,
        "stdout": []
      },
      "published": {},
      "input": null,
      "id": "08b8f123-fd10-41b2-be95-185bff49ec4f"
    },
    {
      "state_info": "Failed to run task [error=Can not evaluate YAQL expression [expression=task(check_process).result.stdout, error=u'stdout', data={}], wf=ops.check_cpu.main, task=post_to_slack]:
Traceback (most recent call last):
</code></pre>
            <p>But the stdout is present in the task: check_process, how should i call that into slack message ?</p>
            <p>Another naive question, I‚Äôve added ‚Äúecho_result‚Äù in workflow and tested, should i same module in
                chains/check_cpu.yaml as well, did that null value came due to no action for that in chain ?</p>
            <p>Thanks!</p>
        </div>

        <meta itemprop='headline' content='Passing output to slack from workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/lhill'><span itemprop='name'>lhill</span></a>
            (Lindsay Hill)
          </span>

            <link itemprop="mainEntityOfPage" href="504.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-02-22T21:55:43Z' class='post-time'>
                February 22, 2019,  9:55pm
              </time>
              <meta itemprop='dateModified' content='2019-02-22T21:55:43Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>It‚Äôs not <code>result.stdout</code> - the result object is a list of results per host.</p>
        </div>

        <meta itemprop='headline' content='Passing output to slack from workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/lhill'><span itemprop='name'>lhill</span></a>
            (Lindsay Hill)
          </span>

            <link itemprop="mainEntityOfPage" href="504.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-02-22T21:56:34Z' class='post-time'>
                February 22, 2019,  9:56pm
              </time>
              <meta itemprop='dateModified' content='2019-02-22T21:56:34Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Look at <a href="../chatops-w-slack-not-working/497/5.html" class="inline-onebox">ChatOps w/ Slack not
                working</a> for an example</p>
        </div>

        <meta itemprop='headline' content='Passing output to slack from workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/gmnvn18'><span itemprop='name'>gmnvn18</span></a>
            (gmnvn)
          </span>

            <link itemprop="mainEntityOfPage" href="504.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-02-25T06:21:26Z' class='post-time'>
                February 25, 2019,  6:21am
              </time>
              <meta itemprop='dateModified' content='2019-02-25T06:21:26Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Hi,</p>
            <p>The link you mentioned talks about ‚Äúaction aliases‚Äù from chatops.</p>
            <p>I tried:<br>
                workflows/check_cpu.yaml</p>
            <pre><code class="lang-auto">      post_to_slack:
        action: slack.post_message
        input:
          channel: "#stackstorm"
          message: "Stackstorm got a cpu alert &amp; has got top 5 cpu consuming processes on &lt;% $.hostname %&gt;. Details:\n&lt;% task(check_process).$.hostname.result.stdout %&gt;"
</code></pre>
            <p>chains/check_cpu.yaml:</p>
            <pre><code class="lang-auto">     name: "post_to_slack"
     ref: "slack.post_message"
     params:
       channel: "#stackstorm"
       message: "Stackstorm got a cpu alert &amp; has got top 5 cpu consuming processes on {{hostname}}. Details:\n{{ execution.result[host].stdout }}"```

Still no luck. Still failing:
</code></pre>
            <pre><code>  "state_info": "Failed to run task [error=Can not evaluate YAQL expression [expression=task(check_process).$.hostname.result.stdout, error=No function \"#operator_.\" matches supplied arguments, data={}], wf=ops.check_cpu.main, task=post_to_slack]:
</code></pre>
            <p>Traceback (most recent call last):</p>
            <pre><code class="lang-auto"></code></pre>
        </div>

        <meta itemprop='headline' content='Passing output to slack from workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/lhill'><span itemprop='name'>lhill</span></a>
            (Lindsay Hill)
          </span>

            <link itemprop="mainEntityOfPage" href="504.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-02-25T15:54:12Z' class='post-time'>
                February 25, 2019,  3:54pm
              </time>
              <meta itemprop='dateModified' content='2019-02-25T15:54:12Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Yes, that‚Äôs for ChatOps, but it‚Äôs a similar syntax for what you need. Note that the result object is a
                <em>list</em> of results per hostname.</p>
            <p>Try this example <a
                    href="https://github.com/StackStorm/st2cd/blob/2c29083494a84e55892475c7c31de56d07a209af/actions/workflows/st2_get_installed_version.yaml#L24"
                    class="inline-onebox" rel="nofollow noopener">st2cd/st2_get_installed_version.yaml at
                2c29083494a84e55892475c7c31de56d07a209af ¬∑ StackStorm/st2cd ¬∑ GitHub</a></p>
        </div>

        <meta itemprop='headline' content='Passing output to slack from workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
            <span class='post-likes'>1 Like</span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/gmnvn18'><span itemprop='name'>gmnvn18</span></a>
            (gmnvn)
          </span>

            <link itemprop="mainEntityOfPage" href="504.html">

            <link itemprop="image"
                  href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/874cd0fd91c395ac3c177b961aa481babdf2873c.png">

            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-02-25T16:23:26Z' class='post-time'>
                February 25, 2019,  4:23pm
              </time>
              <meta itemprop='dateModified' content='2019-02-25T16:23:26Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <aside class="quote no-group" data-post="6" data-topic="504">
                <div class="title">
                    <div class="quote-controls"></div>
                    <img alt width="20" height="20" src="https://avatars.discourse.org/v2/letter/g/85e7bf/40.png"
                         class="avatar"> gmnvn18:
                </div>
                <blockquote>
                    <p>workflows/check_cpu.yaml</p>
                    <pre><code class="lang-auto">      post_to_slack:
        action: slack.post_message
        input:
          channel: "#stackstorm"
          message: "Stackstorm got a cpu alert &amp; has got top 5 cpu consuming processes on &lt;% $.hostname %&gt;. Details:\n&lt;% task(check_process).$.hostname.result.stdout %&gt;"
</code></pre>
                </blockquote>
            </aside>
            <p>in this instead of <code>&lt;% task(check_process).$.hostname.result.stdout %&gt;</code> , <code>&lt;%
                task(check_process).result.get($.hostname).stdout %&gt;</code> has worked.</p>
            <p>But have to say the output is really ugly in the slack <img
                    src="https://emoji.discourse-cdn.com/apple/slightly_smiling_face.png?v=9"
                    title=":slightly_smiling_face:" class="emoji" alt=":slightly_smiling_face:"><br>
            <div class="lightbox-wrapper"><a class="lightbox"
                                             href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/874cd0fd91c395ac3c177b961aa481babdf2873c.png"
                                             title="image.png" rel="nofollow noopener"><img
                    src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/874cd0fd91c395ac3c177b961aa481babdf2873c_2_690x203.png"
                    alt="image" width="690" height="203"
                    srcset="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/874cd0fd91c395ac3c177b961aa481babdf2873c_2_690x203.png, https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/874cd0fd91c395ac3c177b961aa481babdf2873c_2_1035x304.png 1.5x, https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/874cd0fd91c395ac3c177b961aa481babdf2873c_2_1380x406.png 2x"
                    data-small-upload="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/874cd0fd91c395ac3c177b961aa481babdf2873c_2_10x10.png">
                <div class="meta">
                    <svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true">
                        <use xlink:href="#far-image"></use>
                    </svg>
                    <span class="filename">image.png</span><span class="informations">1882√ó556 157 KB</span>
                    <svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true">
                        <use xlink:href="#discourse-expand"></use>
                    </svg>
                </div>
            </a></div>
            </p>
            <p>anyway!! thanks a lot for helping out as always.</p>
        </div>

        <meta itemprop='headline' content='Passing output to slack from workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/lhill'><span itemprop='name'>lhill</span></a>
            (Lindsay Hill)
          </span>

            <link itemprop="mainEntityOfPage" href="504.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-02-25T18:14:05Z' class='post-time'>
                February 25, 2019,  6:14pm
              </time>
              <meta itemprop='dateModified' content='2019-02-25T18:14:05Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Switch to Orquesta, that helps with some of the newline handling. And then just do some filtering of the
                output data.</p>
        </div>

        <meta itemprop='headline' content='Passing output to slack from workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/gmnvn18'><span itemprop='name'>gmnvn18</span></a>
            (gmnvn)
          </span>

            <link itemprop="mainEntityOfPage" href="504.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-02-25T18:26:34Z' class='post-time'>
                February 25, 2019,  6:26pm
              </time>
              <meta itemprop='dateModified' content='2019-02-25T18:26:34Z'>
          <span itemprop='position'>#10</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Thanks for the suggestion! Since I‚Äôm a learner, would definitely give a try to Orquesta.</p>
        </div>

        <meta itemprop='headline' content='Passing output to slack from workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/gmnvn18'><span itemprop='name'>gmnvn18</span></a>
            (gmnvn)
          </span>

            <link itemprop="mainEntityOfPage" href="504.html">

            <link itemprop="image"
                  href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/56bc3d903697604eda1f7193cc4d59955f853fba.png">

            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-27T11:00:03Z' class='post-time'>
                March 27, 2019, 11:00am
              </time>
              <meta itemprop='dateModified' content='2019-03-27T11:00:03Z'>
          <span itemprop='position'>#11</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p><a class="mention" href="https://github.com/lhill">@lhill</a> <a class="mention"
                                                                                            href="https://github.com/blag">@blag</a><br>
                I have a query regarding the output formatting in orquesta.</p>
            <p>I would like to post a message as ‚ÄúGot the cja-id: 0000000‚Äù</p>
            <p>In order to do that, I tried following the following possibilities, but all of them failed with ‚Äúmapping
                values are not allowed‚Äù error:</p>
            <pre><code class="lang-auto">publish: msg="Got the cja-id :&lt;% task(get_cjaid).result.get(ctx(logserver)).stdout %&gt;"
publish: msg="Got the cja-id : &lt;% task(get_cjaid).result.get(ctx(logserver)).stdout %&gt;"
publish: msg="Got the cja-id\: &lt;% task(get_cjaid).result.get(ctx(logserver)).stdout %&gt;"
publish: msg="Got the cja-id\\: &lt;% task(get_cjaid).result.get(ctx(logserver)).stdout %&gt;"
publish: msg="Got the cja-id \\: &lt;% task(get_cjaid).result.get(ctx(logserver)).stdout %&gt;"
</code></pre>
            <p>And the error:</p>
            <pre><code class="lang-auto">{
  "output": null,
  "errors": [
    {
      "message": "mapping values are not allowed here
  in \"&lt;string&gt;\", line 14, column 40:
     ...  publish: msg=\"Got the cja-id \\\\: &lt;% task(get_cjaid).result.get( ... 
                                         ^"
    }
  ]
}
</code></pre>
            <pre><code class="lang-auto">{
  "output": null,
  "errors": [
    {
      "message": "mapping values are not allowed here
  in \"&lt;string&gt;\", line 14, column 40:
     ...  publish: msg=\"Got the cja-id \\\\: &lt;% task(get_cjaid).result.get( ... 
                                         ^"
    }
  ]
}
</code></pre>
            <p>I‚Äôve taken <a href="https://docs.stackstorm.com/orquesta/languages/orquesta.html#workflow-model"
                             rel="nofollow noopener">this</a> as reference:<br>
            <div class="lightbox-wrapper"><a class="lightbox"
                                             href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/56bc3d903697604eda1f7193cc4d59955f853fba.png"
                                             title="image.png" rel="nofollow noopener"><img
                    src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/56bc3d903697604eda1f7193cc4d59955f853fba_2_690x392.png"
                    alt="image" width="690" height="392"
                    srcset="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/56bc3d903697604eda1f7193cc4d59955f853fba_2_690x392.png, https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/56bc3d903697604eda1f7193cc4d59955f853fba_2_1035x588.png 1.5x, https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/56bc3d903697604eda1f7193cc4d59955f853fba_2_1380x784.png 2x"
                    data-small-upload="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/56bc3d903697604eda1f7193cc4d59955f853fba_2_10x10.png">
                <div class="meta">
                    <svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true">
                        <use xlink:href="#far-image"></use>
                    </svg>
                    <span class="filename">image.png</span><span class="informations">1430√ó814 56.7 KB</span>
                    <svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true">
                        <use xlink:href="#discourse-expand"></use>
                    </svg>
                </div>
            </a></div>
            </p>
            <p>Requesting your help in how to format the message.</p>
        </div>

        <meta itemprop='headline' content='Passing output to slack from workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/lhill'><span itemprop='name'>lhill</span></a>
            (Lindsay Hill)
          </span>

            <link itemprop="mainEntityOfPage" href="504.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-27T13:56:04Z' class='post-time'>
                March 27, 2019,  1:56pm
              </time>
              <meta itemprop='dateModified' content='2019-03-27T13:56:04Z'>
          <span itemprop='position'>#12</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>I would start by making your code look more like the example. Move the <code>:</code></p>
        </div>

        <meta itemprop='headline' content='Passing output to slack from workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/gmnvn18'><span itemprop='name'>gmnvn18</span></a>
            (gmnvn)
          </span>

            <link itemprop="mainEntityOfPage" href="504.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-27T14:43:18Z' class='post-time'>
                March 27, 2019,  2:43pm
              </time>
              <meta itemprop='dateModified' content='2019-03-27T14:43:18Z'>
          <span itemprop='position'>#13</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Hi, do you mean that, we should not use <code>:</code> Sorry I didn‚Äôt get your message.</p>
            <p>As shown in the example, I written my task‚Ä¶ here‚Äôs the full snippet.</p>
            <pre><code class="lang-auto">  get_cjaid:
    action: core.remote hosts=&lt;% ctx(logserver) %&gt; cmd=&lt;% ctx(grep_cjaid) %&gt;
    next:
      - when: &lt;% succeeded() %&gt;
        publish: msg="Got the cja-id: &lt;% task(get_cjaid).result.get(ctx(logserver)).stdout %&gt;", cjaid=&lt;% task(get_cjaid).result.get(ctx(logserver)).stdout %&gt;
        do: post_to_slack, check_in_db
      - when: &lt;% failed() %&gt;
        publish: msg="Unable to get the cja id due to error &lt;% result() %&gt;"
        do: pagerduty_escalation
</code></pre>
            <p>But still getting the same error.</p>
        </div>

        <meta itemprop='headline' content='Passing output to slack from workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/lhill'><span itemprop='name'>lhill</span></a>
            (Lindsay Hill)
          </span>

            <link itemprop="mainEntityOfPage" href="504.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-27T16:27:01Z' class='post-time'>
                March 27, 2019,  4:27pm
              </time>
              <meta itemprop='dateModified' content='2019-03-27T16:27:01Z'>
          <span itemprop='position'>#14</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <aside class="quote no-group quote-modified" data-post="13" data-topic="504">
                <div class="title">
                    <div class="quote-controls"></div>
                    <img alt width="20" height="20" src="https://avatars.discourse.org/v2/letter/g/85e7bf/40.png"
                         class="avatar"> gmnvn18:
                </div>
                <blockquote>
                    <p>publish: msg=‚ÄúGot the cja-id: &lt;% task(get_cjaid).result.get(ctx(logserver)).stdout %&gt;‚Äù,
                        cjaid=&lt;% task(get_cjaid).result.get(ctx(logserver)).stdout %&gt;</p>
                </blockquote>
            </aside>
            <p>This line doesn‚Äôt look right. Why are you doing <code>&lt;%
                task(get_cjaid).result.get(ctx(logserver)).stdout %&gt;</code> twice in one line? Is that intentional?
            </p>
        </div>

        <meta itemprop='headline' content='Passing output to slack from workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

        <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
            <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                <a href="../config-var-in-workflow-definition/858/2.html" itemscope
                   itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                    <meta itemprop='url'
                          content='https://forum.stackstorm.com/t/config-var-in-workflow-definition/858/2'>
                    <span itemprop='name'>Config var in workflow definition?</span>
                </a>
                <meta itemprop='position' content='1'>
            </div>
        </div>
    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/gmnvn18'><span itemprop='name'>gmnvn18</span></a>
            (gmnvn)
          </span>

            <link itemprop="mainEntityOfPage" href="504.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-27T16:36:56Z' class='post-time'>
                March 27, 2019,  4:36pm
              </time>
              <meta itemprop='dateModified' content='2019-03-27T16:36:56Z'>
          <span itemprop='position'>#15</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Hi,</p>
            <p>I wanted to post a message to slack as well as declare one for a variable.</p>
            <p>Got the cja-id: 0000<br>
                cja-id = 0000</p>
            <p>PS: On the side note, even for the error function, getting same mapping error. Here there‚Äôs no clumsy
                variable declaration like the previous one.</p>
            <pre><code class="lang-auto">      - when: &lt;% failed() %&gt;
        publish: msg="Unable to get the cja id due to error: &lt;% result() %&gt;"
        do: pagerduty_escalation
</code></pre>
        </div>

        <meta itemprop='headline' content='Passing output to slack from workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/lhill'><span itemprop='name'>lhill</span></a>
            (Lindsay Hill)
          </span>

            <link itemprop="mainEntityOfPage" href="504.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-27T19:51:55Z' class='post-time'>
                March 27, 2019,  7:51pm
              </time>
              <meta itemprop='dateModified' content='2019-03-27T19:51:55Z'>
          <span itemprop='position'>#16</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>I would strip it back to the simplest possible thing you can - just publish the value you‚Äôre extracting,
                nothing else around it. Get that working, then add it more surrounding details, text messages, etc.</p>
        </div>

        <meta itemprop='headline' content='Passing output to slack from workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>


    <!-- :preload-content -->
    <footer class="noscript-footer-nav">
        <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='../../index.html'>Home</a>
            <a href="../../categories.html">Categories</a>
            <a href="https://forum.stackstorm.com/guidelines">FAQ/Guidelines</a>
            <a href="../../tos.html">Terms of Service</a>
            <a href="../../privacy.html">Privacy Policy</a>
        </nav>
    </footer>
</div>

<footer id='noscript-footer'>
    <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>


<section id='main'>
</section>


</body>
</html>
