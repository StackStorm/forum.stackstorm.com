<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device text-size-normal anon">
<head>
    <meta charset="utf-8">
    <title>Private pip and st2pack builder - docker - StackStorm Support (ARCHIVED)</title>
    <meta name="description" content="We are starting to move toward K8 and need assistance with the following. 
https://github.com/StackStorm/st2packs-dockerfiles/ looks pretty neat but how do we add our private pip repo (artifactory is what we use) to the &amp;hellip;">
    <meta name="discourse_theme_id" content="2">
    <meta name="discourse_current_homepage" content="latest">
    <meta name="generator"
          content="Discourse 2.8.0.beta6 - https://github.com/discourse/discourse version a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787">
    <link rel="icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_32x32.PNG">
    <link rel="apple-touch-icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_180x180.PNG">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <link rel="canonical" href="1556.html"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://forum.stackstorm.com",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://forum.stackstorm.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }</script>
    <link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml"
          title="StackStorm Support (ARCHIVED) Search">


    <link href="/../../stylesheets/color_definitions_base__2_3c5eec1ecf192052ea70b4afdab57a62bccc0604.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" class="light-scheme"/>

    <link href="/../../stylesheets/desktop_b2f2968742d41481357e0df259b51ce29f72481a.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" data-target="desktop"/>


    <meta name="fragment" content="!">


    <link id="manifest-link" rel="manifest" href="../../manifest.webmanifest" crossorigin="use-credentials">


    <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Private pip and st2pack builder&#39;"
          href="https://forum.stackstorm.com/t/private-pip-and-st2pack-builder/1556.rss"/>
    <meta property="og:site_name" content="StackStorm Support (ARCHIVED)"/>
    <meta property="og:type" content="website"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:url" content="https://forum.stackstorm.com/t/private-pip-and-st2pack-builder/1556"/>
    <meta name="twitter:url" content="https://forum.stackstorm.com/t/private-pip-and-st2pack-builder/1556"/>
    <meta property="og:title" content="Private pip and st2pack builder"/>
    <meta name="twitter:title" content="Private pip and st2pack builder"/>
    <meta property="og:description"
          content="We are starting to move toward K8 and need assistance with the following.  GitHub - StackStorm/st2packs-dockerfiles: Source for st2packs-builder and st2packs-runner images looks pretty neat but how do we add our private pip repo (artifactory is what we use) to the build process?"/>
    <meta name="twitter:description"
          content="We are starting to move toward K8 and need assistance with the following.  GitHub - StackStorm/st2packs-dockerfiles: Source for st2packs-builder and st2packs-runner images looks pretty neat but how do we add our private pip repo (artifactory is what we use) to the build process?"/>
    <meta property="article:published_time" content="2021-02-10T21:26:50+00:00"/>
    <meta property="og:ignore_canonical" content="true"/>


    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "QAPage",
        "name": "Private pip and st2pack builder",
        "mainEntity": {
            "@type": "Question",
            "name": "Private pip and st2pack builder",
            "text": "We are starting to move toward K8 and need assistance with the following.\n\n<a href="
            https://forum.stackstorm.com/t/private-pip-and-st2pack-builder/\&quot;https://github.com/StackStorm/st2packs-dockerfiles/\&quot;" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">GitHub - StackStorm/st2packs-dockerfiles: Source for st2packs-builder and st2packs-runner images<\/a> looks pretty neat but how do we add our private pip repo (artifactory is what we use) to the build process?","upvoteCount":0,"answerCount":0,"dateCreated":"2021-02-10T21:26:50.830Z","author":{"@type":"Person","name":"Chad"}}}</script>

    <meta id="data-discourse-setup" data-cdn="https://sjc6.discourse-cdn.com/standard10"
          data-base-url="https://forum.stackstorm.com" data-base-uri="" data-environment="production"
          data-letter-avatar-version="5_8fec8e114563efeaf5265573e510f08e"
          data-markdown-it-url="https://aws1.discourse-cdn.com/standard10/assets/markdown-it-bundle-31e9a9c535ca1801c26da78b0ff465821751a98f921c5cdc5457d7e5a69e9748.js"
          data-service-worker-url="service-worker.js" data-default-locale="en"
          data-asset-version="597e36448c9b51d0fa3b7e43ec1fd6d5" data-disable-custom-css="false"
          data-highlight-js-path="/highlight-js/forum.stackstorm.com/ac0f4aa001e1343346941766d72e0c1ae330832b.js"
          data-svg-sprite-path="/svg-sprite/forum.stackstorm.com/svg-2-c2ad434b1e06079c7e282124aed9938dc95b83ea.js"
          data-enable-js-error-reporting="true" data-color-scheme-is-dark="false" data-user-dark-scheme-id="-1"
          data-s3-cdn="https://aws1.discourse-cdn.com/standard10"
          data-s3-base-url="//discourse-cloud-file-uploads.s3.dualstack.us-west-2.amazonaws.com/standard10">

    <meta name="discourse/config/environment"
          content="%7B%22modulePrefix%22%3A%22discourse%22%2C%22environment%22%3A%22production%22%2C%22rootURL%22%3A%22%22%2C%22locationType%22%3A%22auto%22%2C%22historySupportMiddleware%22%3Afalse%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%2C%22EXTEND_PROTOTYPES%22%3A%7B%22Date%22%3Afalse%7D%2C%22_APPLICATION_TEMPLATE_WRAPPER%22%3Afalse%2C%22_DEFAULT_ASYNC_OBSERVERS%22%3Atrue%2C%22_JQUERY_INTEGRATION%22%3Atrue%7D%2C%22APP%22%3A%7B%22name%22%3A%22discourse%22%2C%22version%22%3A%222.8.0.beta6%20a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787%22%2C%22exportApplicationGlobal%22%3Atrue%7D%7D"/>
</head>

<body class="">


<header class="d-header">
    <div class="wrap">
        <div class="contents clearfix">
            <div class="title">
                <a href="../../index.html">
                    <picture>
                        <img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png"
                             alt="StackStorm Support (ARCHIVED)" id="site-logo"/>
                    </picture>
                </a>
            </div>

        </div>
    </div>
</header>

<div id="main-outlet" class="wrap" role="main">
    <!-- preload-content: -->

    <!-- EOF START -->
    <div class="container" id="main-container">
        <div id="ember11" class="ember-view"></div>
        <div id="ember12" class="controls ember-view"><!----></div>
        <div id="ember13" class="ember-view"><!----></div>
        <div id="ember14" class="ember-view">
            <div class="row">
                <div id="global-notice-alert-read-only" class="alert alert-info alert-read-only">
                    <!----> <span class="text">This site is in read only mode. Please continue to browse, but replying, likes, and other actions are disabled for now.</span>

                    <!---->    </div>
            </div>
            <div class="row">
                <div id="global-notice-alert-global-notice" class="alert alert-info alert-global-notice">
                    <!----> <span class="text"><h3>‚ö†Ô∏è We've moved!</h3>  <p> Hi there!<br><br> To reduce project dependency on 3rd party paid services the StackStorm TSC has decided to move the Q/A from this forum to <a
                        href="https://github.com/StackStorm/st2/discussions">Github Discussions</a>. This will make user experience better integrated with the native Github flow, as well as the questions closer to the community where they can provide answers. </p>  <p> Use üîó <b><a
                        href="https://github.com/StackStorm/st2/discussions" class="active">Github Discussions</a></b> to ask your questions. </p></span>

                    <!---->    </div>
            </div>
        </div>
        <div id="ember17" class="hidden create-topics-notice ember-view"><!----></div>
        <!---->
    </div>
    <!-- EOF END -->
    <div id="topic-title">
        <h1>
            <a href="1556.html">Private pip and st2pack builder</a>
        </h1>


        <div class="topic-category">
            <div class='discourse-tags list-tags'>
                <a href='../../tag/docker' class='discourse-tag' rel="tag">docker</a>
            </div>
        </div>
    </div>


    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/badchad'><span itemprop='name'>badchad</span></a>
            (Chad)
          </span>

            <link itemprop="mainEntityOfPage" href="1556.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-02-10T21:26:50Z' class='post-time'>
                February 10, 2021,  9:26pm
              </time>
              <meta itemprop='dateModified' content='2021-02-10T21:26:50Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>We are starting to move toward K8 and need assistance with the following.<br>
                <a href="https://github.com/StackStorm/st2packs-dockerfiles/" class="inline-onebox"
                   rel="noopener nofollow ugc">GitHub - StackStorm/st2packs-dockerfiles: Source for st2packs-builder and
                    st2packs-runner images</a> looks pretty neat but how do we add our private pip repo (artifactory is
                what we use) to the build process?</p>
        </div>

        <meta itemprop='headline' content='Private pip and st2pack builder'>
        <meta itemprop='keywords' content='docker'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/manisha-tanwar'><span
                    itemprop='name'>manisha-tanwar</span></a>
            (Manisha Tanwar)
          </span>

            <link itemprop="mainEntityOfPage" href="1556.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-02-16T09:40:41Z' class='post-time'>
                February 16, 2021,  9:40am
              </time>
              <meta itemprop='dateModified' content='2021-02-16T09:40:41Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Hi <a class="mention" href="https://github.com/badchad">@badchad</a></p>
            <p>I‚Äôm also using artifactory for custom pack image and This is what I‚Äôve setup:</p>
            <ol>
                <li>Cloned <a href="https://github.com/StackStorm/st2-dockerfiles" rel="noopener nofollow ugc">https://github.com/StackStorm/st2-dockerfiles</a>
                    , modified base image as per my requirements(Needed apt packages) and pushed all images to
                    artifactory.
                </li>
                <li>Then cloned <a href="https://github.com/StackStorm/st2packs-dockerfiles/"
                                   rel="noopener nofollow ugc">https://github.com/StackStorm/st2packs-dockerfiles/</a>
                    and changed all the <code>FROM</code> to my artifactory URL. Also did some changes to st2-image
                    Dockerfile to as per the requirements.(This is basically used for st2-cutom po which is created when
                    job runs.)
                </li>
                <li>In <a href="https://github.com/StackStorm/stackstorm-ha" rel="noopener nofollow ugc">https://github.com/StackStorm/stackstorm-ha</a>
                    mentioned repository URL to artifactory.
                </li>
            </ol>
            <p>I can help you out if you get some issues while following it.</p>
        </div>

        <meta itemprop='headline' content='Private pip and st2pack builder'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="2"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/harit'><span itemprop='name'>harit</span></a>
            (haritha)
          </span>

            <link itemprop="mainEntityOfPage" href="1556.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-02-19T11:10:58Z' class='post-time'>
                February 19, 2021, 11:10am
              </time>
              <meta itemprop='dateModified' content='2021-02-19T11:10:58Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Hi<br>
                I have build a new st2packs image while running a workflow it is showing a error at one task which I
                didnt get with previous image<br>
                ‚Äústderr‚Äù: ‚Äú/opt/stackstorm/virtualenvs/kafka/bin/python: /lib/x86_64-linux-gnu/libc.so.6: version
                `GLIBC_2.25‚Äô not found (required by /opt/stackstorm/virtualenvs/kafka/bin/python)\n‚Äù,</p>
        </div>

        <meta itemprop='headline' content='Private pip and st2pack builder'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/badchad'><span itemprop='name'>badchad</span></a>
            (Chad)
          </span>

            <link itemprop="mainEntityOfPage" href="1556.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-02-25T16:24:06Z' class='post-time'>
                February 25, 2021,  4:24pm
              </time>
              <meta itemprop='dateModified' content='2021-02-25T16:24:06Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>I finally ironed out how‚Ä¶ it was easier then I thought. One thing I don‚Äôt get is how large a single pack
                is. I looked at the virtual env and it‚Äôs HUGE and full of things I think are probably not needed.<br>
                Thanks for the help BTW</p>
        </div>

        <meta itemprop='headline' content='Private pip and st2pack builder'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/manisha-tanwar'><span
                    itemprop='name'>manisha-tanwar</span></a>
            (Manisha Tanwar)
          </span>

            <link itemprop="mainEntityOfPage" href="1556.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-02-25T21:23:41Z' class='post-time'>
                February 25, 2021,  9:23pm
              </time>
              <meta itemprop='dateModified' content='2021-02-25T21:23:41Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Yeah that‚Äôs the concern, if you‚Äôve more packages, image size would be huge‚Ä¶ In my case it was around
                1.5Gb and image build, helm upgrade used to take around 30 mins even for a small change.<br>
                I‚Äôve now removed custom image and using PVC instead and installing packs directly from browser or inside
                containers.</p>
        </div>

        <meta itemprop='headline' content='Private pip and st2pack builder'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>


    <!-- :preload-content -->
    <footer class="noscript-footer-nav">
        <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='../../index.html'>Home</a>
            <a href="../../categories.html">Categories</a>
            <a href="https://forum.stackstorm.com/guidelines">FAQ/Guidelines</a>
            <a href="../../tos.html">Terms of Service</a>
            <a href="../../privacy.html">Privacy Policy</a>
        </nav>
    </footer>
</div>

<footer id='noscript-footer'>
    <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>


<section id='main'>
</section>


</body>
</html>
