<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device text-size-normal anon">
<head>
    <meta charset="utf-8">
    <title>Questions regarding st2 pack on stackstorm HA in kubernetes - Operations - StackStorm Support
        (ARCHIVED)</title>
    <meta name="description" content="Hi Team, 
I have few queries regarding stackstorm packs for stackstorm ha on kubernetes. 
1)I figured out to how to create a docker image for service now and create a docker image and use it helm configuration 
2)I am tr&amp;hellip;">
    <meta name="discourse_theme_id" content="2">
    <meta name="discourse_current_homepage" content="latest">
    <meta name="generator"
          content="Discourse 2.8.0.beta6 - https://github.com/discourse/discourse version a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787">
    <link rel="icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_32x32.PNG">
    <link rel="apple-touch-icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_180x180.PNG">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <link rel="canonical" href="1484.html"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://forum.stackstorm.com",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://forum.stackstorm.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml"
          title="StackStorm Support (ARCHIVED) Search">


    <link href="/../../stylesheets/color_definitions_base__2_3c5eec1ecf192052ea70b4afdab57a62bccc0604.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" class="light-scheme"/>

    <link href="/../../stylesheets/desktop_b2f2968742d41481357e0df259b51ce29f72481a.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" data-target="desktop"/>


    <meta name="fragment" content="!">


    <link id="manifest-link" rel="manifest" href="../../manifest.webmanifest" crossorigin="use-credentials">


    <link rel="alternate" type="application/rss+xml"
          title="RSS feed of &#39;Questions regarding st2 pack on stackstorm HA in kubernetes&#39;"
          href="https://forum.stackstorm.com/t/questions-regarding-st2-pack-on-stackstorm-ha-in-kubernetes/1484.rss"/>
    <meta property="og:site_name" content="StackStorm Support (ARCHIVED)"/>
    <meta property="og:type" content="website"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:url"
          content="https://forum.stackstorm.com/t/questions-regarding-st2-pack-on-stackstorm-ha-in-kubernetes/1484"/>
    <meta name="twitter:url"
          content="https://forum.stackstorm.com/t/questions-regarding-st2-pack-on-stackstorm-ha-in-kubernetes/1484"/>
    <meta property="og:title" content="Questions regarding st2 pack on stackstorm HA in kubernetes"/>
    <meta name="twitter:title" content="Questions regarding st2 pack on stackstorm HA in kubernetes"/>
    <meta property="og:description"
          content="Hi Team,  I have few queries regarding stackstorm packs for stackstorm ha on kubernetes.  1)I figured out to how to create a docker image for service now and create a docker image and use it helm configuration  2)I am trying to copy the st2 packs from standalone server to the stackstorm ha in kubernetes.  The names are like test_ansible,hello_st2 etc  when I try to create a docker image gettign the error:  docker build -t st2packs_test:0.9 --build-arg PACKS=hello_st2 st2packs-image  2020-11-24 1..."/>
    <meta name="twitter:description"
          content="Hi Team,  I have few queries regarding stackstorm packs for stackstorm ha on kubernetes.  1)I figured out to how to create a docker image for service now and create a docker image and use it helm configuration  2)I am trying to copy the st2 packs from standalone server to the stackstorm ha in kubernetes.  The names are like test_ansible,hello_st2 etc  when I try to create a docker image gettign the error:  docker build -t st2packs_test:0.9 --build-arg PACKS=hello_st2 st2packs-image  2020-11-24 1..."/>
    <meta property="article:published_time" content="2020-11-24T15:26:58+00:00"/>
    <meta property="og:ignore_canonical" content="true"/>


    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "QAPage",
        "name": "Questions regarding st2 pack on stackstorm HA in kubernetes",
        "mainEntity": {
            "@type": "Question",
            "name": "Questions regarding st2 pack on stackstorm HA in kubernetes",
            "text": "Hi Team,\n\nI have few queries regarding stackstorm packs for stackstorm ha on kubernetes.\n\n1)I figured out to how to create a docker image for service now and create a docker image and use it helm configuration\n\n2)I am trying to copy the st2 packs from standalone server to the stackstorm ha in kubern&hellip;",
            "upvoteCount": 0,
            "answerCount": 1,
            "dateCreated": "2020-11-24T15:26:58.485Z",
            "author": {
                "@type": "Person",
                "name": "Nithin"
            },
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "Instead of:\n\n--build-arg PACKS=ansible jira\n\nyou need:\n\n--build-arg PACKS=&quot;ansible jira&quot;",
                "upvoteCount": 0,
                "dateCreated": "2020-11-24T15:58:49.677Z",
                "url": "https://forum.stackstorm.com/t/questions-regarding-st2-pack-on-stackstorm-ha-in-kubernetes/1484/2",
                "author": {
                    "@type": "Person",
                    "name": "armab"
                }
            }
        }
    }
    </script>

    <meta id="data-discourse-setup" data-cdn="https://sjc6.discourse-cdn.com/standard10"
          data-base-url="https://forum.stackstorm.com" data-base-uri="" data-environment="production"
          data-letter-avatar-version="5_8fec8e114563efeaf5265573e510f08e"
          data-markdown-it-url="https://aws1.discourse-cdn.com/standard10/assets/markdown-it-bundle-31e9a9c535ca1801c26da78b0ff465821751a98f921c5cdc5457d7e5a69e9748.js"
          data-service-worker-url="service-worker.js" data-default-locale="en"
          data-asset-version="597e36448c9b51d0fa3b7e43ec1fd6d5" data-disable-custom-css="false"
          data-highlight-js-path="/highlight-js/forum.stackstorm.com/ac0f4aa001e1343346941766d72e0c1ae330832b.js"
          data-svg-sprite-path="/svg-sprite/forum.stackstorm.com/svg-2-c2ad434b1e06079c7e282124aed9938dc95b83ea.js"
          data-enable-js-error-reporting="true" data-color-scheme-is-dark="false" data-user-dark-scheme-id="-1"
          data-s3-cdn="https://aws1.discourse-cdn.com/standard10"
          data-s3-base-url="//discourse-cloud-file-uploads.s3.dualstack.us-west-2.amazonaws.com/standard10">

    <meta name="discourse/config/environment"
          content="%7B%22modulePrefix%22%3A%22discourse%22%2C%22environment%22%3A%22production%22%2C%22rootURL%22%3A%22%22%2C%22locationType%22%3A%22auto%22%2C%22historySupportMiddleware%22%3Afalse%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%2C%22EXTEND_PROTOTYPES%22%3A%7B%22Date%22%3Afalse%7D%2C%22_APPLICATION_TEMPLATE_WRAPPER%22%3Afalse%2C%22_DEFAULT_ASYNC_OBSERVERS%22%3Atrue%2C%22_JQUERY_INTEGRATION%22%3Atrue%7D%2C%22APP%22%3A%7B%22name%22%3A%22discourse%22%2C%22version%22%3A%222.8.0.beta6%20a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787%22%2C%22exportApplicationGlobal%22%3Atrue%7D%7D"/>
</head>

<body class="">


<header class="d-header">
    <div class="wrap">
        <div class="contents clearfix">
            <div class="title">
                <a href="../../index.html">
                    <picture>
                        <img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png"
                             alt="StackStorm Support (ARCHIVED)" id="site-logo"/>
                    </picture>
                </a>
            </div>

        </div>
    </div>
</header>

<div id="main-outlet" class="wrap" role="main">
    <!-- preload-content: -->

    <!-- EOF START -->
    <div class="container" id="main-container">
        <div id="ember11" class="ember-view"></div>
        <div id="ember12" class="controls ember-view"><!----></div>
        <div id="ember13" class="ember-view"><!----></div>
        <div id="ember14" class="ember-view">
            <div class="row">
                <div id="global-notice-alert-read-only" class="alert alert-info alert-read-only">
                    <!----> <span class="text">This site is in read only mode. Please continue to browse, but replying, likes, and other actions are disabled for now.</span>

                    <!---->    </div>
            </div>
            <div class="row">
                <div id="global-notice-alert-global-notice" class="alert alert-info alert-global-notice">
                    <!----> <span class="text"><h3>‚ö†Ô∏è We've moved!</h3>  <p> Hi there!<br><br> To reduce project dependency on 3rd party paid services the StackStorm TSC has decided to move the Q/A from this forum to <a
                        href="https://github.com/StackStorm/st2/discussions">Github Discussions</a>. This will make user experience better integrated with the native Github flow, as well as the questions closer to the community where they can provide answers. </p>  <p> Use üîó <b><a
                        href="https://github.com/StackStorm/st2/discussions" class="active">Github Discussions</a></b> to ask your questions. </p></span>

                    <!---->    </div>
            </div>
        </div>
        <div id="ember17" class="hidden create-topics-notice ember-view"><!----></div>
        <!---->
    </div>
    <!-- EOF END -->
    <div id="topic-title">
        <h1>
            <a href="1484.html">Questions regarding st2 pack on stackstorm HA in kubernetes</a>
        </h1>

        <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/operations-related-issues/20" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #283890'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Operations</span>
              </span>
            </a>
            <meta itemprop="position" content="1"/>
          </span>
        </div>

        <div class="topic-category">
            <div class='discourse-tags list-tags'>
                <a href='../../tag/k8s' class='discourse-tag' rel="tag">k8s</a>,
                <a href='../../tag/docker' class='discourse-tag' rel="tag">docker</a>
            </div>
        </div>
    </div>


    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/nithinsubbaraj'><span
                    itemprop='name'>nithinsubbaraj</span></a>
            (Nithin)
          </span>

            <link itemprop="mainEntityOfPage" href="1484.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-11-24T15:26:58Z' class='post-time'>
                November 24, 2020,  3:26pm
              </time>
              <meta itemprop='dateModified' content='2020-11-24T16:15:23Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Hi Team,</p>
            <p>I have few queries regarding stackstorm packs for stackstorm ha on kubernetes.</p>
            <p>1)I figured out to how to create a docker image for service now and create a docker image and use it helm
                configuration</p>
            <p>2)I am trying to copy the st2 packs from standalone server to the stackstorm ha in kubernetes.<br>
                The names are like test_ansible,hello_st2 etc</p>
            <p>when I try to create a docker image gettign the error:</p>
            <p>docker build -t st2packs_test:0.9 --build-arg PACKS=hello_st2 st2packs-image</p>
            <p>2020-11-24 14:27:06,523 INFO [-] Installing pack ‚Äúhello_st2‚Äù<br>
                2020-11-24 14:27:06,839 ERROR [-] Failed to install pack ‚Äúhello_st2‚Äù: No record of the ‚Äúhello_st2‚Äù pack
                in the index.<br>
                The command ‚Äò/bin/sh -c /opt/stackstorm/st2/bin/st2-pack-install ${PACKS}‚Äô returned a non-zero code: 2
            </p>
            <p>Is there a way I can add the name to the index ,if so how to do</p>
            <p>[root@dc1udataocs301 st2packs-dockerfiles]# docker build -t st2packs_test:0.9 --build-arg PACKS=hello_st2
                st2packs-image<br>
                Sending build context to Docker daemon 5.662MB<br>
                Step 1/7 : ARG PACKS=‚Äúfile:///tmp/stackstorm-st2‚Äù<br>
                Step 2/7 : FROM stackstorm/st2packs:builder AS builder</p>
            <h1>Executing 2 build triggers</h1>
            <p>‚Äî&gt; Using cache<br>
                ‚Äî&gt; Running in da4ddcebc38b<br>
                Removing intermediate container da4ddcebc38b<br>
                ‚Äî&gt; 3b1cdbeeb9ab<br>
                Step 3/7 : COPY packs/hello_st2 /tmp/stackstorm-st2/<br>
                ‚Äî&gt; 20edfa1b5f12<br>
                Step 4/7 : RUN ls -la /tmp/stackstorm-st2<br>
                ‚Äî&gt; Running in 04766987ebc3<br>
                total 12<br>
                drwxr-xr-x 7 root root 137 Nov 24 14:26 .<br>
                drwxrwxrwt 1 root root 28 Nov 24 14:26 ‚Ä¶<br>
                drwxr-xr-x 2 root root 40 Aug 12 18:04 actions<br>
                drwxr-xr-x 2 root root 25 Aug 12 18:04 aliases<br>
                -rw-r‚Äìr-- 1 root root 3936 Aug 12 17:58 icon.png<br>
                -rw-r‚Äìr-- 1 root root 1285 Aug 12 17:58 pack.yaml<br>
                drwxr-xr-x 2 root root 65 Aug 12 18:04 policies<br>
                -rw-r‚Äìr-- 1 root root 9 Aug 12 17:58 requirements.txt<br>
                drwxr-xr-x 2 root root 24 Aug 12 18:04 rules<br>
                drwxr-xr-x 2 root root 44 Aug 12 18:04 sensors<br>
                Removing intermediate container 04766987ebc3<br>
                ‚Äî&gt; b685fd70a9da<br>
                Step 5/7 : RUN git config --global http.sslVerify false<br>
                ‚Äî&gt; Running in 8d38579121e3<br>
                Removing intermediate container 8d38579121e3<br>
                ‚Äî&gt; 4d6386076124<br>
                Step 6/7 : RUN /opt/stackstorm/st2/bin/st2-pack-install <span class="math">{PACKS}
 ---&gt; Running in 24a099672558
2020-11-24 14:27:06,523 INFO [-] Installing pack "hello_st2"
2020-11-24 14:27:06,839 ERROR [-] Failed to install pack "hello_st2": No record of the "hello_st2" pack in the index.
The command '/bin/sh -c /opt/stackstorm/st2/bin/st2-pack-install </span>{PACKS}‚Äô returned a non-zero code: 2</p>
            <p>3)I tried to create multiple st2packs eg:</p>
            <p>docker build --build-arg PACKS=servicenow ansible jira -t st2:0.1 st2packs-image</p>
            <p>but no luck then I tried</p>
            <p>docker build -t st2packs_test:0.2 --build-arg PACKS=servicenow --build-arg PACKS=ansible --build-arg
                PACKS=jira st2packs-image</p>
            <p>the command executes only the last one eg servicenow ,ansible and jira ,it takes only jira.</p>
            <p>Also facing the issue for ansible pack when installed alone ,for standalone also was facing the issue
                ,then install gcc with<br>
                yum install gcc and it worked ,not sure how do it for docker</p>
            <p>Step 1/7 : ARG PACKS=‚Äúfile:///tmp/stackstorm-st2‚Äù<br>
                Step 2/7 : FROM stackstorm/st2packs:builder AS builder</p>
            <h1>Executing 2 build triggers</h1>
            <p>‚Äî&gt; Using cache<br>
                ‚Äî&gt; Using cache<br>
                ‚Äî&gt; 16cc22f2cba9<br>
                Step 3/7 : COPY packs/hello_st2 /tmp/stackstorm-st2/<br>
                ‚Äî&gt; Using cache<br>
                ‚Äî&gt; 4b2b0294c1c7<br>
                Step 4/7 : RUN ls -la /tmp/stackstorm-st2<br>
                ‚Äî&gt; Using cache<br>
                ‚Äî&gt; d6125dc06c83<br>
                Step 5/7 : RUN git config --global http.sslVerify false<br>
                ‚Äî&gt; Using cache<br>
                ‚Äî&gt; 5b68c4ea031a<br>
                Step 6/7 : RUN /opt/stackstorm/st2/bin/st2-pack-install ${PACKS}<br>
                ‚Äî&gt; Running in 9e02c88c3d1d<br>
                2020-11-24 15:17:51,629 INFO [-] Installing pack ‚Äúansible‚Äù<br>
                2020-11-24 15:17:52,430 INFO [-] Successfully installed pack ‚Äúansible‚Äù<br>
                2020-11-24 15:17:52,431 INFO [-] Setting up virtualenv for pack ‚Äúansible‚Äù<br>
                2020-11-24 15:17:52,432 INFO [-] Virtualenv path ‚Äú/opt/stackstorm/virtualenvs/ansible‚Äù doesn‚Äôt exist</p>
            <p>error:<br>
                ----------------------------------------<br>
                ERROR: Command ‚Äú/opt/stackstorm/virtualenvs/ansible/bin/python -u -c ‚Äòimport setuptools,
                tokenize;<strong>file</strong>=‚Äô‚Äù‚Äô"‚Äô/tmp/pip-install-stuuz20m/pykerberos/setup.py‚Äô"‚Äô"‚Äô;f=getattr(tokenize,
                ‚Äò"‚Äô"‚Äòopen‚Äô"‚Äô"‚Äô, open)(<strong>file</strong>);code=f.read().replace(‚Äô"‚Äô"‚Äô\r\n‚Äô"‚Äô"‚Äô,
                ‚Äò"‚Äô"‚Äô\n‚Äô"‚Äô"‚Äô);f.close();exec(compile(code, <strong>file</strong>, ‚Äò"‚Äô"‚Äòexec‚Äô"‚Äô"‚Äô))‚Äô install --record
                /tmp/pip-record-em0jpki_/install-record.txt --single-version-externally-managed --compile
                --install-headers /opt/stackstorm/virtualenvs/ansible/include/site/python3.6/pykerberos" failed with
                error code 1 in /tmp/pip-install-stuuz20m/pykerberos/<br>
                WARNING: You are using pip version 19.1.1, however version 20.2.4 is available.<br>
                You should consider upgrading via the ‚Äòpip install --upgrade pip‚Äô command.<br>
                )</p>
            <p>pip install --upgrade pip<br>
                Requirement already up-to-date: pip in /usr/local/lib/python3.6/site-packages (20.2.4)</p>
            <p>docker build -t st2packs_test:0.2 --build-arg PACKS=servicenow --build-arg PACKS=jira --build-arg
                PACKS=ansible st2packs-image</p>
            <p>docker build -t st2packs_test:0.2 --build-arg PACKS=ansible st2packs-image</p>
        </div>

        <meta itemprop='headline' content='Questions regarding st2 pack on stackstorm HA in kubernetes'>
        <meta itemprop='keywords' content='k8s, docker'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/armab'><span itemprop='name'>armab</span></a>
            (Eugen Cusmaunsa)
          </span>

            <link itemprop="mainEntityOfPage" href="1484.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-11-24T15:58:49Z' class='post-time'>
                November 24, 2020,  3:58pm
              </time>
              <meta itemprop='dateModified' content='2020-11-24T15:58:49Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Instead of:<br>
                <code>--build-arg PACKS=ansible jira</code><br>
                you need:<br>
                <code>--build-arg PACKS="ansible jira"</code></p>
        </div>

        <meta itemprop='headline' content='Questions regarding st2 pack on stackstorm HA in kubernetes'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/nithinsubbaraj'><span
                    itemprop='name'>nithinsubbaraj</span></a>
            (Nithin)
          </span>

            <link itemprop="mainEntityOfPage" href="1484.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-11-24T16:03:33Z' class='post-time'>
                November 24, 2020,  4:03pm
              </time>
              <meta itemprop='dateModified' content='2020-11-24T16:03:33Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Thanks ,looks like<br>
                docker build --build-arg PACKS=‚Äúservicenow ansible jira‚Äù -t st2:0.9 st2packs-image<br>
                is working fine ,I was check on it and update you.</p>
            <p>I wanted to copy the standalone packs from my standalone to the kubernetes how to do it ,I checked docker
                file location if possible ,I am getting not part of index issue</p>
        </div>

        <meta itemprop='headline' content='Questions regarding st2 pack on stackstorm HA in kubernetes'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/nithinsubbaraj'><span
                    itemprop='name'>nithinsubbaraj</span></a>
            (Nithin)
          </span>

            <link itemprop="mainEntityOfPage" href="1484.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-11-24T16:05:09Z' class='post-time'>
                November 24, 2020,  4:05pm
              </time>
              <meta itemprop='dateModified' content='2020-11-24T16:05:09Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>‚Äî&gt; Running in eae1b84f4245<br>
                2020-11-24 16:04:09,862 INFO [-] Installing pack ‚Äúservicenow‚Äù<br>
                2020-11-24 16:04:10,554 INFO [-] Successfully installed pack ‚Äúservicenow‚Äù<br>
                2020-11-24 16:04:10,554 INFO [-] Setting up virtualenv for pack ‚Äúservicenow‚Äù<br>
                2020-11-24 16:04:10,555 INFO [-] Virtualenv path ‚Äú/opt/stackstorm/virtualenvs/servicenow‚Äù doesn‚Äôt
                exist<br>
                2020-11-24 16:04:18,488 INFO [-] Successfully set up virtualenv for pack ‚Äúservicenow‚Äù<br>
                2020-11-24 16:04:18,488 INFO [-] Installing pack ‚Äúhello_st2‚Äù<br>
                2020-11-24 16:04:18,584 ERROR [-] Failed to install pack ‚Äúhello_st2‚Äù: No record of the ‚Äúhello_st2‚Äù pack
                in the index.<br>
                The command ‚Äò/bin/sh -c /opt/stackstorm/st2/bin/st2-pack-install ${PACKS}‚Äô returned a non-zero code: 2
            </p>
        </div>

        <meta itemprop='headline' content='Questions regarding st2 pack on stackstorm HA in kubernetes'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/armab'><span itemprop='name'>armab</span></a>
            (Eugen Cusmaunsa)
          </span>

            <link itemprop="mainEntityOfPage" href="1484.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-11-24T16:14:22Z' class='post-time'>
                November 24, 2020,  4:14pm
              </time>
              <meta itemprop='dateModified' content='2020-11-24T16:14:22Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Documentation highlights how to install a pack from the local file system:</p>
            <ul>
                <li><a href="https://github.com/stackstorm/st2packs-dockerfiles#building-the-st2packs-image"
                       class="inline-onebox">GitHub - StackStorm/st2packs-dockerfiles: Source for st2packs-builder and
                    st2packs-runner images</a></li>
                <li><a href="https://docs.stackstorm.com/packs.html#installing-a-pack" class="inline-onebox">Packs ‚Äî
                    StackStorm 3.3.0 documentation</a></li>
            </ul>
            <p>If you‚Äôre just starting with StackStorm I‚Äôd also recommend to try the Vagrant docker image <a
                    href="https://docs.stackstorm.com/install/vagrant.html" class="inline-onebox">Vagrant &amp; Virtual
                Appliance ‚Äî StackStorm 3.3.0 documentation</a> which will get you up &amp; running system quickly before
                diving deep into complexity with Docker and K8s.</p>
        </div>

        <meta itemprop='headline' content='Questions regarding st2 pack on stackstorm HA in kubernetes'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/nithinsubbaraj'><span
                    itemprop='name'>nithinsubbaraj</span></a>
            (Nithin)
          </span>

            <link itemprop="mainEntityOfPage" href="1484.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-11-24T16:51:06Z' class='post-time'>
                November 24, 2020,  4:51pm
              </time>
              <meta itemprop='dateModified' content='2020-11-24T16:51:06Z'>
          <span itemprop='position'>#6</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Thanks I followed the document you provided<br>
                GitHub - StackStorm/st2packs-dockerfiles: Source for st2packs-builder and st2packs-runner images</p>
            <p>we are using st2 on standalone servers and are doing POC for stackstom Ha on kubernetes</p>
            <p>I am not sure what I am missing I am still getting the error</p>
            <p>I copied my local pack test_ansible under the directory of st2packs-dockerfiles/st2packs-image</p>
            <p>The dockerfile under st2packs-dockerfiles/st2packs-image contains the below detail</p>
            <p>ARG PACKS=‚Äúfile:///tmp/stackstorm-st2‚Äù</p>
            <p>FROM stackstorm/st2packs:builder AS builder</p>
            <h1>considering you have your ‚Äúlocal‚Äù pack under the <code>stackstorm-st2</code> dir relative to Dockerfile
            </h1>
            <h1>Here we copy local ‚Äústackstorm-st2‚Äù dir into Docker‚Äôs ‚Äú/tmp/stackstorm-st2‚Äù</h1>
            <p>COPY test_ansible /tmp/stackstorm-st2/</p>
            <h1>Check it</h1>
            <p>RUN ls -la /tmp/stackstorm-st2</p>
            <p>RUN /opt/stackstorm/st2/bin/st2-pack-install ${PACKS}<br>
                FROM stackstorm/st2packs:runtime</p>
            <p>docker build --build-arg PACKS=‚Äútest_ansible‚Äù -t st2:0.9 st2packs-image<br>
                Sending build context to Docker daemon 5.674MB<br>
                Step 1/6 : ARG PACKS=‚Äúfile:///tmp/stackstorm-st2‚Äù<br>
                Step 2/6 : FROM stackstorm/st2packs:builder AS builder</p>
            <h1>Executing 2 build triggers</h1>
            <p>‚Äî&gt; Using cache<br>
                ‚Äî&gt; Using cache<br>
                ‚Äî&gt; cf4cf71c0f5a<br>
                Step 3/6 : COPY test_ansible /tmp/stackstorm-st2/<br>
                ‚Äî&gt; 41d826b03385<br>
                Step 4/6 : RUN ls -la /tmp/stackstorm-st2<br>
                ‚Äî&gt; Running in 4c4116737451<br>
                total 16<br>
                drwxr-xr-x 4 root root 116 Nov 24 16:44 .<br>
                drwxrwxrwt 1 root root 28 Nov 24 16:44 ‚Ä¶<br>
                drwxrwxrwx 3 root root 69 Nov 24 13:51 actions<br>
                -rwxrwxrwx 1 root root 67 Sep 30 10:31 inventory<br>
                -rwxrwxrwx 1 root root 744 Nov 24 13:44 nicompress.yaml<br>
                -rwxrwxrwx 1 root root 440 Sep 30 11:57 nideletefile.yaml<br>
                -rwxrwxrwx 1 root root 227 Sep 30 10:33 pack.yaml<br>
                drwxrwxrwx 2 root root 41 Sep 30 12:54 rules<br>
                Removing intermediate container 4c4116737451<br>
                ‚Äî&gt; 01887da8098c<br>
                Step 5/6 : RUN /opt/stackstorm/st2/bin/st2-pack-install <span class="math">{PACKS}
 ---&gt; Running in 055ba79781e5
2020-11-24 16:44:08,675 INFO [-] Installing pack "test_ansible"
2020-11-24 16:44:08,792 ERROR [-] Failed to install pack "test_ansible": No record of the "test_ansible" pack in the index.
The command '/bin/sh -c /opt/stackstorm/st2/bin/st2-pack-install </span>{PACKS}‚Äô returned a non-zero code: 2</p>
        </div>

        <meta itemprop='headline' content='Questions regarding st2 pack on stackstorm HA in kubernetes'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/armab'><span itemprop='name'>armab</span></a>
            (Eugen Cusmaunsa)
          </span>

            <link itemprop="mainEntityOfPage" href="1484.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-11-24T18:06:24Z' class='post-time'>
                November 24, 2020,  6:06pm
              </time>
              <meta itemprop='dateModified' content='2020-11-24T18:06:24Z'>
          <span itemprop='position'>#7</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Looks like you‚Äôre mixing: <code>PACKS=‚Äúfile:///tmp/stackstorm-st2‚Äù</code> vs
                <code>PACKS=‚Äútest_ansible‚Äù</code></p>
        </div>

        <meta itemprop='headline' content='Questions regarding st2 pack on stackstorm HA in kubernetes'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/nithinsubbaraj'><span
                    itemprop='name'>nithinsubbaraj</span></a>
            (Nithin)
          </span>

            <link itemprop="mainEntityOfPage" href="1484.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-11-25T13:22:32Z' class='post-time'>
                November 25, 2020,  1:22pm
              </time>
              <meta itemprop='dateModified' content='2020-11-25T13:22:32Z'>
          <span itemprop='position'>#8</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Thanks Eugen ,for the help ,yes I was mixing up Packs got is working now</p>
        </div>

        <meta itemprop='headline' content='Questions regarding st2 pack on stackstorm HA in kubernetes'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/nithinsubbaraj'><span
                    itemprop='name'>nithinsubbaraj</span></a>
            (Nithin)
          </span>

            <link itemprop="mainEntityOfPage" href="1484.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-11-25T13:24:17Z' class='post-time'>
                November 25, 2020,  1:24pm
              </time>
              <meta itemprop='dateModified' content='2020-11-25T13:24:17Z'>
          <span itemprop='position'>#9</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Dockerfile</p>
            <p>#######################################<br>
                ARG PACKS=‚Äúfile:///tmp/stackstorm-st2‚Äù</p>
            <p>FROM stackstorm/st2packs:builder AS builder</p>
            <h1>considering you have your ‚Äúlocal‚Äù pack under the <code>stackstorm-st2</code> dir relative to Dockerfile
            </h1>
            <h1>Here we copy local ‚Äústackstorm-st2‚Äù dir into Docker‚Äôs ‚Äú/tmp/stackstorm-st2‚Äù</h1>
            <p>COPY packs/hello_st2 /tmp/stackstorm-st2/</p>
            <h1>Check it</h1>
            <p>RUN ls -la /tmp/stackstorm-st2</p>
            <p>RUN /opt/stackstorm/st2/bin/st2-pack-install ${PACKS}<br>
                FROM stackstorm/st2packs:runtime<br>
                ##########################################</p>
            <p>pwd:st2packs-dockerfiles/st2packs-image</p>
            <ol start="2">
                <li>
                </li>
            </ol>
            <p>created packs and inside packs created hello_st2</p>
            <p>pwd:/st2packs-dockerfiles/st2packs-image/packs</p>
            <p>total 28<br>
                -rw-r‚Äìr-- 1 test snm 9 Aug 12 11:58 requirements.txt<br>
                -rw-r‚Äìr-- 1 test snm 1285 Aug 12 11:58 pack.yaml<br>
                -rw-r‚Äìr-- 1 test snm 3936 Aug 12 11:58 icon.png<br>
                drwxr-xr-x 2 test snm 4096 Aug 12 12:04 actions<br>
                drwxr-xr-x 2 test snm 4096 Aug 12 12:04 aliases<br>
                drwxr-xr-x 2 test snm 4096 Aug 12 12:04 policies<br>
                drwxr-xr-x 2 test snm 4096 Aug 12 12:04 rules<br>
                drwxr-xr-x 2 test snm 4096 Aug 12 12:04 sensors</p>
            <p>##############</p>
            <p>docker build -t hello_st2:v0.0.2 st2packs-image<br>
                Sending build context to Docker daemon 5.677MB<br>
                Step 1/6 : ARG PACKS=‚Äúfile:///tmp/stackstorm-st2‚Äù<br>
                Step 2/6 : FROM stackstorm/st2packs:builder AS builder</p>
            <h1>Executing 2 build triggers</h1>
            <p>‚Äî&gt; Using cache<br>
                ‚Äî&gt; Using cache<br>
                ‚Äî&gt; bf9c631b7800<br>
                Step 3/6 : COPY packs/hello_st2 /tmp/stackstorm-st2/<br>
                ‚Äî&gt; 84da7e531ad5<br>
                Step 4/6 : RUN ls -la /tmp/stackstorm-st2<br>
                ‚Äî&gt; Running in 17617093689d<br>
                total 12<br>
                drwxr-xr-x 7 root root 137 Nov 25 08:30 .<br>
                drwxrwxrwt 1 root root 28 Nov 25 08:30 ‚Ä¶<br>
                drwxr-xr-x 2 root root 40 Aug 12 18:04 actions<br>
                drwxr-xr-x 2 root root 25 Aug 12 18:04 aliases<br>
                -rw-r‚Äìr-- 1 root root 3936 Aug 12 17:58 icon.png<br>
                -rw-r‚Äìr-- 1 root root 1285 Aug 12 17:58 pack.yaml<br>
                drwxr-xr-x 2 root root 65 Aug 12 18:04 policies<br>
                -rw-r‚Äìr-- 1 root root 9 Aug 12 17:58 requirements.txt<br>
                drwxr-xr-x 2 root root 24 Aug 12 18:04 rules<br>
                drwxr-xr-x 2 root root 44 Aug 12 18:04 sensors<br>
                Removing intermediate container 17617093689d<br>
                ‚Äî&gt; 0e1451a395cd<br>
                Step 5/6 : RUN /opt/stackstorm/st2/bin/st2-pack-install ${PACKS}<br>
                ‚Äî&gt; Running in eccaaea63314<br>
                2020-11-25 08:30:33,714 INFO [-] Installing pack ‚Äúfile:///tmp/stackstorm-st2‚Äù<br>
                2020-11-25 08:30:33,734 INFO [-] Successfully installed pack ‚Äúhello_st2‚Äù<br>
                2020-11-25 08:30:33,734 INFO [-] Setting up virtualenv for pack ‚Äúhello_st2‚Äù<br>
                2020-11-25 08:30:33,735 INFO [-] Virtualenv path ‚Äú/opt/stackstorm/virtualenvs/hello_st2‚Äù doesn‚Äôt
                exist<br>
                2020-11-25 08:30:39,394 INFO [-] Successfully set up virtualenv for pack ‚Äúhello_st2‚Äù<br>
                Removing intermediate container eccaaea63314<br>
                ‚Äî&gt; cfbf9fc228fb<br>
                Step 6/6 : FROM stackstorm/st2packs:runtime</p>
            <h1>Executing 3 build triggers</h1>
            <p>‚Äî&gt; Using cache<br>
                ‚Äî&gt; Using cache<br>
                ‚Äî&gt; 62902078a65b<br>
                Successfully built 62902078a65b<br>
                Successfully tagged hello_st2:v0.0.2</p>
        </div>

        <meta itemprop='headline' content='Questions regarding st2 pack on stackstorm HA in kubernetes'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>


    <!-- :preload-content -->
    <footer class="noscript-footer-nav">
        <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='../../index.html'>Home</a>
            <a href="../../categories.html">Categories</a>
            <a href="https://forum.stackstorm.com/guidelines">FAQ/Guidelines</a>
            <a href="../../tos.html">Terms of Service</a>
            <a href="../../privacy.html">Privacy Policy</a>
        </nav>
    </footer>
</div>

<footer id='noscript-footer'>
    <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>


<section id='main'>
</section>


</body>
</html>
