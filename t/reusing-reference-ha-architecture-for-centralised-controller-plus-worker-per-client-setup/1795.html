<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device text-size-normal anon">
<head>
    <meta charset="utf-8">
    <title>Reusing reference HA architecture for Centralised Controller plus worker per client setup - StackStorm
        Support (ARCHIVED)</title>
    <meta name="description" content="Folks, 
Please see attached. Trying to setup Stackstorm for a IT service provider with multiple clients, We are looking at having a Centralised controller system for service provider to administer automations, look at &amp;hellip;">
    <meta name="discourse_theme_id" content="2">
    <meta name="discourse_current_homepage" content="latest">
    <meta name="generator"
          content="Discourse 2.8.0.beta6 - https://github.com/discourse/discourse version a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787">
    <link rel="icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_32x32.PNG">
    <link rel="apple-touch-icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_180x180.PNG">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <link rel="canonical" href="1795.html"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://forum.stackstorm.com",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://forum.stackstorm.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml"
          title="StackStorm Support (ARCHIVED) Search">


    <link href="/../../stylesheets/color_definitions_base__2_3c5eec1ecf192052ea70b4afdab57a62bccc0604.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" class="light-scheme"/>

    <link href="/../../stylesheets/desktop_b2f2968742d41481357e0df259b51ce29f72481a.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" data-target="desktop"/>


    <meta name="fragment" content="!">


    <link id="manifest-link" rel="manifest" href="../../manifest.webmanifest" crossorigin="use-credentials">


    <link rel="alternate" type="application/rss+xml"
          title="RSS feed of &#39;Reusing reference HA architecture for Centralised Controller plus worker per client setup&#39;"
          href="1795.rss"/>
    <meta property="og:site_name" content="StackStorm Support (ARCHIVED)"/>
    <meta property="og:type" content="website"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/4504f3b58e421b02d76120ba83d8e1151f86aafe.png"/>
    <meta property="og:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/4504f3b58e421b02d76120ba83d8e1151f86aafe.png"/>
    <meta property="og:url"
          content="https://forum.stackstorm.com/t/reusing-reference-ha-architecture-for-centralised-controller-plus-worker-per-client-setup/1795"/>
    <meta name="twitter:url"
          content="https://forum.stackstorm.com/t/reusing-reference-ha-architecture-for-centralised-controller-plus-worker-per-client-setup/1795"/>
    <meta property="og:title"
          content="Reusing reference HA architecture for Centralised Controller plus worker per client setup"/>
    <meta name="twitter:title"
          content="Reusing reference HA architecture for Centralised Controller plus worker per client setup"/>
    <meta property="og:description"
          content="Folks,  Please see attached. Trying to setup Stackstorm for a IT service provider with multiple clients, We are looking at having a Centralised controller system for service provider to administer automations, look at history etc ( Running st2web, mongodb, nginx) and each client worker will run (action runner , and other st2 processes )  The problem we found is -  st2schedular , st2action runner processes rely on Mongodb to fetch ,schedule and run automations, so client 2 worker ends up runnin..."/>
    <meta name="twitter:description"
          content="Folks,  Please see attached. Trying to setup Stackstorm for a IT service provider with multiple clients, We are looking at having a Centralised controller system for service provider to administer automations, look at history etc ( Running st2web, mongodb, nginx) and each client worker will run (action runner , and other st2 processes )  The problem we found is -  st2schedular , st2action runner processes rely on Mongodb to fetch ,schedule and run automations, so client 2 worker ends up runnin..."/>
    <meta property="article:published_time" content="2021-08-02T15:43:38+00:00"/>
    <meta property="og:ignore_canonical" content="true"/>


    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "QAPage",
        "name": "Reusing reference HA architecture for Centralised Controller plus worker per client setup",
        "mainEntity": {
            "@type": "Question",
            "name": "Reusing reference HA architecture for Centralised Controller plus worker per client setup",
            "text": "[Screenshot 2021-08-02 at 10.37.53 AM]\n\nFolks,\n\nPlease see attached. Trying to setup Stackstorm for a IT service provider with multiple clients, We are looking at having a Centralised controller system for service provider to administer automations, look at history etc ( Running st2web, mongodb, ngi&hellip;",
            "upvoteCount": 0,
            "answerCount": 0,
            "dateCreated": "2021-08-02T15:43:38.296Z",
            "author": {
                "@type": "Person",
                "name": "Jonathan Gull..."
            }
        }
    }
    </script>

    <meta id="data-discourse-setup" data-cdn="https://sjc6.discourse-cdn.com/standard10"
          data-base-url="https://forum.stackstorm.com" data-base-uri="" data-environment="production"
          data-letter-avatar-version="5_8fec8e114563efeaf5265573e510f08e"
          data-markdown-it-url="https://aws1.discourse-cdn.com/standard10/assets/markdown-it-bundle-31e9a9c535ca1801c26da78b0ff465821751a98f921c5cdc5457d7e5a69e9748.js"
          data-service-worker-url="service-worker.js" data-default-locale="en"
          data-asset-version="597e36448c9b51d0fa3b7e43ec1fd6d5" data-disable-custom-css="false"
          data-highlight-js-path="/highlight-js/forum.stackstorm.com/ac0f4aa001e1343346941766d72e0c1ae330832b.js"
          data-svg-sprite-path="/svg-sprite/forum.stackstorm.com/svg-2-c2ad434b1e06079c7e282124aed9938dc95b83ea.js"
          data-enable-js-error-reporting="true" data-color-scheme-is-dark="false" data-user-dark-scheme-id="-1"
          data-s3-cdn="https://aws1.discourse-cdn.com/standard10"
          data-s3-base-url="//discourse-cloud-file-uploads.s3.dualstack.us-west-2.amazonaws.com/standard10">

    <meta name="discourse/config/environment"
          content="%7B%22modulePrefix%22%3A%22discourse%22%2C%22environment%22%3A%22production%22%2C%22rootURL%22%3A%22%22%2C%22locationType%22%3A%22auto%22%2C%22historySupportMiddleware%22%3Afalse%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%2C%22EXTEND_PROTOTYPES%22%3A%7B%22Date%22%3Afalse%7D%2C%22_APPLICATION_TEMPLATE_WRAPPER%22%3Afalse%2C%22_DEFAULT_ASYNC_OBSERVERS%22%3Atrue%2C%22_JQUERY_INTEGRATION%22%3Atrue%7D%2C%22APP%22%3A%7B%22name%22%3A%22discourse%22%2C%22version%22%3A%222.8.0.beta6%20a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787%22%2C%22exportApplicationGlobal%22%3Atrue%7D%7D"/>
</head>

<body class="">


<header class="d-header">
    <div class="wrap">
        <div class="contents clearfix">
            <div class="title">
                <a href="../../index.html">
                    <picture>
                        <img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png"
                             alt="StackStorm Support (ARCHIVED)" id="site-logo"/>
                    </picture>
                </a>
            </div>

        </div>
    </div>
</header>

<div id="main-outlet" class="wrap" role="main">
    <!-- preload-content: -->

    <!-- EOF START -->
    <div class="container" id="main-container">
        <div id="ember11" class="ember-view"></div>
        <div id="ember12" class="controls ember-view"><!----></div>
        <div id="ember13" class="ember-view"><!----></div>
        <div id="ember14" class="ember-view">
            <div class="row">
                <div id="global-notice-alert-read-only" class="alert alert-info alert-read-only">
                    <!----> <span class="text">This site is in read only mode. Please continue to browse, but replying, likes, and other actions are disabled for now.</span>

                    <!---->    </div>
            </div>
            <div class="row">
                <div id="global-notice-alert-global-notice" class="alert alert-info alert-global-notice">
                    <!----> <span class="text"><h3>‚ö†Ô∏è We've moved!</h3>  <p> Hi there!<br><br> To reduce project dependency on 3rd party paid services the StackStorm TSC has decided to move the Q/A from this forum to <a
                        href="https://github.com/StackStorm/st2/discussions">Github Discussions</a>. This will make user experience better integrated with the native Github flow, as well as the questions closer to the community where they can provide answers. </p>  <p> Use üîó <b><a
                        href="https://github.com/StackStorm/st2/discussions" class="active">Github Discussions</a></b> to ask your questions. </p></span>

                    <!---->    </div>
            </div>
        </div>
        <div id="ember17" class="hidden create-topics-notice ember-view"><!----></div>
        <!---->
    </div>
    <!-- EOF END -->
    <div id="topic-title">
        <h1>
            <a href="1795.html">Reusing reference HA architecture for Centralised Controller plus worker per client
                setup</a>
        </h1>


    </div>


    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/jonathangull'><span
                    itemprop='name'>jonathangull</span></a>
            (Jonathan Gull...)
          </span>

            <link itemprop="mainEntityOfPage" href="1795.html">

            <link itemprop="image"
                  href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/4504f3b58e421b02d76120ba83d8e1151f86aafe.png">

            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-08-02T15:43:38Z' class='post-time'>
                August 2, 2021,  3:43pm
              </time>
              <meta itemprop='dateModified' content='2021-08-02T15:43:38Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>
                <img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/4504f3b58e421b02d76120ba83d8e1151f86aafe.png"
                     alt="Screenshot 2021-08-02 at 10.37.53 AM" data-base62-sha1="9QzypBD994h66H9q5oyoqouoOn4"
                     width="458" height="326"></p>
            <p>Folks,</p>
            <p>Please see attached. Trying to setup Stackstorm for a IT service provider with multiple clients, We are
                looking at having a Centralised controller system for service provider to administer automations, look
                at history etc ( Running st2web, mongodb, nginx) and each client worker will run (action runner , and
                other st2 processes )</p>
            <p>The problem we found is - st2schedular , st2action runner processes rely on Mongodb to fetch ,schedule
                and run automations, so client 2 worker ends up running automations scheduled by client 1 worker
                schedular process. Is it possible to control this with any configuration changes? Are there any IT
                service providers using this kind of setup in multi client environment? Any inputs would be highly
                beneficial Thank you very much.</p>
        </div>

        <meta itemprop='headline'
              content='Reusing reference HA architecture for Centralised Controller plus worker per client setup'>
        <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/punkrokk'><span itemprop='name'>punkrokk</span></a>
            (punkrokk)
          </span>

            <link itemprop="mainEntityOfPage" href="1795.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2021-08-17T00:09:01Z' class='post-time'>
                August 17, 2021, 12:09am
              </time>
              <meta itemprop='dateModified' content='2021-08-17T00:09:01Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>What you are looking for is ‚Äúaction affinity‚Äù (eg. the ability to declare which worker runs a specific
                action/workflow/set of actions). This is not present in ST2 today. It‚Äôs one of the 4 big architectural
                issues present in ST2 today.</p>
        </div>

        <meta itemprop='headline'
              content='Reusing reference HA architecture for Centralised Controller plus worker per client setup'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>


    <!-- :preload-content -->
    <footer class="noscript-footer-nav">
        <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='../../index.html'>Home</a>
            <a href="../../categories.html">Categories</a>
            <a href="https://forum.stackstorm.com/guidelines">FAQ/Guidelines</a>
            <a href="../../tos.html">Terms of Service</a>
            <a href="../../privacy.html">Privacy Policy</a>
        </nav>
    </footer>
</div>

<footer id='noscript-footer'>
    <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>


<section id='main'>
</section>


</body>
</html>
