<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device text-size-normal anon">
<head>
    <meta charset="utf-8">
    <title>Scheduled Mistral Workflow stuck in running state - Workflows - StackStorm Support (ARCHIVED)</title>
    <meta name="description"
          content="Running 2.10.1 version of stackstorm and 2.7.5 python on CentOS Linux release 7.6.1810 in K8s, using mistral workflow. We directly run the workflow, and it works properly, we go to rules and try to schedule using a cron &amp;hellip;">
    <meta name="discourse_theme_id" content="2">
    <meta name="discourse_current_homepage" content="latest">
    <meta name="generator"
          content="Discourse 2.8.0.beta6 - https://github.com/discourse/discourse version a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787">
    <link rel="icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_32x32.PNG">
    <link rel="apple-touch-icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_180x180.PNG">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <link rel="canonical" href="539.html"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://forum.stackstorm.com",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://forum.stackstorm.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml"
          title="StackStorm Support (ARCHIVED) Search">


    <link href="/../../stylesheets/color_definitions_base__2_3c5eec1ecf192052ea70b4afdab57a62bccc0604.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" class="light-scheme"/>

    <link href="/../../stylesheets/desktop_b2f2968742d41481357e0df259b51ce29f72481a.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" data-target="desktop"/>


    <meta name="fragment" content="!">


    <link id="manifest-link" rel="manifest" href="../../manifest.webmanifest" crossorigin="use-credentials">


    <link rel="alternate" type="application/rss+xml"
          title="RSS feed of &#39;Scheduled Mistral Workflow stuck in running state&#39;"
          href="https://forum.stackstorm.com/t/scheduled-mistral-workflow-stuck-in-running-state/539.rss"/>
    <meta property="og:site_name" content="StackStorm Support (ARCHIVED)"/>
    <meta property="og:type" content="website"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:url"
          content="https://forum.stackstorm.com/t/scheduled-mistral-workflow-stuck-in-running-state/539"/>
    <meta name="twitter:url"
          content="https://forum.stackstorm.com/t/scheduled-mistral-workflow-stuck-in-running-state/539"/>
    <meta property="og:title" content="Scheduled Mistral Workflow stuck in running state"/>
    <meta name="twitter:title" content="Scheduled Mistral Workflow stuck in running state"/>
    <meta property="og:description"
          content="Running 2.10.1 version of stackstorm and 2.7.5 python on CentOS Linux release 7.6.1810 in K8s, using mistral workflow. We directly run the workflow, and it works properly, we go to rules and try to schedule using a cron timer or interval timer and the workflow kicks off as expected and stays in running state, never progressing or failing, never even running the first task. Its still hanging around 24 hours later. This appeared after upgrading from 2.9.x to 2.10 version. Verified the scheduler is..."/>
    <meta name="twitter:description"
          content="Running 2.10.1 version of stackstorm and 2.7.5 python on CentOS Linux release 7.6.1810 in K8s, using mistral workflow. We directly run the workflow, and it works properly, we go to rules and try to schedule using a cron timer or interval timer and the workflow kicks off as expected and stays in running state, never progressing or failing, never even running the first task. Its still hanging around 24 hours later. This appeared after upgrading from 2.9.x to 2.10 version. Verified the scheduler is..."/>
    <meta property="article:published_time" content="2019-03-09T16:27:51+00:00"/>
    <meta property="og:ignore_canonical" content="true"/>


    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "QAPage",
        "name": "Scheduled Mistral Workflow stuck in running state",
        "mainEntity": {
            "@type": "Question",
            "name": "Scheduled Mistral Workflow stuck in running state",
            "text": "Running 2.10.1 version of stackstorm and 2.7.5 python on CentOS Linux release 7.6.1810 in K8s, using mistral workflow. We directly run the workflow, and it works properly, we go to rules and try to schedule using a cron timer or interval timer and the workflow kicks off as expected and stays in runn&hellip;",
            "upvoteCount": 0,
            "answerCount": 0,
            "dateCreated": "2019-03-09T16:27:51.675Z",
            "author": {
                "@type": "Person",
                "name": "Techdiverdown"
            }
        }
    }
    </script>

    <meta id="data-discourse-setup" data-cdn="https://sjc6.discourse-cdn.com/standard10"
          data-base-url="https://forum.stackstorm.com" data-base-uri="" data-environment="production"
          data-letter-avatar-version="5_8fec8e114563efeaf5265573e510f08e"
          data-markdown-it-url="https://aws1.discourse-cdn.com/standard10/assets/markdown-it-bundle-31e9a9c535ca1801c26da78b0ff465821751a98f921c5cdc5457d7e5a69e9748.js"
          data-service-worker-url="service-worker.js" data-default-locale="en"
          data-asset-version="597e36448c9b51d0fa3b7e43ec1fd6d5" data-disable-custom-css="false"
          data-highlight-js-path="/highlight-js/forum.stackstorm.com/ac0f4aa001e1343346941766d72e0c1ae330832b.js"
          data-svg-sprite-path="/svg-sprite/forum.stackstorm.com/svg-2-c2ad434b1e06079c7e282124aed9938dc95b83ea.js"
          data-enable-js-error-reporting="true" data-color-scheme-is-dark="false" data-user-dark-scheme-id="-1"
          data-s3-cdn="https://aws1.discourse-cdn.com/standard10"
          data-s3-base-url="//discourse-cloud-file-uploads.s3.dualstack.us-west-2.amazonaws.com/standard10">

    <meta name="discourse/config/environment"
          content="%7B%22modulePrefix%22%3A%22discourse%22%2C%22environment%22%3A%22production%22%2C%22rootURL%22%3A%22%22%2C%22locationType%22%3A%22auto%22%2C%22historySupportMiddleware%22%3Afalse%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%2C%22EXTEND_PROTOTYPES%22%3A%7B%22Date%22%3Afalse%7D%2C%22_APPLICATION_TEMPLATE_WRAPPER%22%3Afalse%2C%22_DEFAULT_ASYNC_OBSERVERS%22%3Atrue%2C%22_JQUERY_INTEGRATION%22%3Atrue%7D%2C%22APP%22%3A%7B%22name%22%3A%22discourse%22%2C%22version%22%3A%222.8.0.beta6%20a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787%22%2C%22exportApplicationGlobal%22%3Atrue%7D%7D"/>
</head>

<body class="">


<header class="d-header">
    <div class="wrap">
        <div class="contents clearfix">
            <div class="title">
                <a href="../../index.html">
                    <picture>
                        <img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png"
                             alt="StackStorm Support (ARCHIVED)" id="site-logo"/>
                    </picture>
                </a>
            </div>

        </div>
    </div>
</header>

<div id="main-outlet" class="wrap" role="main">
    <!-- preload-content: -->

    <!-- EOF START -->
    <div class="container" id="main-container">
        <div id="ember11" class="ember-view"></div>
        <div id="ember12" class="controls ember-view"><!----></div>
        <div id="ember13" class="ember-view"><!----></div>
        <div id="ember14" class="ember-view">
            <div class="row">
                <div id="global-notice-alert-read-only" class="alert alert-info alert-read-only">
                    <!----> <span class="text">This site is in read only mode. Please continue to browse, but replying, likes, and other actions are disabled for now.</span>

                    <!---->    </div>
            </div>
            <div class="row">
                <div id="global-notice-alert-global-notice" class="alert alert-info alert-global-notice">
                    <!----> <span class="text"><h3>‚ö†Ô∏è We've moved!</h3>  <p> Hi there!<br><br> To reduce project dependency on 3rd party paid services the StackStorm TSC has decided to move the Q/A from this forum to <a
                        href="https://github.com/StackStorm/st2/discussions">Github Discussions</a>. This will make user experience better integrated with the native Github flow, as well as the questions closer to the community where they can provide answers. </p>  <p> Use üîó <b><a
                        href="https://github.com/StackStorm/st2/discussions" class="active">Github Discussions</a></b> to ask your questions. </p></span>

                    <!---->    </div>
            </div>
        </div>
        <div id="ember17" class="hidden create-topics-notice ember-view"><!----></div>
        <!---->
    </div>
    <!-- EOF END -->
    <div id="topic-title">
        <h1>
            <a href="539.html">Scheduled Mistral Workflow stuck in running state</a>
        </h1>

        <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/workflow-related-issues/15" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Workflows</span>
              </span>
            </a>
            <meta itemprop="position" content="1"/>
          </span>
        </div>

        <div class="topic-category">
            <div class='discourse-tags list-tags'>
                <a href='../../tag/rules' class='discourse-tag' rel="tag">rules</a>,
                <a href='../../tag/mistral' class='discourse-tag' rel="tag">mistral</a>
            </div>
        </div>
    </div>


    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/techdiverdown'><span
                    itemprop='name'>techdiverdown</span></a>
            (Techdiverdown)
          </span>

            <link itemprop="mainEntityOfPage" href="539.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-09T16:27:51Z' class='post-time'>
                March 9, 2019,  4:27pm
              </time>
              <meta itemprop='dateModified' content='2019-03-11T17:43:30Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Running 2.10.1 version of stackstorm and 2.7.5 python on CentOS Linux release 7.6.1810 in K8s, using
                mistral workflow. We directly run the workflow, and it works properly, we go to rules and try to
                schedule using a cron timer or interval timer and the workflow kicks off as expected and stays in
                running state, never progressing or failing, never even running the first task. Its still hanging around
                24 hours later. This appeared after upgrading from 2.9.x to 2.10 version. Verified the scheduler is
                running and we see the execution starting in the mistral logs.</p>
            <p><strong>I noted that I cannot reproduce on a single node instance, but running in K8s we are seeing this
                issue. It appears it may be related to using Helm charts for the mistral workflow?</strong></p>
            <p>OK another update, when running as a rule, we are running as a different user, which does not have
                correct permissions it appears. We have this working now, using LDAP authentication, we add the required
                user stanley and now we can schedule workflows using rules.</p>
        </div>

        <meta itemprop='headline' content='Scheduled Mistral Workflow stuck in running state'>
        <meta itemprop='keywords' content='rules, mistral'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/m4dcoder'><span itemprop='name'>m4dcoder</span></a>
            (W Chan)
          </span>

            <link itemprop="mainEntityOfPage" href="539.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-13T19:49:41Z' class='post-time'>
                March 13, 2019,  7:49pm
              </time>
              <meta itemprop='dateModified' content='2019-03-13T19:49:41Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Per our discussion on the <span class="hashtag">#community</span> channel in Slack, since Mistral will be
                deprecated soon, we did not include Mistral in our helm chart for K8s. So, if you are using our helm
                chart, that‚Äôs probably the reason why Mistral workflows are not running. Please migrate to Orquesta, our
                new workflow engine, moving forward.</p>
        </div>

        <meta itemprop='headline' content='Scheduled Mistral Workflow stuck in running state'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/techdiverdown'><span
                    itemprop='name'>techdiverdown</span></a>
            (Techdiverdown)
          </span>

            <link itemprop="mainEntityOfPage" href="539.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-15T22:16:35Z' class='post-time'>
                March 15, 2019, 10:16pm
              </time>
              <meta itemprop='dateModified' content='2019-03-15T22:18:05Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>I understand your pushing folks off of mistral, but until you have a GA release of Orquesta it seems a
                bit premature. I cannot take production code and convert to a beta or RC1 release. Is there any
                realistic date when your going GA? And yes, I understand I can go now‚Ä¶i just have been bitten a few too
                many times with early releases.</p>
        </div>

        <meta itemprop='headline' content='Scheduled Mistral Workflow stuck in running state'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/m4dcoder'><span itemprop='name'>m4dcoder</span></a>
            (W Chan)
          </span>

            <link itemprop="mainEntityOfPage" href="539.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-03-19T17:03:14Z' class='post-time'>
                March 19, 2019,  5:03pm
              </time>
              <meta itemprop='dateModified' content='2019-03-19T17:03:14Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>You can continue to use Mistral until it is deprecated in future release and we will support it until
                then. However, for any new development such as helm chart and k8s, we won‚Äôt include Mistral. There is
                also technical problem with scaling out Mistral that‚Äôs why it is not included in our k8s and helm chart
                development and the resources required to overcome it. Hence the reason we are developing Orquesta.
                Orquesta GA is scheduled for v3.0 and should be released soon.</p>
        </div>

        <meta itemprop='headline' content='Scheduled Mistral Workflow stuck in running state'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>


    <!-- :preload-content -->
    <footer class="noscript-footer-nav">
        <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='../../index.html'>Home</a>
            <a href="../../categories.html">Categories</a>
            <a href="https://forum.stackstorm.com/guidelines">FAQ/Guidelines</a>
            <a href="../../tos.html">Terms of Service</a>
            <a href="../../privacy.html">Privacy Policy</a>
        </nav>
    </footer>
</div>

<footer id='noscript-footer'>
    <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>


<section id='main'>
</section>


</body>
</html>
