<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device text-size-normal anon">
<head>
    <meta charset="utf-8">
    <title>StackStorm.st2repo : Add keys to keyring - ansible - StackStorm Support (ARCHIVED)</title>
    <meta name="description"
          content="Hi, I‚Äôm trying to install new version of St2 via Ansible and facing issues, some issues are fixed and now facing this new issue where I‚Äôm not able to get the gpgkey from packagecloud.io b‚Äôcoz of firewalls. Any one have a&amp;hellip;">
    <meta name="discourse_theme_id" content="2">
    <meta name="discourse_current_homepage" content="latest">
    <meta name="generator"
          content="Discourse 2.8.0.beta6 - https://github.com/discourse/discourse version a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787">
    <link rel="icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_32x32.PNG">
    <link rel="apple-touch-icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_180x180.PNG">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <link rel="canonical" href="652.html"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://forum.stackstorm.com",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://forum.stackstorm.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml"
          title="StackStorm Support (ARCHIVED) Search">


    <link href="/../../stylesheets/color_definitions_base__2_3c5eec1ecf192052ea70b4afdab57a62bccc0604.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" class="light-scheme"/>

    <link href="/../../stylesheets/desktop_b2f2968742d41481357e0df259b51ce29f72481a.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" data-target="desktop"/>


    <meta name="fragment" content="!">


    <link id="manifest-link" rel="manifest" href="../../manifest.webmanifest" crossorigin="use-credentials">


    <link rel="alternate" type="application/rss+xml"
          title="RSS feed of &#39;StackStorm.st2repo : Add keys to keyring&#39;" href="652.rss"/>
    <meta property="og:site_name" content="StackStorm Support (ARCHIVED)"/>
    <meta property="og:type" content="website"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/891f00fbdb31fecb5bd9dab30c186d2fed0091ca.jpeg"/>
    <meta property="og:url" content="https://forum.stackstorm.com/t/stackstorm-st2repo-add-keys-to-keyring/652"/>
    <meta name="twitter:url" content="https://forum.stackstorm.com/t/stackstorm-st2repo-add-keys-to-keyring/652"/>
    <meta property="og:title" content="StackStorm.st2repo : Add keys to keyring"/>
    <meta name="twitter:title" content="StackStorm.st2repo : Add keys to keyring"/>
    <meta property="og:description"
          content="Hi, I‚Äôm trying to install new version of St2 via Ansible and facing issues, some issues are fixed and now facing this new issue where I‚Äôm not able to get the gpgkey from packagecloud.io b‚Äôcoz of firewalls. Any one have any workaround to fix this issue?  TASK [StackStorm.st2repo : Including ID variable for stable] *******************************************************************************************************************************************************************************  task pat..."/>
    <meta name="twitter:description"
          content="Hi, I‚Äôm trying to install new version of St2 via Ansible and facing issues, some issues are fixed and now facing this new issue where I‚Äôm not able to get the gpgkey from packagecloud.io b‚Äôcoz of firewalls. Any one have any workaround to fix this issue?  TASK [StackStorm.st2repo : Including ID variable for stable] *******************************************************************************************************************************************************************************  task pat..."/>
    <meta property="article:published_time" content="2019-05-15T20:30:36+00:00"/>
    <meta property="og:ignore_canonical" content="true"/>


    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "QAPage",
        "name": "StackStorm.st2repo : Add keys to keyring",
        "mainEntity": {
            "@type": "Question",
            "name": "StackStorm.st2repo : Add keys to keyring",
            "text": "Hi, I‚Äôm trying to install new version of St2 via Ansible and facing issues, some issues are fixed and now facing this new issue where I‚Äôm not able to get the gpgkey from <a href="
            https://forum.stackstorm.com/t/stackstorm-st2repo-add-keys-to-keyring/\&quot;http://packagecloud.io\&quot;" rel=\"nofollow noopener\">packagecloud.io<\/a> b‚Äôcoz of firewalls. Any one have any workaround to fix this issue?\n\nTASK [StackStorm.st2repo : Including ID variab&hellip;","upvoteCount":0,"answerCount":0,"dateCreated":"2019-05-15T20:30:36.351Z","author":{"@type":"Person","name":"Sammi.c30"}}}
    </script>

    <meta id="data-discourse-setup" data-cdn="https://sjc6.discourse-cdn.com/standard10"
          data-base-url="https://forum.stackstorm.com" data-base-uri="" data-environment="production"
          data-letter-avatar-version="5_8fec8e114563efeaf5265573e510f08e"
          data-markdown-it-url="https://aws1.discourse-cdn.com/standard10/assets/markdown-it-bundle-31e9a9c535ca1801c26da78b0ff465821751a98f921c5cdc5457d7e5a69e9748.js"
          data-service-worker-url="service-worker.js" data-default-locale="en"
          data-asset-version="597e36448c9b51d0fa3b7e43ec1fd6d5" data-disable-custom-css="false"
          data-highlight-js-path="/highlight-js/forum.stackstorm.com/ac0f4aa001e1343346941766d72e0c1ae330832b.js"
          data-svg-sprite-path="/svg-sprite/forum.stackstorm.com/svg-2-c2ad434b1e06079c7e282124aed9938dc95b83ea.js"
          data-enable-js-error-reporting="true" data-color-scheme-is-dark="false" data-user-dark-scheme-id="-1"
          data-s3-cdn="https://aws1.discourse-cdn.com/standard10"
          data-s3-base-url="//discourse-cloud-file-uploads.s3.dualstack.us-west-2.amazonaws.com/standard10">

    <meta name="discourse/config/environment"
          content="%7B%22modulePrefix%22%3A%22discourse%22%2C%22environment%22%3A%22production%22%2C%22rootURL%22%3A%22%22%2C%22locationType%22%3A%22auto%22%2C%22historySupportMiddleware%22%3Afalse%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%2C%22EXTEND_PROTOTYPES%22%3A%7B%22Date%22%3Afalse%7D%2C%22_APPLICATION_TEMPLATE_WRAPPER%22%3Afalse%2C%22_DEFAULT_ASYNC_OBSERVERS%22%3Atrue%2C%22_JQUERY_INTEGRATION%22%3Atrue%7D%2C%22APP%22%3A%7B%22name%22%3A%22discourse%22%2C%22version%22%3A%222.8.0.beta6%20a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787%22%2C%22exportApplicationGlobal%22%3Atrue%7D%7D"/>
</head>

<body class="">


<header class="d-header">
    <div class="wrap">
        <div class="contents clearfix">
            <div class="title">
                <a href="../../index.html">
                    <picture>
                        <img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png"
                             alt="StackStorm Support (ARCHIVED)" id="site-logo"/>
                    </picture>
                </a>
            </div>

        </div>
    </div>
</header>

<div id="main-outlet" class="wrap" role="main">
    <!-- preload-content: -->

    <!-- EOF START -->
    <div class="container" id="main-container">
        <div id="ember11" class="ember-view"></div>
        <div id="ember12" class="controls ember-view"><!----></div>
        <div id="ember13" class="ember-view"><!----></div>
        <div id="ember14" class="ember-view">
            <div class="row">
                <div id="global-notice-alert-read-only" class="alert alert-info alert-read-only">
                    <!----> <span class="text">This site is in read only mode. Please continue to browse, but replying, likes, and other actions are disabled for now.</span>

                    <!---->    </div>
            </div>
            <div class="row">
                <div id="global-notice-alert-global-notice" class="alert alert-info alert-global-notice">
                    <!----> <span class="text"><h3>‚ö†Ô∏è We've moved!</h3>  <p> Hi there!<br><br> To reduce project dependency on 3rd party paid services the StackStorm TSC has decided to move the Q/A from this forum to <a
                        href="https://github.com/StackStorm/st2/discussions">Github Discussions</a>. This will make user experience better integrated with the native Github flow, as well as the questions closer to the community where they can provide answers. </p>  <p> Use üîó <b><a
                        href="https://github.com/StackStorm/st2/discussions" class="active">Github Discussions</a></b> to ask your questions. </p></span>

                    <!---->    </div>
            </div>
        </div>
        <div id="ember17" class="hidden create-topics-notice ember-view"><!----></div>
        <!---->
    </div>
    <!-- EOF END -->
    <div id="topic-title">
        <h1>
            <a href="652.html">StackStorm.st2repo : Add keys to keyring</a>
        </h1>


        <div class="topic-category">
            <div class='discourse-tags list-tags'>
                <a href='../../tag/ansible' class='discourse-tag' rel="tag">ansible</a>
            </div>
        </div>
    </div>


    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/sammi.c30'><span itemprop='name'>sammi.c30</span></a>
            (Sammi.c30)
          </span>

            <link itemprop="mainEntityOfPage" href="652.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-15T20:30:36Z' class='post-time'>
                May 15, 2019,  8:30pm
              </time>
              <meta itemprop='dateModified' content='2019-05-15T20:30:36Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Hi, I‚Äôm trying to install new version of St2 via Ansible and facing issues, some issues are fixed and now
                facing this new issue where I‚Äôm not able to get the gpgkey from <a href="http://packagecloud.io"
                                                                                   rel="nofollow noopener">packagecloud.io</a>
                b‚Äôcoz of firewalls. Any one have any workaround to fix this issue?</p>
            <p>TASK [StackStorm.st2repo : Including ID variable for stable]
                *******************************************************************************************************************************************************************************<br>
                task path: /data/ansible-st2/roles/StackStorm.st2repo/tasks/st2repo_apt.yml:15<br>
                ok: [localhost] =&gt; {<br>
                ‚Äúansible_facts‚Äù: {<br>
                ‚Äúkey_id‚Äù: ‚Äú3CE01873543A4CCE‚Äù<br>
                },<br>
                ‚Äúansible_included_var_files‚Äù: [<br>
                ‚Äú/data/ansible-st2/roles/StackStorm.st2repo/vars/stable.yml‚Äù<br>
                ],<br>
                ‚Äúchanged‚Äù: false<br>
                }</p>
            <p>TASK [StackStorm.st2repo : Add keys to keyring]
                ********************************************************************************************************************************************************************************************<br>
                task path: /data/ansible-st2/roles/StackStorm.st2repo/tasks/st2repo_apt.yml:19<br>
                ESTABLISH LOCAL CONNECTION FOR USER: root<br>
                EXEC /bin/sh -c ‚Äòecho ~root &amp;&amp; sleep 0‚Äô<br>
                EXEC /bin/sh -c ‚Äò( umask 77 &amp;&amp; mkdir -p ‚Äú<code>echo
                    /root/.ansible/tmp/ansible-tmp-1557947289.3-149048032450793</code>‚Äù &amp;&amp; echo
                ansible-tmp-1557947289.3-149048032450793="<code>echo
                    /root/.ansible/tmp/ansible-tmp-1557947289.3-149048032450793</code>" ) &amp;&amp; sleep 0‚Äô<br>
                Using module file /usr/local/lib/python2.7/dist-packages/ansible/modules/packaging/os/apt_key.py<br>
                PUT /root/.ansible/tmp/ansible-local-18958ObbJzA/tmp43h611 TO
                /root/.ansible/tmp/ansible-tmp-1557947289.3-149048032450793/AnsiballZ_apt_key.py<br>
                EXEC /bin/sh -c ‚Äòchmod u+x /root/.ansible/tmp/ansible-tmp-1557947289.3-149048032450793/
                /root/.ansible/tmp/ansible-tmp-1557947289.3-149048032450793/AnsiballZ_apt_key.py &amp;&amp; sleep 0‚Äô<br>
                EXEC /bin/sh -c ‚Äò/usr/bin/python
                /root/.ansible/tmp/ansible-tmp-1557947289.3-149048032450793/AnsiballZ_apt_key.py &amp;&amp; sleep 0‚Äô<br>
                EXEC /bin/sh -c ‚Äòrm -f -r /root/.ansible/tmp/ansible-tmp-1557947289.3-149048032450793/ &gt; /dev/null 2&gt;&amp;1
                &amp;&amp; sleep 0‚Äô<br>
                FAILED - RETRYING: Add keys to keyring (5 retries left).Result was: {<br>
                ‚Äúattempts‚Äù: 1,<br>
                ‚Äúchanged‚Äù: false,<br>
                ‚Äúinvocation‚Äù: {<br>
                ‚Äúmodule_args‚Äù: {<br>
                ‚Äúdata‚Äù: null,<br>
                ‚Äúfile‚Äù: null,<br>
                ‚Äúid‚Äù: ‚Äú3CE01873543A4CCE‚Äù,<br>
                ‚Äúkey‚Äù: null,<br>
                ‚Äúkeyring‚Äù: null,<br>
                ‚Äúkeyserver‚Äù: null,<br>
                ‚Äústate‚Äù: ‚Äúpresent‚Äù,<br>
                ‚Äúurl‚Äù: ‚Äú<a href="https://packagecloud.io/StackStorm/stable/gpgkey" rel="nofollow noopener">https://packagecloud.io/StackStorm/stable/gpgkey</a>‚Äù,<br>
                ‚Äúvalidate_certs‚Äù: true<br>
                }<br>
                },<br>
                ‚Äúmsg‚Äù: ‚ÄúFailed to connect to <a href="http://packagecloud.io"
                                                rel="nofollow noopener">packagecloud.io</a> at port 443: [Errno 104]
                Connection reset by peer‚Äù,<br>
                ‚Äúretries‚Äù: 6<br>
                }</p>
        </div>

        <meta itemprop='headline' content='StackStorm.st2repo : Add keys to keyring'>
        <meta itemprop='keywords' content='ansible'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

        <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
            <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                <a href="../stackstorm-st2-install-latest-st2-package-auto-update/653/4.html" itemscope
                   itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                    <meta itemprop='url'
                          content='https://forum.stackstorm.com/t/stackstorm-st2-install-latest-st2-package-auto-update/653/4'>
                    <span itemprop='name'>StackStorm.st2 : Install latest st2 package, auto-update</span>
                </a>
                <meta itemprop='position' content='3'>
            </div>
        </div>
    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/sammi.c30'><span itemprop='name'>sammi.c30</span></a>
            (Sammi.c30)
          </span>

            <link itemprop="mainEntityOfPage" href="652.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-15T22:31:32Z' class='post-time'>
                May 15, 2019, 10:31pm
              </time>
              <meta itemprop='dateModified' content='2019-05-15T22:31:32Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>I did the workaround for now by downloading the key and add it manually, but looking for better
                solution.</p>
        </div>

        <meta itemprop='headline' content='StackStorm.st2repo : Add keys to keyring'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/armab'><span itemprop='name'>armab</span></a>
            (Eugen Cusmaunsa)
          </span>

            <link itemprop="mainEntityOfPage" href="652.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-05-16T10:43:11Z' class='post-time'>
                May 16, 2019, 10:43am
              </time>
              <meta itemprop='dateModified' content='2019-05-16T10:58:05Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>You need to have access to <a href="http://packagecloud.io" rel="nofollow noopener">packagecloud.io</a>
                from the system, otherwise you‚Äôll be unable to add the APT repository and download StackStorm packages
                from it. There is no workaround. Ask your administrator to whitelist <a href="http://packagecloud.io"
                                                                                        rel="nofollow noopener">packagecloud.io</a>
                access or adjust firewalls.</p>
            <p>Alternative solution is to use different deployment method if you‚Äôre behind firewalls/proxy. For example,
                Virtual Appliance/OVA which already has preinstalled StackStorm system and ready to be downloaded as
                artifact <a href="https://docs.stackstorm.com/install/vagrant.html" class="inline-onebox"
                            rel="nofollow noopener">Vagrant &amp; Virtual Appliance ‚Äî StackStorm 3.0.0 documentation</a>
            </p>
        </div>

        <meta itemprop='headline' content='StackStorm.st2repo : Add keys to keyring'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>


    <!-- :preload-content -->
    <footer class="noscript-footer-nav">
        <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='../../index.html'>Home</a>
            <a href="../../categories.html">Categories</a>
            <a href="https://forum.stackstorm.com/guidelines">FAQ/Guidelines</a>
            <a href="../../tos.html">Terms of Service</a>
            <a href="../../privacy.html">Privacy Policy</a>
        </nav>
    </footer>
</div>

<footer id='noscript-footer'>
    <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>


<section id='main'>
</section>


</body>
</html>
