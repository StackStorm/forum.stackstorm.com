<!DOCTYPE html>
<html lang="en" class="desktop-view not-mobile-device text-size-normal anon">
<head>
    <meta charset="utf-8">
    <title>Workaround for Accessing config_context in a Mistral Workflow - Mistral - StackStorm Support
        (ARCHIVED)</title>
    <meta name="description" content="Reference 

 
Problem 
Currently in a Mistral Workflow you can not access the config_context described here: Actions — StackStorm 2.7.1 documentation 
StackStorm currently doesn’t pass this context into Mistral or provid&amp;hellip;">
    <meta name="discourse_theme_id" content="2">
    <meta name="discourse_current_homepage" content="latest">
    <meta name="generator"
          content="Discourse 2.8.0.beta6 - https://github.com/discourse/discourse version a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787">
    <link rel="icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_32x32.PNG">
    <link rel="apple-touch-icon" type="image/png"
          href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/optimized/1X/379ced12f8326d58f1b3d2b3ff652f883e141f6a_2_180x180.PNG">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
    <link rel="canonical" href="123.html"/>
    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "WebSite",
        "url": "https://forum.stackstorm.com",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://forum.stackstorm.com/search?q={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    <link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml"
          title="StackStorm Support (ARCHIVED) Search">


    <link href="/../../stylesheets/color_definitions_base__2_3c5eec1ecf192052ea70b4afdab57a62bccc0604.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" class="light-scheme"/>

    <link href="/../../stylesheets/desktop_b2f2968742d41481357e0df259b51ce29f72481a.css?__ws=forum.stackstorm.com"
          media="all" rel="stylesheet" data-target="desktop"/>


    <meta name="fragment" content="!">


    <link id="manifest-link" rel="manifest" href="../../manifest.webmanifest" crossorigin="use-credentials">


    <link rel="alternate" type="application/rss+xml"
          title="RSS feed of &#39;Workaround for Accessing config_context in a Mistral Workflow&#39;" href="123.rss"/>
    <meta property="og:site_name" content="StackStorm Support (ARCHIVED)"/>
    <meta property="og:type" content="website"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/c1f8816b033d8eab466a2f7141c4135704a55344.jpg"/>
    <meta property="og:image"
          content="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/c1f8816b033d8eab466a2f7141c4135704a55344.jpg"/>
    <meta property="og:url"
          content="https://forum.stackstorm.com/t/workaround-for-accessing-config-context-in-a-mistral-workflow/123"/>
    <meta name="twitter:url"
          content="https://forum.stackstorm.com/t/workaround-for-accessing-config-context-in-a-mistral-workflow/123"/>
    <meta property="og:title" content="Workaround for Accessing config_context in a Mistral Workflow"/>
    <meta name="twitter:title" content="Workaround for Accessing config_context in a Mistral Workflow"/>
    <meta property="og:description"
          content="Reference      Problem  Currently in a Mistral Workflow you can not access the config_context described here: Actions — StackStorm 2.10.1 documentation  StackStorm currently doesn’t pass this context into Mistral or provide a Jinja filter to access it.  Workaround  To access the config context information in a Mistral workflow, you can simply create a new parameter in the StackStorm action metadata. This new paramter can be immutable parameter and set with default that reads from the config cont..."/>
    <meta name="twitter:description"
          content="Reference      Problem  Currently in a Mistral Workflow you can not access the config_context described here: Actions — StackStorm 2.10.1 documentation  StackStorm currently doesn’t pass this context into Mistral or provide a Jinja filter to access it.  Workaround  To access the config context information in a Mistral workflow, you can simply create a new parameter in the StackStorm action metadata. This new paramter can be immutable parameter and set with default that reads from the config cont..."/>
    <meta property="article:published_time" content="2018-04-20T13:48:46+00:00"/>
    <meta property="og:ignore_canonical" content="true"/>


    <script type="application/ld+json">{
        "@context": "http://schema.org",
        "@type": "QAPage",
        "name": "Workaround for Accessing config_context in a Mistral Workflow",
        "mainEntity": {
            "@type": "Question",
            "name": "Workaround for Accessing config_context in a Mistral Workflow",
            "text": "Reference\n\n<a href="
            https://forum.stackstorm.com/t/workaround-for-accessing-config-context-in-a-mistral-workflow/\&quot;https://github.com/diellenne\&quot;" rel=\"nofollow noopener\">\n\n[image]\n\n<\/a>\n\n<a href="https://forum.stackstorm.com/t/workaround-for-accessing-config-context-in-a-mistral-workflow/\&quot;https://github.com/StackStorm/st2/issues/3388\&quot;" target=\"_blank\" rel=\"nofollow noopener\">Issue: Config values from workflows<\/a>\n\nopened by <a href="https://forum.stackstorm.com/t/workaround-for-accessing-config-context-in-a-mistral-workflow/\&quot;https://github.com/diellenne\&quot;" target=\"_blank\" rel=\"nofollow noopener\">diellenne<\/a>\n\non <a href="https://forum.stackstorm.com/t/workaround-for-accessing-config-context-in-a-mistral-workflow/\&quot;https://github.com/StackStorm/st2/issues/3388\&quot;" target=\"_blank\" rel=\"nofollow noopener\">2017-05-03<\/a>\n\nWould be really handy being able to read the values defined in a pack configuration file directly from a workflow definition;...\n\nfeature\n\nProblem\n\nCurrentl&hellip;","upvoteCount":0,"answerCount":0,"dateCreated":"2018-04-20T13:48:46.756Z","author":{"@type":"Person","name":"Nick Maludy"}}}
    </script>

    <meta id="data-discourse-setup" data-cdn="https://sjc6.discourse-cdn.com/standard10"
          data-base-url="https://forum.stackstorm.com" data-base-uri="" data-environment="production"
          data-letter-avatar-version="5_8fec8e114563efeaf5265573e510f08e"
          data-markdown-it-url="https://aws1.discourse-cdn.com/standard10/assets/markdown-it-bundle-31e9a9c535ca1801c26da78b0ff465821751a98f921c5cdc5457d7e5a69e9748.js"
          data-service-worker-url="service-worker.js" data-default-locale="en"
          data-asset-version="597e36448c9b51d0fa3b7e43ec1fd6d5" data-disable-custom-css="false"
          data-highlight-js-path="/highlight-js/forum.stackstorm.com/ac0f4aa001e1343346941766d72e0c1ae330832b.js"
          data-svg-sprite-path="/svg-sprite/forum.stackstorm.com/svg-2-c2ad434b1e06079c7e282124aed9938dc95b83ea.js"
          data-enable-js-error-reporting="true" data-color-scheme-is-dark="false" data-user-dark-scheme-id="-1"
          data-s3-cdn="https://aws1.discourse-cdn.com/standard10"
          data-s3-base-url="//discourse-cloud-file-uploads.s3.dualstack.us-west-2.amazonaws.com/standard10">

    <meta name="discourse/config/environment"
          content="%7B%22modulePrefix%22%3A%22discourse%22%2C%22environment%22%3A%22production%22%2C%22rootURL%22%3A%22%22%2C%22locationType%22%3A%22auto%22%2C%22historySupportMiddleware%22%3Afalse%2C%22EmberENV%22%3A%7B%22FEATURES%22%3A%7B%7D%2C%22EXTEND_PROTOTYPES%22%3A%7B%22Date%22%3Afalse%7D%2C%22_APPLICATION_TEMPLATE_WRAPPER%22%3Afalse%2C%22_DEFAULT_ASYNC_OBSERVERS%22%3Atrue%2C%22_JQUERY_INTEGRATION%22%3Atrue%7D%2C%22APP%22%3A%7B%22name%22%3A%22discourse%22%2C%22version%22%3A%222.8.0.beta6%20a1daf9fe53a66e2d2cdf9757ab4812fb9a2b2787%22%2C%22exportApplicationGlobal%22%3Atrue%7D%7D"/>
</head>

<body class="">


<header class="d-header">
    <div class="wrap">
        <div class="contents clearfix">
            <div class="title">
                <a href="../../index.html">
                    <picture>
                        <img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png"
                             alt="StackStorm Support (ARCHIVED)" id="site-logo"/>
                    </picture>
                </a>
            </div>

        </div>
    </div>
</header>

<div id="main-outlet" class="wrap" role="main">
    <!-- preload-content: -->

    <!-- EOF START -->
    <div class="container" id="main-container">
        <div id="ember11" class="ember-view"></div>
        <div id="ember12" class="controls ember-view"><!----></div>
        <div id="ember13" class="ember-view"><!----></div>
        <div id="ember14" class="ember-view">
            <div class="row">
                <div id="global-notice-alert-read-only" class="alert alert-info alert-read-only">
                    <!----> <span class="text">This site is in read only mode. Please continue to browse, but replying, likes, and other actions are disabled for now.</span>

                    <!---->    </div>
            </div>
            <div class="row">
                <div id="global-notice-alert-global-notice" class="alert alert-info alert-global-notice">
                    <!----> <span class="text"><h3>⚠️ We've moved!</h3>  <p> Hi there!<br><br> To reduce project dependency on 3rd party paid services the StackStorm TSC has decided to move the Q/A from this forum to <a
                        href="https://github.com/StackStorm/st2/discussions">Github Discussions</a>. This will make user experience better integrated with the native Github flow, as well as the questions closer to the community where they can provide answers. </p>  <p> Use 🔗 <b><a
                        href="https://github.com/StackStorm/st2/discussions" class="active">Github Discussions</a></b> to ask your questions. </p></span>

                    <!---->    </div>
            </div>
        </div>
        <div id="ember17" class="hidden create-topics-notice ember-view"><!----></div>
        <!---->
    </div>
    <!-- EOF END -->
    <div id="topic-title">
        <h1>
            <a href="123.html">Workaround for Accessing config_context in a Mistral Workflow</a>
        </h1>

        <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/workflow-related-issues/15" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Workflows</span>
              </span>
            </a>
            <meta itemprop="position" content="1"/>
          </span>
            <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../c/workflow-related-issues/mistral-related-issues/16" class="badge-wrapper bullet"
               itemprop="item">
              <span class='badge-category-bg' style='background-color: #652D90'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Mistral</span>
              </span>
            </a>
            <meta itemprop="position" content="2"/>
          </span>
        </div>

        <div class="topic-category">
            <div class='discourse-tags list-tags'>
                <a href='../../tag/howto' class='discourse-tag' rel="tag">howto</a>,
                <a href='../../tag/mistral' class='discourse-tag' rel="tag">mistral</a>
            </div>
        </div>
    </div>


    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/nmaludy'><span itemprop='name'>nmaludy</span></a>
            (Nick Maludy)
          </span>

            <link itemprop="mainEntityOfPage" href="123.html">

            <link itemprop="image"
                  href="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/c1f8816b033d8eab466a2f7141c4135704a55344.jpg">

            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2018-04-20T13:48:46Z' class='post-time'>
                April 20, 2018,  1:48pm
              </time>
              <meta itemprop='dateModified' content='2018-05-15T19:34:41Z'>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p><strong>Reference</strong><br>
            <aside class="onebox githubissue">
                <header class="source">
                    <a href="https://github.com/StackStorm/st2/issues/3388" target="_blank" rel="nofollow noopener">github.com/StackStorm/st2</a>
                </header>
                <article class="onebox-body">
                    <a href="https://github.com/diellenne" rel="nofollow noopener">
                        <img src="https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/c1f8816b033d8eab466a2f7141c4135704a55344.jpg"
                             class="thumbnail onebox-avatar" width="96" height="96">
                    </a>

                    <h4><a href="https://github.com/StackStorm/st2/issues/3388" target="_blank" rel="nofollow noopener">Issue:
                        Config values from workflows</a></h4>

                    <div class="date" style="margin-top:10px;">
                        <div class="user" style="margin-top:10px;">
                            opened by <a href="https://github.com/diellenne" target="_blank" rel="nofollow noopener">diellenne</a>
                            on <a href="https://github.com/StackStorm/st2/issues/3388" target="_blank"
                                  rel="nofollow noopener">2017-05-03</a>
                        </div>
                        <div class="user">
                        </div>
                    </div>

                    <pre class="content" style="white-space: pre-wrap;">Would be really handy being able to read the values defined in a pack configuration file directly from a workflow definition;...</pre>

                    <div class="labels">
                        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">feature</span>
                    </div>

                </article>
                <div class="onebox-metadata">


                </div>
                <div style="clear: both"></div>
            </aside>
            </p>
            <p><strong>Problem</strong><br>
                Currently in a Mistral Workflow you can not access the <code>config_context</code> described here: <a
                        href="https://docs.stackstorm.com/actions.html?highlight=config_context#parameters-in-actions"
                        class="inline-onebox" rel="nofollow noopener">Actions — StackStorm 2.10.1 documentation</a></p>
            <p>StackStorm currently doesn’t pass this context into Mistral or provide a Jinja filter to access it.</p>
            <p><strong>Workaround</strong><br>
                To access the config context information in a Mistral workflow, you can simply create a new parameter in
                the StackStorm action metadata. This new paramter can be immutable parameter and set with default that
                reads from the config context.</p>
            <p>Example :</p>
            <p>Action metadata file</p>
            <pre><code class="lang-auto">parameters:
    config_username:
        type: "string"
        description: "Username from the pack's config"
        required: true
        immutable: true
        default: "{{ config_context.username }}"
</code></pre>
            <p>Finally, add this new parameter as an input in your Mistral workflow, then you can access it like a
                normal Mistral variable.</p>
            <pre><code class="lang-auto">examples.config_context_example:
  description: 
  type: direct
  input:
    - config_username

  tasks:
    action: core.local
    input:
      cmd: "echo {{ _.config_username }}"
</code></pre>
        </div>

        <meta itemprop='headline' content='Workaround for Accessing config_context in a Mistral Workflow'>
        <meta itemprop='keywords' content='howto, mistral'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/devdude'><span itemprop='name'>devdude</span></a>
            (Michael)
          </span>

            <link itemprop="mainEntityOfPage" href="123.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-07-03T18:22:29Z' class='post-time'>
                July 3, 2019,  6:22pm
              </time>
              <meta itemprop='dateModified' content='2019-07-03T18:22:29Z'>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <aside class="quote no-group" data-post="1" data-topic="123">
                <div class="title">
                    <div class="quote-controls"></div>
                    <img alt width="20" height="20"
                         src="https://sjc6.discourse-cdn.com/standard10/user_avatar/forum.stackstorm.com/nmaludy/40/9_2.png"
                         class="avatar"> nmaludy:
                </div>
                <blockquote>
                    <p>Actions — StackStorm 2.10.1 documentation</p>
                </blockquote>
            </aside>
            <p>We have added a task to just fetch the pack config in the workflow.</p>
            <blockquote>
<pre><code>pack_config:
    action: core.http
    input:
      url: "{{ env().st2_action_api_url }}/configs/{{ env()['__actions']['st2.action']['st2_context']['parent']['pack'] }}"
      method: GET
      headers:
        X-Auth-Token: "{{ env()['__actions']['st2.action']['st2_context']['auth_token'] }}"
   on-success:
      - call_next_task
</code></pre>
            </blockquote>
            <p>Later, you can define input or output to tasks / workflows like so:</p>
            <blockquote>
<pre><code>      schema_registry_url: '&lt;% task(pack_config).result.body.values.kafka_schema_registry_url %&gt;'
      bootstrap_servers:   "{{ task('pack_config')['result']['body']['values']['kafka_bootstrap_servers'] }}"</code></pre>
            </blockquote>
        </div>

        <meta itemprop='headline' content='Workaround for Accessing config_context in a Mistral Workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/devdude'><span itemprop='name'>devdude</span></a>
            (Michael)
          </span>

            <link itemprop="mainEntityOfPage" href="123.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-16T04:01:09Z' class='post-time'>
                August 16, 2019,  4:01am
              </time>
              <meta itemprop='dateModified' content='2019-08-16T04:01:09Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Attempting to reproduce this above in orquesta - but the env() appears not to be a function there. Is
                there a list of all the system functions / data structures availalbe for orquesta ? I have seached the
                docs to no avail.</p>
        </div>

        <meta itemprop='headline' content='Workaround for Accessing config_context in a Mistral Workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/m4dcoder'><span itemprop='name'>m4dcoder</span></a>
            (W Chan)
          </span>

            <link itemprop="mainEntityOfPage" href="123.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2019-08-16T18:06:30Z' class='post-time'>
                August 16, 2019,  6:06pm
              </time>
              <meta itemprop='dateModified' content='2019-08-16T18:08:54Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Try this doc section on <a href="https://docs.stackstorm.com/latest/orquesta/stackstorm.html"
                                          rel="nofollow noopener">StackStorm Context and Functions</a></p>
        </div>

        <meta itemprop='headline' content='Workaround for Accessing config_context in a Mistral Workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>
    <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
            <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
                <meta itemprop='name' content='StackStorm'>
                <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                    <meta itemprop='url'
                          content='https://aws1.discourse-cdn.com/standard10/uploads/stackstorm/original/1X/843840296d4160717941c20e214d0772ce899ab0.png'>
                </div>
            </div>
            <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://github.com/jamesdreid'><span
                    itemprop='name'>jamesdreid</span></a>
            (James Reid)
          </span>

            <link itemprop="mainEntityOfPage" href="123.html">


            <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2020-10-28T16:36:00Z' class='post-time'>
                October 28, 2020,  4:36pm
              </time>
              <meta itemprop='dateModified' content='2020-10-28T16:36:00Z'>
          <span itemprop='position'>#5</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
            <p>Here is an Orquestra workflow that replicates the one above. The workflow context does not include an
                “auth token” to make the API call, so it is stored in the ST2 keystore and the name of the key is
                submitted as input to the workflow. It is written to pull the Pack name out of the workflow context as
                well but since it is using the API, it could be re-worked to have that submitted as input to the
                workflow as well to get config values from another Pack if needed.</p>
            <pre><code>version: 1.0

description: A workflow to pull the pack config values from the system using an API call over HTTPS

#############################################
#   Need a valid API key to access ST2 API  #
#############################################

input:
  - api_key_name

##################################################
#  Variables published by workflow on success    #
##################################################

vars:
  - pack_config:
- api_key_value:

#########################################
#   Output at the end of the workflow   #
#########################################

output:
  - pack_config: &lt;% ctx().pack_config %&gt;

##################################
#   Workflow tasks to complete   #
##################################

tasks:
  get_api_token:
    action: st2.kv.get
    input:
      key: &lt;% ctx().api_key_name %&gt;
      decrypt: True
    next:
      - when: &lt;% succeeded() %&gt;
        publish: api_key_value=&lt;% result().result %&gt;
        do: get_pack_config
  get_pack_config:
    action: core.http
    input:
      url: &lt;% ctx().st2.api_url %&gt;/configs/&lt;% ctx().st2.pack %&gt;
      method: GET
      headers: {"St2-Api-Key": &lt;% ctx().api_key_value %&gt;}
      params: {"show_secrets": "True"}
    next:
      - when: &lt;% succeeded() %&gt;
        publish: pack_config=&lt;% result().body.values %&gt;
</code></pre>
            <p>The yaml file for this workflow is:</p>
            <pre><code>---
name: get_pack_config
pack: packname
description: Workflow to extract the pack config data using an HTTP api call
runner_type: orquesta
entry_point: workflows/get_pack_config.yaml
enabled: true
parameters:
  api_key_name:
    required: true
    type: string
    description: Name of the keystore entry that contains a valid ST2 API key</code></pre>
        </div>

        <meta itemprop='headline' content='Workaround for Accessing config_context in a Mistral Workflow'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
            <span class='post-likes'></span>
        </div>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0"/>
        </div>

    </div>


    <!-- :preload-content -->
    <footer class="noscript-footer-nav">
        <nav itemscope itemtype='http://schema.org/SiteNavigationElement'>
            <a href='../../index.html'>Home</a>
            <a href="../../categories.html">Categories</a>
            <a href="https://forum.stackstorm.com/guidelines">FAQ/Guidelines</a>
            <a href="../../tos.html">Terms of Service</a>
            <a href="../../privacy.html">Privacy Policy</a>
        </nav>
    </footer>
</div>

<footer id='noscript-footer'>
    <p>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>


<section id='main'>
</section>


</body>
</html>
